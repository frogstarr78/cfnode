<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="lang" content="en-us" />
    <meta name="area" content="livedocs" />
    <title>Adobe&#160;ColdFusion&#160;9 * Defining the application and its event handlers in Application.cfc</title>
    <link rel="shortcut icon" href="images/ColdFusionLinkIndicator.png" />
    <meta name="book" content="Developing&#160;ColdFusion 9 Applications" />
    <meta name="product" content="ColdFusion" />
    <meta name="keywords" content="" /><!--<PageMap><DataObject type="document"><Attribute name="product" value="ColdFusion"></Attribute><Attribute name="book" value="Developing&#160;ColdFusion 9 Applications"></Attribute><Attribute name="keywords" value=""></Attribute></DataObject></PageMap>-->
    
    <script type="text/javascript" language="Javascript" charset="UTF-8"><!--[CDATA[
        var currentTreeNode = "WSc3ff6d0ea77859461172e0811cbec22c24-7d39.html";
    document.cookie = "topicId=" + "WSc3ff6d0ea77859461172e0811cbec22c24-7d39.html";
// ]]--></script>
<script src="terms.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="help.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script>  <script src="utilities.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="event.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="treeview.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="toc.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script> <script src="swfobject.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>  <script src="booklist.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>
<script type="text/javascript">
<!--[CDATA[
var topictype = "topic";
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
  var linkId = document.createElement("link");
  linkId.href = "content-ie6.css";
  linkId.rel = "stylesheet";
  linkId.type = "text/css";
  headId.appendChild(linkId);
}
function initRoboHelpDOM() {
  if (use_chm_behavior) {
    hideElement("search");
  }
  if (use_robohelp_behavior) {
    hideElement("search");
    hideElement("productmenu");
    //hideElement("notyourversion");
  }
  if(!use_chc_behavior) {
    //document.getElementById("notyourversion").style.display = "inline";;
  }
}
var dirname = location.pathname.match( /.*\// );    
function setSearchUserPref(){
  if ( document.cookie.indexOf( "ah_searchpref" ) > -1 ) {
    if ( document.cookie.indexOf( dirname ) > 0 ) {
      document.search.gsa.checked = true ;
    }else{
      document.search.gsa.checked = false ;            
    }
  }
}
YAHOO.util.Event.onDOMReady(initRoboHelpDOM);
YAHOO.util.Event.onDOMReady(setSearchUserPref);
// ]]-->
</script>

<!-- ********************************** -->
<!-- START: ForeSee survey code in: /ssi/globalheader.ssi -->

<script type="text/javascript">
<!-- 
// Enable the survey for only English, German and Japanese
var agt=navigator.userAgent.toLowerCase();
if ( agt.indexOf("community help client") == -1 ){
    if ( document.location.href.indexOf("/en_US/") != -1 ){
        showSurvey();
//    }else if (document.location.href.indexOf("/de_DE/") != -1){
//         var locale="de";
//         showSurvey();
    }else if (document.location.href.indexOf("/ja_JP/") != -1 ){
         var locale="ja";
         showSurvey();
    }	
}

function showSurvey(){
	document.write('<script type="text/javascript" src="/js/foresee/foresee-trigger.js"><\/scr'+'ipt>');
}

// -->
</script>

<!-- END: ForeSee survey code -->
<!-- ******************************** -->




    <link rel="stylesheet" type="text/css" href="tree.css" />
    <link rel="stylesheet" type="text/css" href="content.css" />
    <link rel="stylesheet" type="text/css" href="localeSpecific.css" />
  </head>
  <body id="content_body" onload="window.focus();">
    <a name="top" shape="rect"><!--LeaveCommentHere--></a>
    
    <div id="mnemonic">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon" class="ColdFusion"><div class="banner"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html">Adobe&#160;ColdFusion&#160;9</a><span id="notyourversion">|&#160;
                    <a rel="nofollow" href="http://www.adobe.com/support/documentation/en/coldfusion/">Not your version?</a></span></div></div><!--googleon: index-->
    </div>
    
    <div id="searchbar">
<table id="searchbartable">
<tr>
<td colspan="2">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon"><div id="pdf"><img src="images/PDF.gif" width="16" height="16" /><a title="View Help PDF" href="coldfusion_9_dev.pdf">View Help PDF ( 23MB)</a></div></div><!--googleon: index-->
</td>
</tr>
</table>
    </div>

<!-- BEGIN SEARCH CONTENT -->
<form id="search" name="search" action="search.html" target="_self">
<script type="text/javascript">
<!--[CDATA[
if ( !use_chc_behavior ){
    if (typeof(terms_AHV_SEARCH_CONSTRAINT) != "undefined" && 
        terms_AHV_SEARCH_CONSTRAINT.length > 0 && 
        document.location.href.indexOf(".adobe.com") > 0){
        if ( typeof(terms_SEARCH_THIS_HELP_ONLY) != "undefined" && terms_SEARCH_THIS_HELP_ONLY == "ON" ) {
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                checked="checked" \
                value="1" ><\/input>'); 
                
        // Leave the "Search this help system only" checkbox unckecked
        }else{    
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                value="1" ><\/input>'); 
        }
        document.write('<span class="gsalabel">' + terms_AHV_SEARCH_CONSTRAINT + '<\/span><\/div>'); 
    }
    document.write('<input class="searchinput" \
        name="q" \
        id="q" \
        type="text" \
        maxlength="256" \
        value="' + terms_AHV_SEARCH_BUTTON + '" \
        onclick="clearSearch()"><\/input><input \
        type="button" \
        name="searchbutton" \
        class="searchbutton" \
        onclick="submit()"><\/input>'); 
} 
 
/* 
 * Start Functions 
 */
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}

// set search preferences
function setAHSearchPref(){
    if (document.search.gsa.checked == 1){
        setAHSearchCookie( dirname );
    }else{
        setAHSearchCookie( "community" );
    }
}

// Set search preferences cookie
function setAHSearchCookie( p ){
    // set cookie ah_searchpref with a value of the document path
    var expire=new Date();
    expire.setDate(expire.getDate()+365); // Cookie expires after 1 year (365 days) 
    document.cookie="ah_searchpref=" +p+ "; expires=" +expire.toGMTString()+ ";";
}

// ]]-->
</script> 
 </form>
<!-- END SEARCH CONTENT -->    



<!-- BEGIN PAGE CONTENT WRAPPER -->
    <div id="page_content_wrapper">
<!-- BEGIN PAGE WRAPPER -->
<table id="page_content_table">
<tr>

<td id="col2">
<!-- BEGIN CONTENT WRAPPER -->
<!-- BEGIN BREADCRUMBS -->

      
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-7d6f.html" title="Structuring an application"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec0b63c-7ffa.html" title="Migrating from Application.cfm to Application.cfc"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WS8f0cc78011fffa71-ea0996f11cdae56045-8000.html"><b>Developing CFML Applications</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7e19.html"><b>Designing and Optimizing a ColdFusion Application</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
      <div id="content_wrapper">
<!-- BEGIN PAGE TITLE -->
        <h1>Defining the application and its event handlers in Application.cfc</h1>
<!-- END PAGE TITLE -->
<!-- BEGIN IONCOMMENTCOUNT -->
        <div id="ionCount">
        </div>
<!-- END IONCOMMENTCOUNT -->
<table id="inner_content_table" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td>
          <div style="border-top:#ccc solid 1px;"><p> </p>
          </div>
<p id="chcPromo" style="display:none;">
<a id="chcLink" href="http://www.adobe.com/support/chc/">
<img id="chcImage" src="http://www.adobe.com/support/chc/GetMoreHelpFeatures.png"/>
</a>
</p>
<script type="text/javascript" language="javascript" charset="utf-8">
<!--
var cfgArray = [];
//cfgArray["Acrobat_10.0_Professional.helpcfg"] = "acrobatpro";
//cfgArray["Acrobat_10.0_Standard.helpcfg"] = "acrobatstd";
cfgArray["Lightroom_3.0.helpcfg"] = "lightroom";
cfgArray["PhotoshopElements_8.0_Win.helpcfg"] = "photoshopelements";
cfgArray["PhotoshopElements_8.0_Mac.helpcfg"] = "photoshopelementsmac";
cfgArray["PremiereElements_8.0_Win.helpcfg"] = "premiereelements";

//cfgArray["AfterEffects_10.0.helpcfg"] = "aftereffects";
//cfgArray["AIR.helpcfg"] = "air";
//cfgArray["ColdFusionBuilder.helpcfg"] = "coldfusion";
//cfgArray["Contribute_6.0.helpcfg"] = "contribute";
//cfgArray["DeviceCentral_3.0.helpcfg"] = "devicecentral";
//cfgArray["Dreamweaver_11.0.helpcfg"] = "dreamweaver";
//cfgArray["EncoreDVD_5.0.helpcfg"] = "encore";
//cfgArray["ExtensionManager_3.0.helpcfg"] = "extension";
//cfgArray["Fireworks_11.0.helpcfg"] = "fireworks";
//cfgArray["Flash_11.0.helpcfg"] = "flash";
//cfgArray["Flex_4.0.helpcfg"] = "flashbuilder";
//cfgArray["FlashCatalyst_1.0.helpcfg"] = "flashcatalyst";
//cfgArray["Illustrator_15.0.helpcfg"] = "illustrator";
//cfgArray["InCopy_7.0.helpcfg"] = "incopy";
//cfgArray["InDesign_7.0.helpcfg"] = "indesign";
//cfgArray["OnLocation_5.0.helpcfg"] = "onlocation";
//cfgArray["Photoshop_12.0.helpcfg"] = "photoshop";
//cfgArray["PremierePro_5.0.helpcfg"] = "premierepro";

function getLangName() {
    var lang = "en-us";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if (ptn.test(lang)) {
        var languageCode = lang.replace(ptn, "$1");
        var countryCode = lang.replace(ptn, "$2");
        lang = languageCode + "_" + countryCode.toUpperCase();
    }
    return lang;
}

function getCountryName() {
    var lang = "";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if ((ptn.test(lang)) && (lang != "en-us")) {
        var countryCode = lang.replace(ptn, "$2");
        return "/" + countryCode;
    }
    return "";
}

if ( (typeof(terms_HELPCFG) != 'undefined')  && (terms_HELPCFG.indexOf(".helpcfg") != -1) ) {
    var stage   = (document.location.href.indexOf(".stage.") != -1) ? 'stage.' : '';
    var baseUrl = 'http://www.' + stage + 'adobe.com';
    var refpage = document.location.href.replace(/#.*$/, '');
	
	if ((!use_robohelp_behavior) && (terms_HELPCFG.length > 0) && (typeof(cfgArray[terms_HELPCFG]) != 'undefined') && (cfgArray[terms_HELPCFG].length > 0)) {
		if (document.getElementById) { // DOM3 = IE5, NS6
			var newHref = baseUrl + getCountryName() + "/support/chc/" + "?helpcfg=http://help." + stage + "adobe.com/HelpCfg/" + getLangName() + "/" + terms_HELPCFG + "&url=" + refpage + "&product=" + cfgArray[terms_HELPCFG];
			var newSrc = baseUrl + getCountryName() + "/support/chc/GetMoreHelpFeatures.png";
			document.getElementById("chcPromo").style.display = "block";
			document.getElementById("chcLink").href = newHref;
			document.getElementById("chcImage").src = newSrc;
		}
	}
}

//-->
</script>



          <div id="minitoc"><div class="t"><div class="b"><div><ul id="minitoc-links"><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-68e0"><span class="topictitle1">Defining application-level settings and variables</span>
</a></p><ul><li><p><a href="#WS072119B3-091A-4778-BC15-76A839FFCE3E"><span class="topictitle2">Naming the application</span>
</a></p></li><li><p><a href="#WSF58399B2-471F-4cc8-BECB-B33644335193"><span class="topictitle2">Setting application properties</span>
</a></p></li><li><p><a href="#WS578211FA-6D50-4e46-8F69-EB7B08AEA7E4"><span class="topictitle2">Setting page processing options</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec0b63c-7ff8"><span class="topictitle1">Using application event handlers</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-6053"><span class="topictitle1">Managing the application with Application.cfc</span>
</a></p><ul><li><p><a href="#WSA8E0748B-3A5A-4f60-97E4-85601A06A695"><span class="topictitle2">Defining application utility functions</span>
</a></p></li><li><p><a href="#WS6B589054-1E47-45e3-99F0-BAD7FFDF0E92"><span class="topictitle2">Setting application default variables and constants in onApplicationStart</span>
</a></p></li><li><p><a href="#WSAF989AD4-912A-4727-B7BF-19CF200E1538"><span class="topictitle2">Using the onApplicationEnd method</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-604c"><span class="topictitle1">Managing sessions in Application.cfc</span>
</a></p><ul><li><p><a href="#WSB9D75989-B159-4c24-887A-2A3456CA5678"><span class="topictitle2">Using the onSessionStart method</span>
</a></p></li><li><p><a href="#WS98B4E431-4CEA-49f7-8EAF-701CF8875997"><span class="topictitle2">Using the onSessionEnd method</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-7d38"><span class="topictitle1">Managing requests in Application.cfc</span>
</a></p><ul><li><p><a href="#WS42FECA7E-1979-45b9-8083-03C8B90012A7"><span class="topictitle2">Using the onRequestStart method</span>
</a></p></li><li><p><a href="#WSABC8CA48-77E3-440f-8683-EADF50C75D6B"><span class="topictitle2">User authentication</span>
</a></p></li><li><p><a href="#WSA2E4EEFC-CC6F-416a-92E3-FD1D829C15BD"><span class="topictitle2">Using the onRequest method</span>
</a></p></li><li><p><a href="#WSB4447109-DC21-45f3-B557-DD43CA1978C0"><span class="topictitle2">Using the onRequestEnd method</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-7cce"><span class="topictitle1">Handling errors in Application.cfc</span>
</a></p><ul><li><p><a href="#WSA5F59864-2233-4ed3-80B8-A0917E162684"><span class="topictitle2">Application.cfc error handling techniques</span>
</a></p></li><li><p><a href="#WS311D0E54-CA8A-45e9-8242-7A6B43689EE1"><span class="topictitle2">Handling server-side validation errors in the onError method</span>
</a></p></li><li><p><a href="#WSACE08705-7036-43f9-BA79-44A2ECC69E43"><span class="topictitle2">Example: error Handling with the onError method</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec0b63c-7ff1"><span class="topictitle1">Example: a complete Application.cfc</span>
</a></p></li></ul></div></div></div></div><div><p>The Application.cfc
file defines application-wide settings and variables, and application
event handlers:</p>
<ul><li><p>Application-wide settings and variables include page
processing settings, default variables, data sources, style settings,
and other application-level constants.</p>
</li>
<li><p>Application event handlers are CFC methods that ColdFusion
automatically executes when specific events occur during the lifetime
of an application: application start and end, session start and
end, request start, execution, and end, and exceptions.</p>
</li>
</ul>
</div>
<div id="WSc3ff6d0ea77859461172e0811cbec22c24-68e0" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-68e0"><!-- --></a><h2 class="topictitle2">Defining application-level settings and variables</h2><div><p>When you create an application, you can set many application-wide
properties and characteristics, including the following items:</p>
<ul><li><p>Application name</p>
</li>
<li><p>Application properties, including Client-, Application-,
and Session-variable management options </p>
</li>
<li><p>Page processing options</p>
</li>
<li><p>Default variables, data sources, style settings, and other
application-level constants</p>
</li>
</ul>
<p>For information on setting default variables, see <a href="WS6B589054-1E47-45e3-99F0-BAD7FFDF0E92.html">Setting application default variables and constants in onApplicationStart</a>.</p>
</div><div id="WS072119B3-091A-4778-BC15-76A839FFCE3E" class="nochunk"><a name="WS072119B3-091A-4778-BC15-76A839FFCE3E"><!-- --></a><h3 class="topictitle3">Naming the application</h3><div><p>Define
the application and give it a name by setting the This.name variable
in the Application.cfc initialization section, before the method
definitions. By using a specific application name, you define a
set of pages as part of the same logical application. </p>
<p>ColdFusion supports unnamed applications, which are useful for
ColdFusion applications that must interoperate with JSP tags and
servlets. Consider creating an unnamed application <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">only</i> if
your ColdFusion pages must share Application or Session scope data
with existing JSP pages and servlets. You cannot have more than
one unnamed application on a server instance. For more information
on using unnamed applications, see <a href="WSA602A121-DA27-43a3-B8AE-341F006B9431.html">Sharing data between ColdFusion pages and JSP pages or servlets</a>.</p>
</div></div><div id="WSF58399B2-471F-4cc8-BECB-B33644335193" class="nochunk"><a name="WSF58399B2-471F-4cc8-BECB-B33644335193"><!-- --></a><h3 class="topictitle3">Setting application properties</h3><div><p>Specify application properties by setting This scope variables
in the Application.cfc initialization code. (These are the same
properties that you set in the <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d69.html" target="_self">cfapplication</a></samp> tag.) The following
table lists the This scope variable that ColdFusion uses to set
application properties and describes their uses. </p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e24645"><p>Variable</p>
</th>
<th valign="top" width="NaN%" id="d17e24648"><p>Default</p>
</th>
<th valign="top" width="NaN%" id="d17e24651"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e24645 "><p>applicationTimeout</p>
</td>
<td valign="top" width="NaN%" headers="d17e24648 "><p>Administrator value</p>
</td>
<td valign="top" width="NaN%" headers="d17e24651 "><p>Life span, as a real number of days, of
the application, including all Application scope variables. Use
the <samp class="codeph">createTimeSpan</samp> function to generate this variable.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24645 "><p>clientManagement</p>
</td>
<td valign="top" width="NaN%" headers="d17e24648 "><p>False</p>
</td>
<td valign="top" width="NaN%" headers="d17e24651 "><p>Whether the application supports Client
scope variables.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24645 "><p>clientStorage</p>
</td>
<td valign="top" width="NaN%" headers="d17e24648 "><p>Administrator value</p>
</td>
<td valign="top" width="NaN%" headers="d17e24651 "><p>Where Client variables are stored; can be
cookie, registry, or the name of a data source.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24645 "><p>loginStorage</p>
</td>
<td valign="top" width="NaN%" headers="d17e24648 "><p>Cookie</p>
</td>
<td valign="top" width="NaN%" headers="d17e24651 "><p>Whether to store login information in the
Cookie scope or the Session scope.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24645 "><p>scriptProtect</p>
</td>
<td valign="top" width="NaN%" headers="d17e24648 "><p>Administrator Value</p>
</td>
<td valign="top" width="NaN%" headers="d17e24651 "><p>Whether to protect variables from cross-site
scripting attacks.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24645 "><p>sessionManagement</p>
</td>
<td valign="top" width="NaN%" headers="d17e24648 "><p>False</p>
</td>
<td valign="top" width="NaN%" headers="d17e24651 "><p>Whether the application supports Session
scope variables.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24645 "><p>sessionTimeout</p>
</td>
<td valign="top" width="NaN%" headers="d17e24648 "><p>Administrator Value</p>
</td>
<td valign="top" width="NaN%" headers="d17e24651 "><p>Life span, as a real number of days, of
the user session, including all Session variables. Use the <samp class="codeph">createTimeSpan</samp> function
to generate this variable.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24645 "><p>setClientCookies</p>
</td>
<td valign="top" width="NaN%" headers="d17e24648 "><p>True</p>
</td>
<td valign="top" width="NaN%" headers="d17e24651 "><p>Whether to send CFID and CFTOKEN cookies
to the client browser.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24645 "><p>setDomainCookies</p>
</td>
<td valign="top" width="NaN%" headers="d17e24648 "><p>False</p>
</td>
<td valign="top" width="NaN%" headers="d17e24651 "><p>Whether to use domain cookies for the CFID
and CFTOKEN values used for client identification, and for Client
scope variables stored using cookies. If False, ColdFusion uses
host-specific cookies. Set to True for applications running on clusters.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>The following example code from the top of an Application.cfc
sets the application name and properties:</p>
<pre>&lt;cfcomponent&gt; 
&lt;cfset This.name = "TestApplication"&gt; 
&lt;cfset This.clientmanagement="True"&gt; 
&lt;cfset This.loginstorage="Session"&gt; 
&lt;cfset This.sessionmanagement="True"&gt; 
&lt;cfset This.sessiontimeout="#createtimespan(0,0,10,0)#"&gt; 
&lt;cfset This.applicationtimeout="#createtimespan(5,0,0,0)#"&gt;</pre>
<p>For more information on these settings, see <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d69.html" target="_self">cfapplication</a></samp> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div></div><div id="WS578211FA-6D50-4e46-8F69-EB7B08AEA7E4" class="nochunk"><a name="WS578211FA-6D50-4e46-8F69-EB7B08AEA7E4"><!-- --></a><h3 class="topictitle3">Setting page processing options</h3><div><p>The <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d68.html" target="_self">cfsetting</a></samp> tag lets you specify
the following page processing attributes to apply to all pages in
your application:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e24782"><p>Attribute</p>
</th>
<th valign="top" width="NaN%" id="d17e24785"><p>Use</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e24782 "><p>showDebugOutput</p>
</td>
<td valign="top" width="NaN%" headers="d17e24785 "><p>Specifies whether to show debugging output.
This setting cannot enable debugging if it is disabled in the ColdFusion
Administrator. However, this option ensures that debugging output
is not displayed, even if the Administrator enables it.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24782 "><p>requestTimeout</p>
</td>
<td valign="top" width="NaN%" headers="d17e24785 "><p>Specifies the page request time-out. If
ColdFusion cannot complete processing a page within the time-out
period, it generates an error. This setting overrides the setting
in the ColdFusion Administrator. Use this setting to increase the
page time-out if your application or page frequently accesses external
resources that are slow, such as external LDAP servers or web services
providers.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24782 "><p>enableCFOutputOnly</p>
</td>
<td valign="top" width="NaN%" headers="d17e24785 "><p>Disables output of text that is not included
inside <samp class="codeph">cfoutput</samp> tags. This setting helps ensure
that extraneous text in your ColdFusion pages does not get displayed.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>Often, you use the <samp class="codeph">cfsetting</samp> tag on individual
pages, but you can also use it in your Application.cfc file. For
example, using it in multi-application environment to override the
ColdFusion Administrator settings in one application.</p>
<p>You can place an application-wide <samp class="codeph">cfsetting</samp> tag
in the component initialization code, normally following the This
scope application property settings, as the following example shows:</p>
<pre>&lt;cfcomponent&gt; 
&lt;cfscript&gt; 
    This.name="MyAppl"; 
    This.clientmanagement="True"; 
    This.loginstorage="Session" ; 
    This.sessionmanagement="True" ; 
    This.sessiontimeout=CreateTimeSpan(0,0,1,0); 
&lt;/cfscript&gt; 
&lt;cfsetting showdebugoutput="No" enablecfoutputonly="No"&gt;</pre>
<p>The <samp class="codeph">cfsetting</samp> tag in this example affects all
pages in an application. You can override the application-wide settings
in the event methods, such as <samp class="codeph">onRequestStart</samp>, or
on individual ColdFusion pages.</p>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec0b63c-7ff8" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec0b63c-7ff8"><!-- --></a><h2 class="topictitle2">Using application event handlers</h2><div><p>The
following table describes the application event CFC methods that
you can implement, including when they are triggered. </p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e24847"><p>Method</p>
</th>
<th valign="top" width="NaN%" id="d17e24850"><p>When run</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e24847 "><p><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d48.html" target="_self">onApplicationStart</a></p>
</td>
<td valign="top" width="NaN%" headers="d17e24850 "><p>The application first starts: when the first
request for a page is processed or the first CFC method is invoked
by an event gateway instance, Flash Remoting request, or a web service
invocation. </p>
<p>This
method is useful for setting application-wide (Application scope)
variables, such as the names of data sources.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24847 "><p><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d47.html" target="_self">onApplicationEnd</a></p>
</td>
<td valign="top" width="NaN%" headers="d17e24850 "><p>The
application ends: when the application times out or the server shuts
down.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24847 "><p><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d4b.html" target="_self">onSessionStart</a></p>
</td>
<td valign="top" width="NaN%" headers="d17e24850 "><p>A new session is created as a result
of a request that is not in an existing session, including ColdFusion
event gateway sessions. The application must enable sessions for
this event to happen. </p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24847 "><p><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d40.html" target="_self">onSessionEnd</a></p>
</td>
<td valign="top" width="NaN%" headers="d17e24850 "><p>A
session time-out setting is reached. This event is <strong>not</strong> triggered
when the application ends or the server shuts down.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24847 "><p><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d41.html" target="_self">onRequestStart</a></p>
</td>
<td valign="top" width="NaN%" headers="d17e24850 "><p>ColdFusion receives any of the following:
a request, an HTTP request (for example, from a browser), a message
to an event gateway, a SOAP request, or a Flash Remoting request.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24847 "><p><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d43.html" target="_self">onRequest</a></p>
</td>
<td valign="top" width="NaN%" headers="d17e24850 "><p>The <samp class="codeph">onRequestStart</samp> event
has completed. This method acts as a filter for the requested page content.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24847 "><p><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d42.html" target="_self">onRequestEnd</a></p>
</td>
<td valign="top" width="NaN%" headers="d17e24850 "><p>All
pages and CFCs in the request have been processed: equivalent to
the OnRequestEnd.cfm page.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24847 "><p><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d2a.html" target="_self">onMissingTemplate</a></p>
</td>
<td valign="top" width="NaN%" headers="d17e24850 "><p>When ColdFusion receives a request for a
nonexistent page.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e24847 "><p><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d4a.html" target="_self">onError</a></p>
</td>
<td valign="top" width="NaN%" headers="d17e24850 "><p>When
an exception occurs that is not caught by a try/catch block.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>When
ColdFusion receives a request, it instantiates the Application CFC
and runs the Application.cfc code in the following order:</p>
<ul><li><p>CFC initialization code at the top of the file</p>
</li>
<li><p><samp class="codeph">onApplicationStart</samp>, if not run before for
this application</p>
</li>
<li><p><samp class="codeph">onSessionStart</samp>, if not run before for this
session</p>
</li>
<li><p><samp class="codeph">onRequestStart</samp></p>
</li>
<li><p><samp class="codeph">onRequest</samp>, or the requested page if there
is no onRequest method</p>
</li>
<li><p><samp class="codeph">onRequestEnd</samp></p>
</li>
</ul>
<p>The following methods are triggered by specific events:</p>
<ul><li><p><samp class="codeph">onApplicationEnd</samp></p>
</li>
<li><p><samp class="codeph">onSessionEnd</samp></p>
</li>
<li><p><samp class="codeph">onMissingTemplate</samp></p>
</li>
<li><p><samp class="codeph">onError</samp></p>
</li>
</ul>
<p>The <samp class="codeph">onApplicationEnd</samp> and <samp class="codeph">onSessionEnd</samp> methods
do not execute in the context of a page request, so they cannot
access request variables or display information to the user. The <samp class="codeph">onMissingTemplate</samp> method
is triggered when a URL specifies a CFML page that does not exist.
The <samp class="codeph">OnError</samp> method does not always execute in the
context of a request; use its <samp class="codeph">Event</samp> argument to
determine the context.</p>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec22c24-6053" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-6053"><!-- --></a><h2 class="topictitle2">Managing the application with Application.cfc</h2><div><p>Use the <samp class="codeph">onApplicationStart</samp> and <samp class="codeph">onApplicationEnd</samp> methods
to configure and manage the application; that is, to control resources
that are used by multiple pages and requests and must be consistently
available to all code in your application. Such resources include
data sources, application counters such as page hit variables, or
style information for all pages.</p>
<p>The <samp class="codeph">onApplicationStart</samp> method executes when
ColdFusion gets the first request for a page in the application
after the server starts. The <samp class="codeph">onApplicationEnd</samp> method
executes when the application server shuts down or if the application
is inactive for the application time-out period.</p>
<p>The following are some of the ways you use these methods. For
more information, see entries for <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d48.html" target="_self">onApplicationStart</a> and <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d47.html" target="_self">onApplicationEnd</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div><div id="WSA8E0748B-3A5A-4f60-97E4-85601A06A695" class="nochunk"><a name="WSA8E0748B-3A5A-4f60-97E4-85601A06A695"><!-- --></a><h3 class="topictitle3">Defining application utility functions</h3><div><p>Functions that you define in Application.cfc
and do not place in a shared scope are, by default, available only
to other methods in the CFC. </p>
<p>If your Application.cfc implements the <samp class="codeph">onRequest</samp> method,
any utility functions that you define in Application.cfc are also
directly available in to the target page, because Application.cfc
and the target page share the Variables scope.</p>
<p>If
your application requires utility functions that are used by multiple
pages, not just by the methods in Application.cfc, and you do not
use an <samp class="codeph">onRequest</samp> method, Adobe recommends that
you place them in a separate CFC and access them by running that
CFC. As with other ColdFusion pages, Application.cfc can access
any CFC in a directory path that is configured on the ColdFusion
Administrator Mappings page. Therefore, use this technique to share
utility functions across applications.</p>
<p>If your Application.cfc defines utility functions that you want
available on request pages and does not use an <samp class="codeph">onRequest</samp> method,
explicitly place the functions in a ColdFusion scope, such as the
Request scope, as the following code shows:</p>
<pre>&lt;cffunction name="theFunctionName" returntype="theReturnType"&gt; 
    <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">&lt;!--- Function definition goes here. ---&gt;</i> 
&lt;/cffunction&gt; 
 
&lt;cffunction name="OnRequestStart"&gt; 
    <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">&lt;!--- OnRequestStart body goes here ---&gt;</i> 
        &lt;cfset Request.theFunctionName=This.theFunctionName&gt; 
&lt;/cffunction&gt;</pre>
<p>On the request page, you would include the following code:</p>
<pre>&lt;cfset myVar=Request.theFunctionName(Argument1...)&gt;</pre>
<p>Functions that you define in this manner share the This scope
and Variables scope with the Application.cfc file for the request.</p>
</div></div><div id="WS6B589054-1E47-45e3-99F0-BAD7FFDF0E92" class="nochunk"><a name="WS6B589054-1E47-45e3-99F0-BAD7FFDF0E92"><!-- --></a><h3 class="topictitle3">Setting application default variables and constants in onApplicationStart</h3><div><p>You
can set default variables and application-level constants in Application.cfc. For
example, you can do the following:</p>
<ul><li><p>Specify a data source and ensure that it is available</p>
</li>
<li><p>Specify domain name</p>
</li>
<li><p>Set styles, such as fonts or colors</p>
</li>
<li><p>Set other application-level variables</p>
</li>
</ul>
<p>You
do not have to lock Application scope variables when you set them
in the Application.cfc <samp class="codeph">onApplicationStart</samp> method.</p>
<p>For details on implementing the <samp class="codeph">onApplicationStart</samp> method,
see <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d48.html" target="_self">onApplicationStart</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div></div><div id="WSAF989AD4-912A-4727-B7BF-19CF200E1538" class="nochunk"><a name="WSAF989AD4-912A-4727-B7BF-19CF200E1538"><!-- --></a><h3 class="topictitle3">Using the onApplicationEnd method</h3><div><p>Use
the <samp class="codeph">onApplicationEnd</samp> method for any clean-up activities
that your application requires when it shuts down, such as saving
data in memory to a database, or to log the application end. You
cannot use this method to display data on a user page, because it
is not associated with any request. The application ends, even if
this method throws an exception. An application that is used often
is unlikely to execute this method, except when the server is shut
down. </p>
<p>For details on implementing the <samp class="codeph">onApplicationEnd</samp> method,
see <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d47.html" target="_self">onApplicationEnd</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec22c24-604c" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-604c"><!-- --></a><h2 class="topictitle2">Managing sessions in Application.cfc</h2><div><p>Use the <samp class="codeph">onSessionStart</samp> and <samp class="codeph">onSessionEnd</samp> methods
to configure and manage user sessions; that is, to control resources
that are used by multiple pages while a user is accessing your site
from during a single browser session. The session begins when a
user first requests a page in your application, and ends when the
session times out. For more information on Session scope and Session variables,
see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7fd4.html">Using Persistent Data and Locking</a>.</p>
<p>Session resources include variables that store data that is needed
throughout the session, such as account numbers, shopping cart contents,
or CFCs that contain methods and data that are used by multiple
pages in a session.</p>
<div class="note"><span class="notetitle">Note:  </span>Do not include the <samp class="codeph">cflogin</samp> tag
or basic login processing in the onSessionStart method, as the code
executes only at the start of the session; it cannot handle user
logout, and cannot fully ensure security.</div>
</div><div id="WSB9D75989-B159-4c24-887A-2A3456CA5678" class="nochunk"><a name="WSB9D75989-B159-4c24-887A-2A3456CA5678"><!-- --></a><h3 class="topictitle3">Using the onSessionStart method</h3><div><p>This method is useful for initializing
session data, such as user settings or shopping cart contents, or
for tracking the number of active sessions. You do not need to lock
the Session scope when you set session variables in this method.</p>
<p>For more information, see the <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d4b.html" target="_self">onSessionStart</a> entry in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div></div><div id="WS98B4E431-4CEA-49f7-8EAF-701CF8875997" class="nochunk"><a name="WS98B4E431-4CEA-49f7-8EAF-701CF8875997"><!-- --></a><h3 class="topictitle3">Using the onSessionEnd method</h3><div><p>Use
this method for any clean-up activities when the session ends. (For
information on ending sessions, see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7d2d.html">Ending a session</a>.) For example, you can save session-related data,
such as shopping cart contents or information about whether the
user has not completed an order, in a database, or you can log the end
of the session to a file. You cannot use this method to display
data on a user page, because it is not associated with a request.</p>
<div class="note"><span class="notetitle">Note:  </span>Sessions do not end, and the <samp class="codeph">onSessionEnd</samp> method
is not called when an application ends. For more information, see
the <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d40.html" target="_self">onSessionEnd</a> entry in the CFML Reference.</div>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec22c24-7d38" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7d38"><!-- --></a><h2 class="topictitle2">Managing requests in Application.cfc</h2><div><p>ColdFusion provides three methods
for managing requests: <samp class="codeph">onRequestStart</samp>, <samp class="codeph">onRequest</samp>,
and <samp class="codeph">onRequestEnd</samp>. ColdFusion processes requests,
including these methods, as follows:</p>
<ol><li><p>ColdFusion always processes <samp class="codeph">onRequestStart</samp> at
the start of the request.</p>
</li>
<li><p>If you implement an <samp class="codeph">onRequest</samp> method, ColdFusion
processes it; otherwise, it processes the requested page. If you
implement an <samp class="codeph">onRequest</samp> method, explicitly call
the requested page in your <samp class="codeph">onRequest</samp> method.</p>
</li>
<li><p>ColdFusion always processes <samp class="codeph">onRequestEnd</samp> at
the end of the request.</p>
</li>
</ol>
<p>You can use each of the Application.cfc request methods to manage
requests as follows:</p>
</div><div id="WS42FECA7E-1979-45b9-8083-03C8B90012A7" class="nochunk"><a name="WS42FECA7E-1979-45b9-8083-03C8B90012A7"><!-- --></a><h3 class="topictitle3">Using the onRequestStart method</h3><div><p>This method runs at the beginning of the request. It is
useful for user authorization (login handling), and for request-specific
variable initialization, such as gathering performance statistics.</p>
<p>If
you use the <samp class="codeph">onRequestStart</samp> method and do not use
the <samp class="codeph">onRequest</samp> method, ColdFusion automatically
processes the request when it finishes processing the <samp class="codeph">onRequestStart</samp> code.</p>
<div class="note"><span class="notetitle">Note:  </span>If you do not include an <samp class="codeph">onRequest</samp> method
in Application.cfm file, the <samp class="codeph">onRequestStart</samp> method
does not share a Variables scope with the requested page, but it
does share Request scope variables.</div>
<p>For more information, see the entry for <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d41.html" target="_self">onRequestStart</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i></p>
</div></div><div id="WSABC8CA48-77E3-440f-8683-EADF50C75D6B" class="nochunk"><a name="WSABC8CA48-77E3-440f-8683-EADF50C75D6B"><!-- --></a><h3 class="topictitle3">User authentication</h3><div><p>When
an application requires a user to log in, include the authentication
code, including the <samp class="codeph">cflogin</samp> tag or code that calls
this tag, in the <samp class="codeph">onRequestStart</samp> method. Doing so
ensures that the user is authenticated at the start of each request.
For detailed information on security and creating logins, see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7e34.html">Securing Applications</a> For
an example that uses authentication code generated by the Adobe
Dreamweaver CF Login Wizard, see <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d41.html" target="_self">onRequestStart</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>. </p>
</div></div><div id="WSA2E4EEFC-CC6F-416a-92E3-FD1D829C15BD" class="nochunk"><a name="WSA2E4EEFC-CC6F-416a-92E3-FD1D829C15BD"><!-- --></a><h3 class="topictitle3">Using the onRequest method</h3><div><p>The <samp class="codeph">onRequest</samp> method
differs from the <samp class="codeph">onRequestStart</samp> method in one major
way: the <samp class="codeph">onRequest</samp> method intercepts the user’s
request. This difference has two implications:</p>
<ul><li><p>ColdFusion does not process the request unless you explicitly
call it, for example, by using a <samp class="codeph">cfinclude</samp> tag.
This behavior lets you use the <samp class="codeph">onRequest</samp> method
to filter requested page content or to implement a switch that determines
the pages or page contents to be displayed.</p>
</li>
<li><p>When
you use <samp class="codeph">cfinclude</samp> to process request, the CFC instance
shares the Variables scope with the requested page. As a result,
any method in the CFC that executes can set the page’s Variables
scope variables, and the <samp class="codeph">onRequestEnd</samp> method can
access any Variable scope values that the included page has set
or changed. Therefore, for example, the <samp class="codeph">onRequestStart</samp> or <samp class="codeph">onRequest</samp> method
set variables that are used on the page.</p>
</li>
</ul>
<p>To use this method as a filter, place the <samp class="codeph">cfinclude</samp> tag
inside a <samp class="codeph">cfsavecontent</samp> tag, as the following example
shows:</p>
<pre>&lt;cffunction name="onRequest"&gt; 
    &lt;cfargument name = "targetPage" type="String" required=true/&gt; 
    &lt;cfsavecontent variable="content"&gt; 
        &lt;cfinclude template=#Arguments.targetPage#&gt; 
    &lt;/cfsavecontent&gt; 
    &lt;cfoutput&gt; 
        #replace(content, "report", "MyCompany Quarterly Report", "all")# 
    &lt;/cfoutput&gt; 
&lt;/cffunction&gt;</pre>
<p>For more information, see the entry for <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d43.html" target="_self">onRequest</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i></p>
</div></div><div id="WSB4447109-DC21-45f3-B557-DD43CA1978C0" class="nochunk"><a name="WSB4447109-DC21-45f3-B557-DD43CA1978C0"><!-- --></a><h3 class="topictitle3">Using the onRequestEnd method</h3><div><p>You
use the <samp class="codeph">onRequestEnd</samp> method for code that should
run at the end of each request. (In ColdFusion versions through
ColdFusion MX 6.1, you would use the OnRequestEnd.cfm page for such
code). Typical uses include displaying dynamic footer pages. For
an example, see <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d40.html" target="_self">onSessionEnd</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
<div class="note"><span class="notetitle">Note:  </span>If you do not include an <samp class="codeph">onRequest</samp> method
in Application.cfm file, the <samp class="codeph">onRequestEnd</samp> method
does not share a Variables scope with the requested page, but it
does share Request scope variables.</div>
<p>For more information, see the entry for <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d42.html" target="_self">onRequestEnd</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec22c24-7cce" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7cce"><!-- --></a><h2 class="topictitle2">Handling errors in Application.cfc</h2><div><p>The following sections briefly
describe how you to handle errors in Application.cfc. For more information
on error pages and error handling, see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7fc4.html">Handling Errors</a> For
details on implementing the <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d4a.html" target="_self">onError</a> method, see <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d4a.html" target="_self">onError</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div><div id="WSA5F59864-2233-4ed3-80B8-A0917E162684" class="nochunk"><a name="WSA5F59864-2233-4ed3-80B8-A0917E162684"><!-- --></a><h3 class="topictitle3">Application.cfc error handling techniques</h3><div><p>Application.cfc
handles errors in any combination of the following ways:</p>
<ul><li><p>Use try/catch error handling in the event methods, such
as <samp class="codeph">onApplicationStart</samp> or <samp class="codeph">onRequestStart</samp>,
to handle exceptions that happen in the event methods.</p>
</li>
<li><p>Implement the <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d4a.html" target="_self">onError</a> method. This method receives
all exceptions that are not directly handled by try/catch handlers
in CFML code. The method can use the <samp class="codeph">cfthrow</samp> tag
to pass any errors it does not handle to ColdFusion for handling.</p>
</li>
<li><p>Use <samp class="codeph">cferror</samp> tags in the application initialization
code following the <samp class="codeph">cfcomponent</samp> tag, typically following
the code that sets the application’s This scope variables. These
tags specify error processing if you do not implement an <samp class="codeph">onError</samp> method,
or if the <samp class="codeph">onError</samp> method throws an error. You could
implement an application-specific validation error handler, for example,
by placing the following tag in the CFC initialization code:</p>
<pre>&lt;cferror type="VALIDATION" template="validationerrorhandler.cfm"&gt;</pre>
</li>
<li><p>The ColdFusion default error mechanisms handle any errors
that are not handled by the preceding techniques. These mechanisms
include the site-wide error handler that you specify in the ColdFusion
Administrator and the built-in default error pages.</p>
</li>
</ul>
<p>These techniques let you include application-specific information,
such as contact information or application or version identifiers,
in the error message, and let you display all error messages in
the application in a consistent manner. You use Application.cfc
to develop sophisticated application-wide error-handling techniques,
including error-handling methods that provide specific messages,
or use structured error-handling techniques.</p>
<div class="note"><span class="notetitle">Note:  </span>The <samp class="codeph">onError</samp> method catches
errors that occur in the <samp class="codeph">onSessionEnd</samp> and <samp class="codeph">onApplicationEnd</samp> application
event methods. It does not display messages to the user, however,
because there is no request context. The <samp class="codeph">onError</samp> function
logs errors that occur when the session or application ends.</div>
</div></div><div id="WS311D0E54-CA8A-45e9-8242-7A6B43689EE1" class="nochunk"><a name="WS311D0E54-CA8A-45e9-8242-7A6B43689EE1"><!-- --></a><h3 class="topictitle3">Handling server-side validation errors in the onError method</h3><div><p>Server-side
validation errors are actually ColdFusion exceptions; as a result,
if your application uses an <samp class="codeph">onError</samp> method, this
method gets the error and must handle it or pass it on to ColdFusion
for handling.</p>
<p>To identify a server-side validation error, search the Arguments.<i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">Exception</i>.StackTrace
field for coldfusion.filter.FormValidationException. You can then
handle the error directly in your <samp class="codeph">onError</samp> routine,
or throw the error so that either the ColdFusion default validation
error page or a page specified by an <samp class="codeph">cferror</samp> tag in
your Application.cfc initialization code handles it.</p>
</div></div><div id="WSACE08705-7036-43f9-BA79-44A2ECC69E43" class="nochunk"><a name="WSACE08705-7036-43f9-BA79-44A2ECC69E43"><!-- --></a><h3 class="topictitle3">Example: error Handling with the onError method</h3><div><p>The following Application.cfc file has an <samp class="codeph">onError</samp> method
that handles errors as follows:</p>
<ul><li><p>If the error is a server-side validation
error, the <samp class="codeph">onError</samp> method throws the error for
handling by ColdFusion, which displays its standard validation error message.</p>
</li>
<li><p>For any other type of exception, the <samp class="codeph">onError</samp> method
displays the name of the event method in which the error occurred
and dumps the exception information. In this example, because you
generate errors on the CFM page only, and not in a Application.cfc
method, the event name is always the empty string.</p>
</li>
</ul>
<pre>&lt;cfcomponent&gt; 
&lt;cfset This.name = "BugTestApplication"&gt; 
&lt;cffunction name="onError"&gt; 
    &lt;!--- The onError method gets two arguments: 
            An exception structure, which is identical to a cfcatch variable. 
            The name of the Application.cfc method, if any, in which the error 
            happened. 
    &lt;cfargument name="Except" required=true/&gt; 
    &lt;cfargument type="String" name = "EventName" required=true/&gt; 
    &lt;!--- Log all errors in an application-specific log file. ---&gt; 
    &lt;cflog file="#This.Name#" type="error" text="Event Name: #Eventname#" &gt; 
    &lt;cflog file="#This.Name#" type="error" text="Message: #except.message#"&gt; 
    &lt;!--- Throw validation errors to ColdFusion for handling. ---&gt; 
    &lt;cfif Find("coldfusion.filter.FormValidationException", 
                     Arguments.Except.StackTrace)&gt; 
        &lt;cfthrow object="#except#"&gt; 
    &lt;cfelse&gt; 
        &lt;!--- You can replace this cfoutput tag with application-specific  
                error-handling code. ---&gt; 
        &lt;cfoutput&gt; 
            &lt;p&gt;Error Event: #EventName#&lt;/p&gt; 
            &lt;p&gt;Error details:&lt;br&gt; 
            &lt;cfdump var=#except#&gt;&lt;/p&gt; 
        &lt;/cfoutput&gt; 
    &lt;/cfif&gt; 
&lt;/cffunction&gt; 
&lt;/cfcomponent&gt;</pre>
<p>To test this example, place a CFML page with the following code
in the same page as the Application.cfc file, and enter valid and
invalid text in the text input field.</p>
<pre>&lt;cfform&gt; 
    This box does Integer validation:  
    &lt;cfinput name="intinput" type="Text" validate="integer" validateat="onServer"&gt;&lt;br&gt; 
    Check this box to throw an error on the action page: 
    &lt;cfinput type="Checkbox" name="throwerror"&gt;&lt;br&gt; 
    &lt;cfinput type="submit" name="submitit"&gt; 
    &lt;/cfform&gt; 
&lt;cfif IsDefined("form.fieldnames")&gt; 
    &lt;cfif IsDefined("form.throwerror")&gt; 
        &lt;cfthrow type="ThrownError" message="This error was thrown from the bugTest action page."&gt; 
    &lt;cfelseif form.intinput NEQ ""&gt; 
        &lt;h3&gt;You entered the following valid data in the field&lt;/h3&gt; 
        &lt;cfoutput&gt;#form.intinput#&lt;/cfoutput&gt; 
    &lt;/cfif&gt; 
&lt;/cfif&gt;</pre>
<div class="note"><span class="notetitle">Note:  </span>For more information on server-side validation
errors, see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7fb8.html">Validating Data</a>.</div>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec0b63c-7ff1" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec0b63c-7ff1"><!-- --></a><h2 class="topictitle2">Example: a complete Application.cfc</h2><div><p>The following example is a simplified
Application.cfc file that illustrates the basic use of all application
event handlers:</p>
<pre>&lt;cfcomponent&gt; 
&lt;cfset This.name = "TestApplication"&gt; 
&lt;cfset This.Sessionmanagement=true&gt; 
&lt;cfset This.Sessiontimeout="#createtimespan(0,0,10,0)#"&gt; 
&lt;cfset This.applicationtimeout="#createtimespan(5,0,0,0)#"&gt; 
 
&lt;cffunction name="onApplicationStart"&gt; 
    &lt;cftry&gt; 
        &lt;!--- Test whether the DB that this application uses is accessible  
                by selecting some data. ---&gt; 
        &lt;cfquery name="testDB" dataSource="cfdocexamples" maxrows="2"&gt; 
            SELECT Emp_ID FROM employee 
        &lt;/cfquery&gt; 
        &lt;!--- If we get database error, report it to the user, log the error 
            information, and do not start the application. ---&gt; 
        &lt;cfcatch type="database"&gt; 
            &lt;cfoutput&gt; 
                This application encountered an error.&lt;br&gt; 
                Please contact support. 
            &lt;/cfoutput&gt; 
            &lt;cflog file="#This.Name#" type="error"  
                text="cfdocexamples DB not available. message: #cfcatch.message#  
                Detail: #cfcatch.detail# Native Error: #cfcatch.NativeErrorCode#"&gt; 
            &lt;cfreturn False&gt; 
        &lt;/cfcatch&gt; 
    &lt;/cftry&gt; 
    &lt;cflog file="#This.Name#" type="Information" text="Application Started"&gt; 
    &lt;!--- You do not have to lock code in the onApplicationStart method that sets Application scope variables. ---&gt; 
    &lt;cfscript&gt; 
        Application.availableResources=0; 
        Application.counter1=1; 
        Application.sessions=0; 
    &lt;/cfscript&gt; 
    &lt;!--- You do not need to return True if you don't set the cffunction returntype attribute. ---&gt; 
    &lt;/cffunction&gt; 
 
&lt;cffunction name="onApplicationEnd"&gt; 
    &lt;cfargument name="ApplicationScope" required=true/&gt; 
    &lt;cflog file="#This.Name#" type="Information"  
        text="Application #ApplicationScope.applicationname# Ended"&gt; 
&lt;/cffunction&gt; 
 
 
&lt;cffunction name="onRequestStart"&gt;  
    &lt;!--- Authentication code, generated by the Dreamweaver Login Wizard, 
        makes sure that a user is logged in, and if not displays a login page. ---&gt; 
    &lt;cfinclude template="mm_wizard_application_include.cfm"&gt;  
&lt;!--- If it's time for maintenance, tell users to come back later. ---&gt; 
    &lt;cfscript&gt; 
        if ((Hour(now()) gt 1) and (Hour(now()) lt 3)) { 
            WriteOutput("The system is undergoing periodic maintenance.  
                Please return after 3:00 AM Eastern time."); 
            return false; 
        } else { 
            this.start=now(); 
        } 
    &lt;/cfscript&gt; 
&lt;/cffunction&gt; 
 
&lt;cffunction name="onRequest"&gt; 
    &lt;cfargument name = "targetPage" type="String" required=true/&gt; 
    &lt;cfsavecontent variable="content"&gt; 
        &lt;cfinclude template=#Arguments.targetPage#&gt; 
    &lt;/cfsavecontent&gt; 
    &lt;!--- This is a minimal example of an onRequest filter. ---&gt; 
    &lt;cfoutput&gt; 
        #replace(content, "report", "MyCompany Quarterly Report", "all")# 
    &lt;/cfoutput&gt; 
&lt;/cffunction&gt; 
 
&lt;!--- Display a different footer for logged in users than for guest users or 
         users who have not logged in. ---&gt; 
 
&lt;cffunction name="onRequestEnd"&gt; 
    &lt;cfargument type="String" name = "targetTemplate" required=true/&gt; 
    &lt;cfset theAuthuser=getauthuser()&gt; 
    &lt;cfif ((theAuthUser EQ "guest") OR (theAuthUser EQ ""))&gt; 
        &lt;cfinclude template="noauthuserfooter.cfm"&gt; 
    &lt;cfelse&gt; 
        &lt;cfinclude template="authuserfooter.cfm"&gt; 
    &lt;/cfif&gt;  
&lt;/cffunction&gt; 
 
&lt;cffunction name="onSessionStart"&gt; 
    &lt;cfscript&gt; 
        Session.started = now(); 
        Session.shoppingCart = StructNew(); 
        Session.shoppingCart.items =0; 
    &lt;/cfscript&gt; 
    &lt;cflock timeout="5" throwontimeout="No" type="EXCLUSIVE" scope="SESSION"&gt; 
        &lt;cfset Application.sessions = Application.sessions + 1&gt; 
    &lt;/cflock&gt; 
    &lt;cflog file="#This.Name#" type="Information" text="Session: 
        #Session.sessionid# started"&gt; 
&lt;/cffunction&gt; 
 
&lt;cffunction name="onSessionEnd"&gt; 
    &lt;cfargument name = "SessionScope" required=true/&gt; 
    &lt;cflog file="#This.Name#" type="Information" text="Session: 
            #arguments.SessionScope.sessionid# ended"&gt; 
&lt;/cffunction&gt; 
 
&lt;cffunction name="onError"&gt; 
    &lt;cfargument name="Exception" required=true/&gt; 
    &lt;cfargument type="String" name = "EventName" required=true/&gt; 
    &lt;!--- Log all errors. ---&gt; 
    &lt;cflog file="#This.Name#" type="error" text="Event Name: #Eventname#"&gt; 
    &lt;cflog file="#This.Name#" type="error" text="Message: #exception.message#"&gt; 
    &lt;!--- Some exceptions, including server-side validation errors, do not 
             generate a rootcause structure. ---&gt; 
    &lt;cfif isdefined("exception.rootcause")&gt; 
        &lt;cflog file="#This.Name#" type="error"  
            text="Root Cause Message: #exception.rootcause.message#"&gt; 
    &lt;/cfif&gt;     
    &lt;!--- Display an error message if there is a page context. ---&gt; 
    &lt;cfif NOT (Arguments.EventName IS onSessionEnd) OR  
            (Arguments.EventName IS onApplicationEnd)&gt; 
        &lt;cfoutput&gt; 
            &lt;h2&gt;An unexpected error occurred.&lt;/h2&gt; 
            &lt;p&gt;Please provide the following information to technical support:&lt;/p&gt; 
            &lt;p&gt;Error Event: #EventName#&lt;/p&gt; 
            &lt;p&gt;Error details:&lt;br&gt; 
            &lt;cfdump var=#exception#&gt;&lt;/p&gt; 
        &lt;/cfoutput&gt; 
    &lt;/cfif&gt; 
    &lt;/cffunction&gt; 
 
&lt;/cfcomponent&gt;</pre>
</div></div>


<!-- BEGIN USER PREFERENCES -->
          <div id="userprefs">
          </div>
<!-- END USER PREFERENCES -->

          <div id="related">
            
            
            <div class="separator"><a href="#top"><img src="images/BTT.jpg" /></a>&#160;</div>
          </div>
          <div id="footer">
<!-- BEGIN IONCOMMENTS -->
            <div id="ionComHere">
            </div>
<!-- END IONCOMMENTS -->


            <p id="creativecommons"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text"><img id="creativecommons_img" src="images/CC.png" alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" /></a>&nbsp;Twitter™ and Facebook posts are not covered under the terms of Creative Commons.</p>
          </div>
</td>
<td width="10px"></td>
<td id="inner_rightcolumn">

</td></tr></table>
      </div>
<!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-7d6f.html" title="Structuring an application"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec0b63c-7ffa.html" title="Migrating from Application.cfm to Application.cfc"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WS8f0cc78011fffa71-ea0996f11cdae56045-8000.html"><b>Developing CFML Applications</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7e19.html"><b>Designing and Optimizing a ColdFusion Application</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
<!-- END CONTENT WRAPPER -->

</td>
<td id="col3">
    <div>
        <img src="images/adobe-lq.png" />
    </div>
</td>
</tr>
</table>
    </div>
<!-- END PAGE CONTENT WRAPPER -->
<script type="text/javascript">
<!--[CDATA[
scrollToNameAnchor();
// ]]-->
</script> 
<!--
    Description:
    This file generates the link to product support in the top right corner
-->

<style>
#menutop{
    position:absolute;
    top:4px;
    right:24px;
    width:auto;    
    font-size:11px;
    color:#fff;
    text-align:right;
}
#menutop a{
    color:#fff;
}
#menutop a:hover{
        text-decoration:underline;
}
</style>  
  
  
  
  
<div id="productmenu">
<!--googleoff: index-->
  <div id="menutop">


<script language=javascript type='text/javascript'>
    // darken menu text for products with light backgrounds
    var path = document.location.href.toLowerCase();
    if (path.indexOf("/acrobat/")           	> 0 ||
        path.indexOf("/acrobat.com/")       	> 0 ||
        path.indexOf("/acrobatConnectPro/") 	> 0 ||
        path.indexOf("/connect/")           	> 0 ||
        path.indexOf("/livecycledataserviceses/") > 0 ||
        path.indexOf("/muse/")         	> 0 ||
	path.indexOf("/presenter/")         	> 0 ||
        path.indexOf("/scene7/")            	> 0 ||
        path.indexOf("/flashmediaserver/")  	> 0 ||
        path.indexOf("/wave/")              	> 0 )
    {
        document.write('<style>#menutop a{color:#505050}</style>');
    }
    if (typeof('terms_AHV_PRODUCT_SUPPORT') != "undefined" && ! use_robohelp_behavior ){      
        if (path.indexOf("/muse/") > -1 ){
            var supportlink = '<a href="http://muse.adobe.com/support.html">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }else{
            var supportlink = '<a href="http://adobe.com/support">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }
        document.write( supportlink );
     }

</script> 

  </div>
<!--googleon: index-->
</div>



<style>
#online-privacy-policy{ 
    margin:10px 40px; 
    font-size:11px;
}
</style>

<p id="online-privacy-policy">
<script language="javascript">
var pageLoc = "en_US";
var metaElements = document.all ?
document.all.tags('meta') :
document.getElementsByTagName ?
document.getElementsByTagName ('meta') : new Array();
for (var m = 0; m < metaElements.length; m++) {
	if (metaElements[m].name == "lang") {
		pageLoc = metaElements[m].content;
		break;
	}
}
var ptn = /(..)-(..)/;
if (ptn.test(pageLoc)) {
	var languageCode = pageLoc.replace(ptn, "$1");
	var countryCode = pageLoc.replace(ptn, "$2");
	pageLoc = languageCode + "_" + countryCode.toUpperCase();
}

var policyLoc = "en_US";
var policyText = "Online Privacy Policy";
var policyPath = "";
var policyArray=[
"da_DK", "Online fortrolighedserklæring",
"de_DE", "Online-Datenschutzrichtlinie",
"es_ES", "Política de confidencialidad en línea",
"fi_FI", "Yksityisyyttä koskeva Online-toimintaohjelma",
"fr_FR", "Confidentialité et sécurité",
"it_IT", "Informativa sulla privacy online",
"ja_JP", "プライバシーポリシー",
"ko_KR", "Adobe 온라인 개인정보 보호정책",
"pt_BR", "Política de Confidencialidade On-line", 
"zh_CN", "在线隐私政策",
"zh_TW", "線上隱私政策"
];
var legalLoc = "en_US";
var legalText = "Legal Notices";
var legalPath = legalLoc;
var legalArray=[
"ar_AE", "إشعارات قانونية",
"bg_BG", "Юридически бележки",
"cs_CZ", "Právní upozornění",
"da_DK", "Juridiske meddelelser",
"de_DE", "Rechtliche Hinweise",
"el_GR", "Σημειώσεις νομικού περιεχομένου",
"es_ES", "Avisos legales",
"et_EE", "Juriidilised teated",
"fi_FI", "Lakisääteiset ilmoitukset",
"fr_FR", "Mentions légales",
"he_IL", "הצהרות משפטיות",
"hr_HR", "Pravne napomene",
"hu_HU", "Jogi közlemények",
"it_IT", "Informazioni legali",
"ja_JP", "法律上の注意",
"ko_KR", "법적 고지 사항",
"lt_LT", "Teisinės pastabos",
"lv_LV", "Juridisks paziņojums",
"nb_NO", "Juridiske merknader",
"nl_NL", "Juridische kennisgevingen",
"pl_PL", "Informacje prawne",
"pt_BR", "Aspectos jurídicos",
"ro_RO", "Prevederi legale",
"ru_RU", "Юридическая информация",
"sk_SK", "Právne upozornenie",
"sl_SI", "Pravni pouk",
"sv_SE", "Upphovsrätt",
"tr_TR", "Yasal uyarılar",
"uk_UA", "Юридична інформація",
"zh_CN", "法律声明",
"zh_TW", "法律注意事項"
];

ruPolicy = "http://www.adobe.com/ru/misc/privacy.html";
trPolicy = "http://www.adobe.com/tr/misc/privacy.html";

// Bug 2846992: LOC: RUS, TUR: The link to "Online Privacy Policy" should include language, currently it is not appearing.
if (pageLoc == "ru_RU") {
	policyPath = "ru";
}
else if (pageLoc == "tr_TR") {
	policyPath = "tr";
}
for (var i = 0; i < policyArray.length; i+=2) {
	if (pageLoc == policyArray[i]) {
		policyLoc = pageLoc;
		policyText = policyArray[i+1];
		var ptn = /(..)_(..)/;
		if (ptn.test(policyLoc)) {
			var countryCode = policyLoc.replace(ptn, "$2");
			policyPath = countryCode.toLowerCase();
		}
		break;
	}
}

for (var i = 0; i < legalArray.length; i+=2) {
	if (pageLoc == legalArray[i]) {
		legalLoc = pageLoc;
		legalText = legalArray[i+1];
		legalPath = legalLoc;
		break;
	}
}
if(agt.indexOf("community help client") > -1 ){
	document.write('<a href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
}else{
	//Open the privacy policy in a new window
	document.write('<a target="_blank" href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a target="_blank" href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
} 
</script>
</p>



<!-- localfooter.ssi -->

<script type="text/javascript">
    var debug = (top.location.href.indexOf("debug=true") > -1);
</script>

<script language="javascript">
document.write('<scr'+'ipt ' +
               'src="/en_US/ssi/_pod.js" ' +
               'language="javascript" ' +
               'charset="UTF-8"> ' +
               '</scr'+'ipt>');
</script>


<script type="text/javascript">
//
//  Ethnio survey code
//
/*          DocumentID      EthnioID */
/*          -------------   -------- */
var ethnio=["/en_US/flash/cs/using/WSb03e830bd6f770ee6664507612436d7dede-8000.html", "87462",
            "/en_US/creativesuite/cs/using/WSe851854fd1e0856a-4b08a77612477f69f15-8000.html",  "10441",
            "/en_US/dreamweaver/cs/using/WSEE4C0148-A6F4-4bf5-9DEF-CE06AB026214a.html",  "57412"
 
    ];
                        
    for ( var i = 0; i < ethnio.length ; i = i+2 ){
        if ( document.location.href.indexOf( ethnio[i] ) > -1 ){ 
            var headID = document.getElementsByTagName("head")[0];         
            var ethnioScript = document.createElement('script');
            ethnioScript.type = 'text/javascript';
            ethnioScript.src = 'http://ethn.io/remotes/' + ethnio[i+1];        
            if ( debug ){
                alert ("Using Ethnio script: " + ethnioScript.src );
            }else{
                headID.appendChild(ethnioScript);
            }
        }
    }
</script>



<div style="display: none;">
<!-- SiteCatalyst -->
<script language="JavaScript" type="text/javascript"><!--
var s_code=' ';
var s_docHost = window.location.hostname.toLowerCase();
var s_docURL = window.location.pathname.toLowerCase();
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
if (s_docHost.indexOf(".corp.adobe") != -1 || s_docHost.indexOf("stage.") != -1 || s_docHost.indexOf(".dev.adobe") != -1 || s_docHost.indexOf("staging.") != -1) scJsHost="";
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/omniture_s_code.js' type='text/javascript'%3E%3C/script%3E"));
//--></script>
<script type="text/javascript"><!--
var s_accountName;
s_server="www.adobe.com static content pages";
if (!window.s_account) s_accountName="mxmacromedia";
else s_accountName=window.s_account;

if (window.s_docURL.indexOf("/designcenter/") != -1)
  s_channel="Adobe Design Center";	
else if ((window.s_docHost.indexOf("labs.adobe") != -1) ||
(window.s_docHost.indexOf("labs-staging.") != -1))
  s_channel="Labs";
else if (window.s_docHost.indexOf("help.adobe.com") != -1) {
  s_channel="Support Help.adobe.com";
  if (window.s_docURL.indexOf("/en_us/") == -1) {
    s_docURLArray=s_docURL.split('/');
    s_pageName="http://help.adobe.com/"+s_docURLArray[1]+"/"+ s_docURLArray[2]+"/"+s_docURLArray[3];
    s_prop23="http://help.adobe.com"+window.location.pathname;
  }
}
else if (window.s_docHost.indexOf("kb2.adobe.com") != -1) {
  s_channel="Support Knowledgebase";
  s_prop23="http://kb2.adobe.com"+s_docURL+":";
  if (typeof(omtrProductList) != 'undefined' && omtrProductList.length > 0)
 {
    s_prop23=s_prop23+omtrProductList;
  }
}
else if (window.s_docHost.indexOf("resellers.adobe.com") != -1) {
		var s_pageName=document.getElementsByTagName("title")[0].text;
}

if (!window.scMMInclude) {
	var s_wd=window,s_tm=new Date;
	if(s_code!=' '){
		s_code=s_dc(s_accountName);
		if(s_code)document.write(s_code)
	} 
} else {
	s_wds(s_accountName);s_ca(s_accountName); 
}	

function sendAnalyticsEvent(str){var ns=s_accountName;if(str!=null)ns+=","+str;void(s_gs(ns));}
function sendLinkEvent(accnt,lnkname,type){
accnt=s_accountName;s_linkType=type;s_lnk=true;s_linkName=lnkname;void(s_gs(accnt));}
//--></script>
<noscript><img src="http://stats.adobe.com/b/ss/mxmacromedia/1/H.15-XELvs/0?pageName=http%3A//www.adobe.com%3A%20noscript&ch=http%3A//www.adobe.com%3A%20noscript&g=http%3A//www.adobe.com" height="1" width="1" border="0" alt="" /></noscript>
<!-- End SiteCatalyst -->
</div>

<script language="JavaScript" type="text/javascript">//<![CDATA[
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/atm/s_code_www.js' type='text/javascript'%3E%3C/script%3E"));
//]]></script>
<script type="text/javascript">//<![CDATA[
if(s_adobe){	
	s_adobe.server="www.adobe.com Static Content pages";
	/* Set pageName */
	s_adobe.s_URL="adobe.com"+((location.pathname.charAt(0)=='/')?location.pathname:'/'+location.pathname);
	if (s_adobe.s_URL.substring(s_adobe.s_URL.lastIndexOf('/')+1)=="") s_adobe.s_URL=s_adobe.s_URL+"index.html";
	s_adobe.s_URLSplit=s_adobe.s_URL.split("/");
	s_adobe.pageName=s_adobe.s_URLSplit.join(":");

	/* Set prop4 to language-locale */
	var s_meta=document.getElementsByTagName('meta'); 
      for (i=0; i<s_meta.length; i++) { 
        if (s_meta[i].getAttribute("http-equiv") == "Content-Language") { 
          s_adobe.prop4=s_meta[i].getAttribute("content"); 
	    s_adobe.prop4=s_adobe.prop4.replace(/\s+/g,'');
        } 
      } 
	s_adobe.t()
}
//]]></script>








  </body>
</html>