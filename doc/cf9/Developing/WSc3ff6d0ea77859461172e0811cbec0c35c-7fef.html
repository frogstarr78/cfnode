<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="lang" content="en-us" />
    <meta name="area" content="livedocs" />
    <title>Adobe&#160;ColdFusion&#160;9 * Managing the client state</title>
    <link rel="shortcut icon" href="images/ColdFusionLinkIndicator.png" />
    <meta name="book" content="Developing&#160;ColdFusion 9 Applications" />
    <meta name="product" content="ColdFusion" />
    <meta name="keywords" content="" /><!--<PageMap><DataObject type="document"><Attribute name="product" value="ColdFusion"></Attribute><Attribute name="book" value="Developing&#160;ColdFusion 9 Applications"></Attribute><Attribute name="keywords" value=""></Attribute></DataObject></PageMap>-->
    
    <script type="text/javascript" language="Javascript" charset="UTF-8"><!--[CDATA[
        var currentTreeNode = "WSc3ff6d0ea77859461172e0811cbec0c35c-7fef.html";
    document.cookie = "topicId=" + "WSc3ff6d0ea77859461172e0811cbec0c35c-7fef.html";
// ]]--></script>
<script src="terms.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="help.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script>  <script src="utilities.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="event.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="treeview.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="toc.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script> <script src="swfobject.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>  <script src="booklist.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>
<script type="text/javascript">
<!--[CDATA[
var topictype = "topic";
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
  var linkId = document.createElement("link");
  linkId.href = "content-ie6.css";
  linkId.rel = "stylesheet";
  linkId.type = "text/css";
  headId.appendChild(linkId);
}
function initRoboHelpDOM() {
  if (use_chm_behavior) {
    hideElement("search");
  }
  if (use_robohelp_behavior) {
    hideElement("search");
    hideElement("productmenu");
    //hideElement("notyourversion");
  }
  if(!use_chc_behavior) {
    //document.getElementById("notyourversion").style.display = "inline";;
  }
}
var dirname = location.pathname.match( /.*\// );    
function setSearchUserPref(){
  if ( document.cookie.indexOf( "ah_searchpref" ) > -1 ) {
    if ( document.cookie.indexOf( dirname ) > 0 ) {
      document.search.gsa.checked = true ;
    }else{
      document.search.gsa.checked = false ;            
    }
  }
}
YAHOO.util.Event.onDOMReady(initRoboHelpDOM);
YAHOO.util.Event.onDOMReady(setSearchUserPref);
// ]]-->
</script>

<!-- ********************************** -->
<!-- START: ForeSee survey code in: /ssi/globalheader.ssi -->

<script type="text/javascript">
<!-- 
// Enable the survey for only English, German and Japanese
var agt=navigator.userAgent.toLowerCase();
if ( agt.indexOf("community help client") == -1 ){
    if ( document.location.href.indexOf("/en_US/") != -1 ){
        showSurvey();
//    }else if (document.location.href.indexOf("/de_DE/") != -1){
//         var locale="de";
//         showSurvey();
    }else if (document.location.href.indexOf("/ja_JP/") != -1 ){
         var locale="ja";
         showSurvey();
    }	
}

function showSurvey(){
	document.write('<script type="text/javascript" src="/js/foresee/foresee-trigger.js"><\/scr'+'ipt>');
}

// -->
</script>

<!-- END: ForeSee survey code -->
<!-- ******************************** -->




    <link rel="stylesheet" type="text/css" href="tree.css" />
    <link rel="stylesheet" type="text/css" href="content.css" />
    <link rel="stylesheet" type="text/css" href="localeSpecific.css" />
  </head>
  <body id="content_body" onload="window.focus();">
    <a name="top" shape="rect"><!--LeaveCommentHere--></a>
    
    <div id="mnemonic">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon" class="ColdFusion"><div class="banner"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html">Adobe&#160;ColdFusion&#160;9</a><span id="notyourversion">|&#160;
                    <a rel="nofollow" href="http://www.adobe.com/support/documentation/en/coldfusion/">Not your version?</a></span></div></div><!--googleon: index-->
    </div>
    
    <div id="searchbar">
<table id="searchbartable">
<tr>
<td colspan="2">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon"><div id="pdf"><img src="images/PDF.gif" width="16" height="16" /><a title="View Help PDF" href="coldfusion_9_dev.pdf">View Help PDF ( 23MB)</a></div></div><!--googleon: index-->
</td>
</tr>
</table>
    </div>

<!-- BEGIN SEARCH CONTENT -->
<form id="search" name="search" action="search.html" target="_self">
<script type="text/javascript">
<!--[CDATA[
if ( !use_chc_behavior ){
    if (typeof(terms_AHV_SEARCH_CONSTRAINT) != "undefined" && 
        terms_AHV_SEARCH_CONSTRAINT.length > 0 && 
        document.location.href.indexOf(".adobe.com") > 0){
        if ( typeof(terms_SEARCH_THIS_HELP_ONLY) != "undefined" && terms_SEARCH_THIS_HELP_ONLY == "ON" ) {
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                checked="checked" \
                value="1" ><\/input>'); 
                
        // Leave the "Search this help system only" checkbox unckecked
        }else{    
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                value="1" ><\/input>'); 
        }
        document.write('<span class="gsalabel">' + terms_AHV_SEARCH_CONSTRAINT + '<\/span><\/div>'); 
    }
    document.write('<input class="searchinput" \
        name="q" \
        id="q" \
        type="text" \
        maxlength="256" \
        value="' + terms_AHV_SEARCH_BUTTON + '" \
        onclick="clearSearch()"><\/input><input \
        type="button" \
        name="searchbutton" \
        class="searchbutton" \
        onclick="submit()"><\/input>'); 
} 
 
/* 
 * Start Functions 
 */
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}

// set search preferences
function setAHSearchPref(){
    if (document.search.gsa.checked == 1){
        setAHSearchCookie( dirname );
    }else{
        setAHSearchCookie( "community" );
    }
}

// Set search preferences cookie
function setAHSearchCookie( p ){
    // set cookie ah_searchpref with a value of the document path
    var expire=new Date();
    expire.setDate(expire.getDate()+365); // Cookie expires after 1 year (365 days) 
    document.cookie="ah_searchpref=" +p+ "; expires=" +expire.toGMTString()+ ";";
}

// ]]-->
</script> 
 </form>
<!-- END SEARCH CONTENT -->    



<!-- BEGIN PAGE CONTENT WRAPPER -->
    <div id="page_content_wrapper">
<!-- BEGIN PAGE WRAPPER -->
<table id="page_content_table">
<tr>

<td id="col2">
<!-- BEGIN CONTENT WRAPPER -->
<!-- BEGIN BREADCRUMBS -->

      
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec0c35c-7ffb.html" title="About persistent scope variables"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec0c35c-7fd5.html" title="Configuring and using client variables"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WS8f0cc78011fffa71-ea0996f11cdae56045-8000.html"><b>Developing CFML Applications</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7fd4.html"><b>Using Persistent Data and Locking</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
      <div id="content_wrapper">
<!-- BEGIN PAGE TITLE -->
        <h1>Managing the client state</h1>
<!-- END PAGE TITLE -->
<!-- BEGIN IONCOMMENTCOUNT -->
        <div id="ionCount">
        </div>
<!-- END IONCOMMENTCOUNT -->
<table id="inner_content_table" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td>
          <div style="border-top:#ccc solid 1px;"><p> </p>
          </div>
<p id="chcPromo" style="display:none;">
<a id="chcLink" href="http://www.adobe.com/support/chc/">
<img id="chcImage" src="http://www.adobe.com/support/chc/GetMoreHelpFeatures.png"/>
</a>
</p>
<script type="text/javascript" language="javascript" charset="utf-8">
<!--
var cfgArray = [];
//cfgArray["Acrobat_10.0_Professional.helpcfg"] = "acrobatpro";
//cfgArray["Acrobat_10.0_Standard.helpcfg"] = "acrobatstd";
cfgArray["Lightroom_3.0.helpcfg"] = "lightroom";
cfgArray["PhotoshopElements_8.0_Win.helpcfg"] = "photoshopelements";
cfgArray["PhotoshopElements_8.0_Mac.helpcfg"] = "photoshopelementsmac";
cfgArray["PremiereElements_8.0_Win.helpcfg"] = "premiereelements";

//cfgArray["AfterEffects_10.0.helpcfg"] = "aftereffects";
//cfgArray["AIR.helpcfg"] = "air";
//cfgArray["ColdFusionBuilder.helpcfg"] = "coldfusion";
//cfgArray["Contribute_6.0.helpcfg"] = "contribute";
//cfgArray["DeviceCentral_3.0.helpcfg"] = "devicecentral";
//cfgArray["Dreamweaver_11.0.helpcfg"] = "dreamweaver";
//cfgArray["EncoreDVD_5.0.helpcfg"] = "encore";
//cfgArray["ExtensionManager_3.0.helpcfg"] = "extension";
//cfgArray["Fireworks_11.0.helpcfg"] = "fireworks";
//cfgArray["Flash_11.0.helpcfg"] = "flash";
//cfgArray["Flex_4.0.helpcfg"] = "flashbuilder";
//cfgArray["FlashCatalyst_1.0.helpcfg"] = "flashcatalyst";
//cfgArray["Illustrator_15.0.helpcfg"] = "illustrator";
//cfgArray["InCopy_7.0.helpcfg"] = "incopy";
//cfgArray["InDesign_7.0.helpcfg"] = "indesign";
//cfgArray["OnLocation_5.0.helpcfg"] = "onlocation";
//cfgArray["Photoshop_12.0.helpcfg"] = "photoshop";
//cfgArray["PremierePro_5.0.helpcfg"] = "premierepro";

function getLangName() {
    var lang = "en-us";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if (ptn.test(lang)) {
        var languageCode = lang.replace(ptn, "$1");
        var countryCode = lang.replace(ptn, "$2");
        lang = languageCode + "_" + countryCode.toUpperCase();
    }
    return lang;
}

function getCountryName() {
    var lang = "";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if ((ptn.test(lang)) && (lang != "en-us")) {
        var countryCode = lang.replace(ptn, "$2");
        return "/" + countryCode;
    }
    return "";
}

if ( (typeof(terms_HELPCFG) != 'undefined')  && (terms_HELPCFG.indexOf(".helpcfg") != -1) ) {
    var stage   = (document.location.href.indexOf(".stage.") != -1) ? 'stage.' : '';
    var baseUrl = 'http://www.' + stage + 'adobe.com';
    var refpage = document.location.href.replace(/#.*$/, '');
	
	if ((!use_robohelp_behavior) && (terms_HELPCFG.length > 0) && (typeof(cfgArray[terms_HELPCFG]) != 'undefined') && (cfgArray[terms_HELPCFG].length > 0)) {
		if (document.getElementById) { // DOM3 = IE5, NS6
			var newHref = baseUrl + getCountryName() + "/support/chc/" + "?helpcfg=http://help." + stage + "adobe.com/HelpCfg/" + getLangName() + "/" + terms_HELPCFG + "&url=" + refpage + "&product=" + cfgArray[terms_HELPCFG];
			var newSrc = baseUrl + getCountryName() + "/support/chc/GetMoreHelpFeatures.png";
			document.getElementById("chcPromo").style.display = "block";
			document.getElementById("chcLink").href = newHref;
			document.getElementById("chcImage").src = newSrc;
		}
	}
}

//-->
</script>



          <div id="minitoc"><div class="t"><div class="b"><div><ul id="minitoc-links"><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec0c35c-7fd6"><span class="topictitle1">About client and session variables</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-6153"><span class="topictitle1">Maintaining client identity</span>
</a></p><ul><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec0c35c-7fed"><span class="topictitle2">About client identifiers</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-7cbf"><span class="topictitle2">Using client and session variables without cookies</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec0c35c-7fea"><span class="topictitle2">Client identifiers and security</span>
</a></p><ul><li><p><a href="#WSDC295FB7-E7B7-4022-B3D7-38E726F80EE7"><span class="topictitle3">Ensuring CFToken uniqueness and security</span>
</a></p></li><li><p><a href="#WSC1C7FB2B-5766-40ee-AC05-5995A0632565"><span class="topictitle3">Providing Session security</span>
</a></p></li></ul></li><li><p><a href="#WS1717a82d159bbe421e63e3d12a0e89fab7-8000"><span class="topictitle2">Security-related changes</span>
</a></p></li></ul></li></ul></div></div></div></div><div><p>Because the web is a
stateless system, each connection that a browser makes to a web
server is unique to the web server. However, many applications must
keep track of users as they move through the pages within the application.
This is the definition of <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">client state management</i>.</p>
<p>ColdFusion provides tools to maintain
the client state by seamlessly tracking variables associated with
a browser as the user moves from page to page within the application.
You can use these variables in place of other methods for tracking
client state, such as URL parameters, hidden form fields, and HTTP cookies. </p>
</div>
<div id="WSc3ff6d0ea77859461172e0811cbec0c35c-7fd6" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec0c35c-7fd6"><!-- --></a><h2 class="topictitle2">About client and session variables</h2><div><p>ColdFusion provides two tools for managing the client state:
client variables and session variables. Both types of variables
are associated with a specific client, but you manage and use them
differently, as described in the following table:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e31372"><p>Variable type</p>
</th>
<th valign="top" width="NaN%" id="d17e31375"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e31372 "><p>Client </p>
</td>
<td valign="top" width="NaN%" headers="d17e31375 "><p>Data is saved as cookies, database entries,
or Registry entries. Data is saved between server restarts, but
is initially accessed and saved more slowly than data stored in
memory.</p>
<p>Each type of data storage has its own time-out period.
You can specify the database and Registry data time-outs in the
ColdFusion Administrator. ColdFusion sets Cookie client variables
to expire after approximately ten years.</p>
<p>Data is stored on
a per-user and per-application basis. For example, if you store
client variables as cookies, the user has a separate cookie for
each ColdFusion application provided by a server.</p>
<p>Client variables
must be simple variables, such as numbers, dates, or strings. They
cannot be arrays, structures, query objects, or other objects.</p>
<p>Client
variable names can include periods. For example, My.ClientVar is
a valid name for a simple client variable. Avoid such names, however,
to ensure code clarity.</p>
<p>You do not have to prefix client variables
with the scope name when you reference them, However, if you do
not use the Client prefix, you might unintentionally refer to a
variable with the same name in another scope. Using the prefix also
optimizes performance and increases program clarity.</p>
<p>You do
not lock code that uses client variables.</p>
<p>You can use client
variables that are stored in cookies or a common database in clustered
systems.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e31372 "><p>Session </p>
</td>
<td valign="top" width="NaN%" headers="d17e31375 "><p>Data is stored in memory so it is accessed
quickly.</p>
<p>Data is lost when the client browser is inactive
for a time-out period. You specify the time-out in the ColdFusion Administrator,
the Application.cfc initialization code, or Application.cfm.</p>
<p>As
with client variables, data is available to a single client and
application only.</p>
<p>Variables can store any ColdFusion data
type.</p>
<p>You must prefix all variable names with the Session
scope name.</p>
<p>Lock code that uses session variables to prevent
race conditions.</p>
<p>You can use session variables in clustered
systems only if the systems support “sticky” sessions, where a session
is limited to a single server.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>Session variables are normally better than client variables for
values that need to exist for only a single browser session. Reserve
client variables for client-specific data, such as client preferences
that you want available for multiple browser sessions.</p>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec22c24-6153" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-6153"><!-- --></a><h2 class="topictitle2">Maintaining client identity</h2><div><p>Because the web is a stateless system, client management
requires some method for maintaining knowledge of the client between
requests. Normally you do this using cookies, but you can also do
it by passing information between application pages. Information
about how ColdFusion maintains client identity in a variety of configurations
and environments, and the issues that can arise with client state management
are described as follows:</p>
</div><div id="WSc3ff6d0ea77859461172e0811cbec0c35c-7fed" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec0c35c-7fed"><!-- --></a><h3 class="topictitle3">About client identifiers</h3><div><p>To use client and session variables, ColdFusion
must be able to identify the client. It normally does so by setting
the following two cookie values on the client’s system:</p>
<ul><li><p><strong>CFID</strong>:
A sequential client identifier</p>
</li>
<li><p><strong>CFToken: </strong>A
random-number client security token</p>
</li>
</ul>
<p>These cookies uniquely identify the client to ColdFusion, which
also maintains copies of the variables as part of the Session and
Client scopes. You can configure your application so that it does
not use client cookies, but in this case, pass these variables to
all the pages that your application calls. For more information
about maintaining client and session information without using cookies,
see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7cbf.html">Using client and session variables without cookies</a>.</p>
<p>You can configure ColdFusion to use J2EE servlet session management
instead of ColdFusion session management for session variables.
This method of session management does not use <samp class="codeph">CFID</samp> and <samp class="codeph">CFToken</samp> values,
but does use a client-side <samp class="codeph">jsessionid</samp> session management
cookie. For more information on using J2EE session management, see <a href="WS88096532-E1B5-40d6-92CF-41A5E402994B.html">ColdFusion and J2EE session management</a>.</p>
</div></div><div id="WSc3ff6d0ea77859461172e0811cbec22c24-7cbf" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7cbf"><!-- --></a><h3 class="topictitle3">Using client and session variables without cookies</h3><div><p>Often, users disable cookies in their browsers. In this
case, ColdFusion cannot maintain the client state automatically.
You can use client or session variables without using cookies, by
passing the client identification information between application
pages. However, this technique has significant limitations, as follows:</p>
<ol><li><p>Client variables are effectively the same as session
variables, except that they leave unusable data in the client data
store.</p>
<p>Because the client’s system does not retain any identification
information, the next time the user logs on, ColdFusion cannot identify
the user with the previous client and must create a new client ID
for the user. Any information about the user from a previous session
is not available, but remains in client data storage until ColdFusion
deletes it. If you clear the Purge Data for Clients that Remain
Unvisited option in the ColdFusion Administrator, ColdFusion never
deletes this data.</p>
<p>Therefore, do not use client variables,
if you allow users to disable cookies. To retain client information
without cookies, require users to login with a unique ID. You can
then save user-specific information in a database with the user’s
ID as a key.</p>
</li>
<li><p>ColdFusion creates a new session each time the user requests
a page directly in the browser, because the new request contains
no state information to indicate the session or client.</p>
</li>
</ol>
<div class="note"><span class="notetitle">Note:  </span>You
can prevent ColdFusion from sending client information to the browser
as cookies by setting This.setClientCookies variable in Application.cfc
or the <samp class="codeph">setClientCookies</samp> attribute of the <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d69.html" target="_self">cfapplication</a></samp> tag to No.</div>
<p>To use ColdFusion session variables without using cookies, each
page must pass the <samp class="codeph">CFID</samp> and <samp class="codeph">CFToken</samp> values
to any page that it calls as part of the request URL. If a page
contains any HTML <samp class="codeph">href</samp><samp class="codeph">a=</samp> links, <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7cac.html" target="_self">cflocation</a></samp> tags, <samp class="codeph">form</samp> tags, or <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fb7.html" target="_self">cfform</a></samp> tags the tags must
pass the <samp class="codeph">CFID</samp> and <samp class="codeph">CFToken</samp> values
in the tag URL. To use J2EE session management, pass the <samp class="codeph">jsessionid</samp> value
in page requests. To use ColdFusion client variables and J2EE session
variables, pass the <samp class="codeph">CFID</samp>, <samp class="codeph">CFToken</samp>,
and <samp class="codeph">jsessionid</samp> values in URLs. </p>
<div class="para"><div class="note"><span class="notetitle">Note:  </span>The behavior is as follows when CFID and CFTOKEN are provided
in the URL: If session exists, the CFID and CFTOKEN from the URL
are ignored. If the session does not exist, CFID and CFTOKEN from
the URL are used to validate the session and the session is used
if it is valid. If the session is not valid, a new session is created.
CFID and CFTOKEN are regenerated.</div>
</div>
<p>ColdFusion provides the <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7cab.html" target="_self">URLSessionFormat</a></samp> function,
which does the following:</p>
<ul><li><p>If the client does not accept cookies, automatically
appends all required client identification information to a URL.</p>
</li>
<li><p>If the client accepts cookies, does not append the information. </p>
</li>
</ul>
<p>The <samp class="codeph">URLSessionFormat</samp> function automatically
determines which identifiers are required, and sends only the required
information. It also provides a more secure and robust method for
supporting client identification than manually encoding the information
in each URL, because it only sends the information that is required,
when it is required, and it is easier to code.</p>
<p>To use the <samp class="codeph">URLSessionFormat</samp> function, enclose
the request URL in the function. For example, the following <samp class="codeph">cfform</samp> tag
posts a request to another page and sends the client identification,
if necessary:</p>
<pre>&lt;cfform method="Post" action="#URLSessionFormat("MyActionPage.cfm")#&gt;</pre>
<div class="tip"><img src="images/tip_help.png" />If you use the same page URL in multiple <samp class="codeph">URLSessionFormat</samp><i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema"> functions, you can gain a small performance improvement and simplify your code if you assign the formatted page URL to a variable, for example: </i></div><pre>&lt;cfset myEncodedURL=URLSessionFormat(MyActionPage.cfm)&gt; 
&lt;cfform method="Post" action="#myEncodedURL#"&gt;</pre>
</div></div><div id="WSc3ff6d0ea77859461172e0811cbec0c35c-7fea" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec0c35c-7fea"><!-- --></a><h3 class="topictitle3">Client identifiers and security</h3><div><p>The following client identifier issues can have security
implications:</p>
<ul><li><p>Ensuring the uniqueness and complexity of the <samp class="codeph">CFToken</samp> identifier</p>
</li>
<li><p>Limiting the availability of Session identifiers</p>
</li>
</ul>
<p>The next sections discuss these issues.</p>
</div><div id="WSDC295FB7-E7B7-4022-B3D7-38E726F80EE7" class="nochunk"><a name="WSDC295FB7-E7B7-4022-B3D7-38E726F80EE7"><!-- --></a><h4 class="topictitle4">Ensuring CFToken uniqueness and security</h4><div><p>By default, ColdFusion uses an eight-digit random number
in the <samp class="codeph">CFToken</samp> identifier. This <samp class="codeph">CFToken</samp> format
provides a unique, secure identifier for users under most circumstances.
(In ColdFusion, the method for generating this number uses a cryptographic-strength
random number generator that is seeded only when the server starts.)</p>
<p>However, in the ColdFusion Administrator, you can enable the
Settings page to produce a more complex <samp class="codeph">CFToken</samp> identifier.
If you enable the Use UUID for cftoken option, ColdFusion creates
the <samp class="codeph">CFToken</samp> value by prepending a 16-digit random
hexadecimal number to a ColdFusion UUID. The resulting <samp class="codeph">CFToken</samp> identifier
looks similar to the following:</p>
<pre>3ee6c307a7278c7b-5278BEA6-1030-C351-3E33390F2EAD02B9</pre>
</div></div><div id="WSC1C7FB2B-5766-40ee-AC05-5995A0632565" class="nochunk"><a name="WSC1C7FB2B-5766-40ee-AC05-5995A0632565"><!-- --></a><h4 class="topictitle4">Providing Session security</h4><div><p>ColdFusion uses the same client identifiers for the Client
scope and the standard Session scope. Because the <samp class="codeph">CFToken</samp> and <samp class="codeph">CFID</samp> values
are used to identify a client over a period of time, they are normally
saved as cookies on the user’s browser. These cookies persist until
the client’s browser deletes them, which can be a considerable length
of time. As a result, hackers could have more access to these variables
than if ColdFusion used different user identifiers for each session.</p>
<p>A hacker who has the user’s <samp class="codeph">CFToken</samp> and <samp class="codeph">CFID</samp> cookies
could gain access to user data by accessing a web page during the
user’s session using the stolen <samp class="codeph">CFToken</samp> and <samp class="codeph">CFID</samp> cookies.
While this scenario is unlikely, it is theoretically possible.</p>
<p>You can remove this vulnerability by selecting the Use J2EE Session
Variables option on the ColdFusion Administrator Memory Variables
page. The J2EE session management mechanism creates a new session
identifier for each session, and does not use either the <samp class="codeph">CFToken</samp> or
the <samp class="codeph">CFID</samp> cookie value.</p>
</div></div></div><div id="WS1717a82d159bbe421e63e3d12a0e89fab7-8000" class="nochunk"><a name="WS1717a82d159bbe421e63e3d12a0e89fab7-8000"><!-- --></a><h3 class="topictitle3">Security-related changes</h3><div><p>The following security-related specifications apply when
you upgrade to <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">ColdFusion 9 Upgrade 1</i>:</p>
<div class="para"><ul><li><p>CFID, CFTOKEN, and jsessionid are marked <samp class="codeph">httpOnly</samp>.
This reduces the chance of session information being compromised
on Cross Site Scripting (XSS) attack.</p>
</li>
<li><p>Set the following system property for the session cookies
to be httpOnly: <samp class="codeph">Dcoldfusion.sessioncookie.httponly=true</samp></p>
</li>
<li><p>The support for session cookies to be <samp class="codeph">httpOnly</samp> depends
on the application server you use:</p>
<ul><li><p>For Tomcat/JBoss, <samp class="codeph">httpOnly</samp> is
not supported for JSESSIONID</p>
</li>
<li><p>On JRun, add the system property, Dcoldfusion.sessioncookie.httponly=true ,
in the jvm.config file</p>
</li>
<li><p>For other application servers, see the relevant documentation
for details on <samp class="codeph">httpOnly</samp> support for session cookies.</p>
</li>
</ul>
</li>
</ul>
</div>
</div></div></div>


<!-- BEGIN USER PREFERENCES -->
          <div id="userprefs">
          </div>
<!-- END USER PREFERENCES -->

          <div id="related">
            
            
            <div class="separator"><a href="#top"><img src="images/BTT.jpg" /></a>&#160;</div>
          </div>
          <div id="footer">
<!-- BEGIN IONCOMMENTS -->
            <div id="ionComHere">
            </div>
<!-- END IONCOMMENTS -->


            <p id="creativecommons"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text"><img id="creativecommons_img" src="images/CC.png" alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" /></a>&nbsp;Twitter™ and Facebook posts are not covered under the terms of Creative Commons.</p>
          </div>
</td>
<td width="10px"></td>
<td id="inner_rightcolumn">

</td></tr></table>
      </div>
<!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec0c35c-7ffb.html" title="About persistent scope variables"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec0c35c-7fd5.html" title="Configuring and using client variables"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WS8f0cc78011fffa71-ea0996f11cdae56045-8000.html"><b>Developing CFML Applications</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7fd4.html"><b>Using Persistent Data and Locking</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
<!-- END CONTENT WRAPPER -->

</td>
<td id="col3">
    <div>
        <img src="images/adobe-lq.png" />
    </div>
</td>
</tr>
</table>
    </div>
<!-- END PAGE CONTENT WRAPPER -->
<script type="text/javascript">
<!--[CDATA[
scrollToNameAnchor();
// ]]-->
</script> 
<!--
    Description:
    This file generates the link to product support in the top right corner
-->

<style>
#menutop{
    position:absolute;
    top:4px;
    right:24px;
    width:auto;    
    font-size:11px;
    color:#fff;
    text-align:right;
}
#menutop a{
    color:#fff;
}
#menutop a:hover{
        text-decoration:underline;
}
</style>  
  
  
  
  
<div id="productmenu">
<!--googleoff: index-->
  <div id="menutop">


<script language=javascript type='text/javascript'>
    // darken menu text for products with light backgrounds
    var path = document.location.href.toLowerCase();
    if (path.indexOf("/acrobat/")           	> 0 ||
        path.indexOf("/acrobat.com/")       	> 0 ||
        path.indexOf("/acrobatConnectPro/") 	> 0 ||
        path.indexOf("/connect/")           	> 0 ||
        path.indexOf("/livecycledataserviceses/") > 0 ||
        path.indexOf("/muse/")         	> 0 ||
	path.indexOf("/presenter/")         	> 0 ||
        path.indexOf("/scene7/")            	> 0 ||
        path.indexOf("/flashmediaserver/")  	> 0 ||
        path.indexOf("/wave/")              	> 0 )
    {
        document.write('<style>#menutop a{color:#505050}</style>');
    }
    if (typeof('terms_AHV_PRODUCT_SUPPORT') != "undefined" && ! use_robohelp_behavior ){      
        if (path.indexOf("/muse/") > -1 ){
            var supportlink = '<a href="http://muse.adobe.com/support.html">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }else{
            var supportlink = '<a href="http://adobe.com/support">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }
        document.write( supportlink );
     }

</script> 

  </div>
<!--googleon: index-->
</div>



<style>
#online-privacy-policy{ 
    margin:10px 40px; 
    font-size:11px;
}
</style>

<p id="online-privacy-policy">
<script language="javascript">
var pageLoc = "en_US";
var metaElements = document.all ?
document.all.tags('meta') :
document.getElementsByTagName ?
document.getElementsByTagName ('meta') : new Array();
for (var m = 0; m < metaElements.length; m++) {
	if (metaElements[m].name == "lang") {
		pageLoc = metaElements[m].content;
		break;
	}
}
var ptn = /(..)-(..)/;
if (ptn.test(pageLoc)) {
	var languageCode = pageLoc.replace(ptn, "$1");
	var countryCode = pageLoc.replace(ptn, "$2");
	pageLoc = languageCode + "_" + countryCode.toUpperCase();
}

var policyLoc = "en_US";
var policyText = "Online Privacy Policy";
var policyPath = "";
var policyArray=[
"da_DK", "Online fortrolighedserklæring",
"de_DE", "Online-Datenschutzrichtlinie",
"es_ES", "Política de confidencialidad en línea",
"fi_FI", "Yksityisyyttä koskeva Online-toimintaohjelma",
"fr_FR", "Confidentialité et sécurité",
"it_IT", "Informativa sulla privacy online",
"ja_JP", "プライバシーポリシー",
"ko_KR", "Adobe 온라인 개인정보 보호정책",
"pt_BR", "Política de Confidencialidade On-line", 
"zh_CN", "在线隐私政策",
"zh_TW", "線上隱私政策"
];
var legalLoc = "en_US";
var legalText = "Legal Notices";
var legalPath = legalLoc;
var legalArray=[
"ar_AE", "إشعارات قانونية",
"bg_BG", "Юридически бележки",
"cs_CZ", "Právní upozornění",
"da_DK", "Juridiske meddelelser",
"de_DE", "Rechtliche Hinweise",
"el_GR", "Σημειώσεις νομικού περιεχομένου",
"es_ES", "Avisos legales",
"et_EE", "Juriidilised teated",
"fi_FI", "Lakisääteiset ilmoitukset",
"fr_FR", "Mentions légales",
"he_IL", "הצהרות משפטיות",
"hr_HR", "Pravne napomene",
"hu_HU", "Jogi közlemények",
"it_IT", "Informazioni legali",
"ja_JP", "法律上の注意",
"ko_KR", "법적 고지 사항",
"lt_LT", "Teisinės pastabos",
"lv_LV", "Juridisks paziņojums",
"nb_NO", "Juridiske merknader",
"nl_NL", "Juridische kennisgevingen",
"pl_PL", "Informacje prawne",
"pt_BR", "Aspectos jurídicos",
"ro_RO", "Prevederi legale",
"ru_RU", "Юридическая информация",
"sk_SK", "Právne upozornenie",
"sl_SI", "Pravni pouk",
"sv_SE", "Upphovsrätt",
"tr_TR", "Yasal uyarılar",
"uk_UA", "Юридична інформація",
"zh_CN", "法律声明",
"zh_TW", "法律注意事項"
];

ruPolicy = "http://www.adobe.com/ru/misc/privacy.html";
trPolicy = "http://www.adobe.com/tr/misc/privacy.html";

// Bug 2846992: LOC: RUS, TUR: The link to "Online Privacy Policy" should include language, currently it is not appearing.
if (pageLoc == "ru_RU") {
	policyPath = "ru";
}
else if (pageLoc == "tr_TR") {
	policyPath = "tr";
}
for (var i = 0; i < policyArray.length; i+=2) {
	if (pageLoc == policyArray[i]) {
		policyLoc = pageLoc;
		policyText = policyArray[i+1];
		var ptn = /(..)_(..)/;
		if (ptn.test(policyLoc)) {
			var countryCode = policyLoc.replace(ptn, "$2");
			policyPath = countryCode.toLowerCase();
		}
		break;
	}
}

for (var i = 0; i < legalArray.length; i+=2) {
	if (pageLoc == legalArray[i]) {
		legalLoc = pageLoc;
		legalText = legalArray[i+1];
		legalPath = legalLoc;
		break;
	}
}
if(agt.indexOf("community help client") > -1 ){
	document.write('<a href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
}else{
	//Open the privacy policy in a new window
	document.write('<a target="_blank" href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a target="_blank" href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
} 
</script>
</p>



<!-- localfooter.ssi -->

<script type="text/javascript">
    var debug = (top.location.href.indexOf("debug=true") > -1);
</script>

<script language="javascript">
document.write('<scr'+'ipt ' +
               'src="/en_US/ssi/_pod.js" ' +
               'language="javascript" ' +
               'charset="UTF-8"> ' +
               '</scr'+'ipt>');
</script>


<script type="text/javascript">
//
//  Ethnio survey code
//
/*          DocumentID      EthnioID */
/*          -------------   -------- */
var ethnio=["/en_US/flash/cs/using/WSb03e830bd6f770ee6664507612436d7dede-8000.html", "87462",
            "/en_US/creativesuite/cs/using/WSe851854fd1e0856a-4b08a77612477f69f15-8000.html",  "10441",
            "/en_US/dreamweaver/cs/using/WSEE4C0148-A6F4-4bf5-9DEF-CE06AB026214a.html",  "57412"
 
    ];
                        
    for ( var i = 0; i < ethnio.length ; i = i+2 ){
        if ( document.location.href.indexOf( ethnio[i] ) > -1 ){ 
            var headID = document.getElementsByTagName("head")[0];         
            var ethnioScript = document.createElement('script');
            ethnioScript.type = 'text/javascript';
            ethnioScript.src = 'http://ethn.io/remotes/' + ethnio[i+1];        
            if ( debug ){
                alert ("Using Ethnio script: " + ethnioScript.src );
            }else{
                headID.appendChild(ethnioScript);
            }
        }
    }
</script>



<div style="display: none;">
<!-- SiteCatalyst -->
<script language="JavaScript" type="text/javascript"><!--
var s_code=' ';
var s_docHost = window.location.hostname.toLowerCase();
var s_docURL = window.location.pathname.toLowerCase();
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
if (s_docHost.indexOf(".corp.adobe") != -1 || s_docHost.indexOf("stage.") != -1 || s_docHost.indexOf(".dev.adobe") != -1 || s_docHost.indexOf("staging.") != -1) scJsHost="";
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/omniture_s_code.js' type='text/javascript'%3E%3C/script%3E"));
//--></script>
<script type="text/javascript"><!--
var s_accountName;
s_server="www.adobe.com static content pages";
if (!window.s_account) s_accountName="mxmacromedia";
else s_accountName=window.s_account;

if (window.s_docURL.indexOf("/designcenter/") != -1)
  s_channel="Adobe Design Center";	
else if ((window.s_docHost.indexOf("labs.adobe") != -1) ||
(window.s_docHost.indexOf("labs-staging.") != -1))
  s_channel="Labs";
else if (window.s_docHost.indexOf("help.adobe.com") != -1) {
  s_channel="Support Help.adobe.com";
  if (window.s_docURL.indexOf("/en_us/") == -1) {
    s_docURLArray=s_docURL.split('/');
    s_pageName="http://help.adobe.com/"+s_docURLArray[1]+"/"+ s_docURLArray[2]+"/"+s_docURLArray[3];
    s_prop23="http://help.adobe.com"+window.location.pathname;
  }
}
else if (window.s_docHost.indexOf("kb2.adobe.com") != -1) {
  s_channel="Support Knowledgebase";
  s_prop23="http://kb2.adobe.com"+s_docURL+":";
  if (typeof(omtrProductList) != 'undefined' && omtrProductList.length > 0)
 {
    s_prop23=s_prop23+omtrProductList;
  }
}
else if (window.s_docHost.indexOf("resellers.adobe.com") != -1) {
		var s_pageName=document.getElementsByTagName("title")[0].text;
}

if (!window.scMMInclude) {
	var s_wd=window,s_tm=new Date;
	if(s_code!=' '){
		s_code=s_dc(s_accountName);
		if(s_code)document.write(s_code)
	} 
} else {
	s_wds(s_accountName);s_ca(s_accountName); 
}	

function sendAnalyticsEvent(str){var ns=s_accountName;if(str!=null)ns+=","+str;void(s_gs(ns));}
function sendLinkEvent(accnt,lnkname,type){
accnt=s_accountName;s_linkType=type;s_lnk=true;s_linkName=lnkname;void(s_gs(accnt));}
//--></script>
<noscript><img src="http://stats.adobe.com/b/ss/mxmacromedia/1/H.15-XELvs/0?pageName=http%3A//www.adobe.com%3A%20noscript&ch=http%3A//www.adobe.com%3A%20noscript&g=http%3A//www.adobe.com" height="1" width="1" border="0" alt="" /></noscript>
<!-- End SiteCatalyst -->
</div>

<script language="JavaScript" type="text/javascript">//<![CDATA[
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/atm/s_code_www.js' type='text/javascript'%3E%3C/script%3E"));
//]]></script>
<script type="text/javascript">//<![CDATA[
if(s_adobe){	
	s_adobe.server="www.adobe.com Static Content pages";
	/* Set pageName */
	s_adobe.s_URL="adobe.com"+((location.pathname.charAt(0)=='/')?location.pathname:'/'+location.pathname);
	if (s_adobe.s_URL.substring(s_adobe.s_URL.lastIndexOf('/')+1)=="") s_adobe.s_URL=s_adobe.s_URL+"index.html";
	s_adobe.s_URLSplit=s_adobe.s_URL.split("/");
	s_adobe.pageName=s_adobe.s_URLSplit.join(":");

	/* Set prop4 to language-locale */
	var s_meta=document.getElementsByTagName('meta'); 
      for (i=0; i<s_meta.length; i++) { 
        if (s_meta[i].getAttribute("http-equiv") == "Content-Language") { 
          s_adobe.prop4=s_meta[i].getAttribute("content"); 
	    s_adobe.prop4=s_adobe.prop4.replace(/\s+/g,'');
        } 
      } 
	s_adobe.t()
}
//]]></script>








  </body>
</html>