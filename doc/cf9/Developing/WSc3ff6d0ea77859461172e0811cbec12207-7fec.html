<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="lang" content="en-us" />
    <meta name="area" content="livedocs" />
    <title>Adobe&#160;ColdFusion&#160;9 * Manipulating ColdFusion images</title>
    <link rel="shortcut icon" href="images/ColdFusionLinkIndicator.png" />
    <meta name="book" content="Developing&#160;ColdFusion 9 Applications" />
    <meta name="product" content="ColdFusion" />
    <meta name="keywords" content="" /><!--<PageMap><DataObject type="document"><Attribute name="product" value="ColdFusion"></Attribute><Attribute name="book" value="Developing&#160;ColdFusion 9 Applications"></Attribute><Attribute name="keywords" value=""></Attribute></DataObject></PageMap>-->
    
    <script type="text/javascript" language="Javascript" charset="UTF-8"><!--[CDATA[
        var currentTreeNode = "WSc3ff6d0ea77859461172e0811cbec12207-7fec.html";
    document.cookie = "topicId=" + "WSc3ff6d0ea77859461172e0811cbec12207-7fec.html";
// ]]--></script>
<script src="terms.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="help.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script>  <script src="utilities.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="event.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="treeview.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="toc.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script> <script src="swfobject.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>  <script src="booklist.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>
<script type="text/javascript">
<!--[CDATA[
var topictype = "topic";
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
  var linkId = document.createElement("link");
  linkId.href = "content-ie6.css";
  linkId.rel = "stylesheet";
  linkId.type = "text/css";
  headId.appendChild(linkId);
}
function initRoboHelpDOM() {
  if (use_chm_behavior) {
    hideElement("search");
  }
  if (use_robohelp_behavior) {
    hideElement("search");
    hideElement("productmenu");
    //hideElement("notyourversion");
  }
  if(!use_chc_behavior) {
    //document.getElementById("notyourversion").style.display = "inline";;
  }
}
var dirname = location.pathname.match( /.*\// );    
function setSearchUserPref(){
  if ( document.cookie.indexOf( "ah_searchpref" ) > -1 ) {
    if ( document.cookie.indexOf( dirname ) > 0 ) {
      document.search.gsa.checked = true ;
    }else{
      document.search.gsa.checked = false ;            
    }
  }
}
YAHOO.util.Event.onDOMReady(initRoboHelpDOM);
YAHOO.util.Event.onDOMReady(setSearchUserPref);
// ]]-->
</script>

<!-- ********************************** -->
<!-- START: ForeSee survey code in: /ssi/globalheader.ssi -->

<script type="text/javascript">
<!-- 
// Enable the survey for only English, German and Japanese
var agt=navigator.userAgent.toLowerCase();
if ( agt.indexOf("community help client") == -1 ){
    if ( document.location.href.indexOf("/en_US/") != -1 ){
        showSurvey();
//    }else if (document.location.href.indexOf("/de_DE/") != -1){
//         var locale="de";
//         showSurvey();
    }else if (document.location.href.indexOf("/ja_JP/") != -1 ){
         var locale="ja";
         showSurvey();
    }	
}

function showSurvey(){
	document.write('<script type="text/javascript" src="/js/foresee/foresee-trigger.js"><\/scr'+'ipt>');
}

// -->
</script>

<!-- END: ForeSee survey code -->
<!-- ******************************** -->




    <link rel="stylesheet" type="text/css" href="tree.css" />
    <link rel="stylesheet" type="text/css" href="content.css" />
    <link rel="stylesheet" type="text/css" href="localeSpecific.css" />
  </head>
  <body id="content_body" onload="window.focus();">
    <a name="top" shape="rect"><!--LeaveCommentHere--></a>
    
    <div id="mnemonic">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon" class="ColdFusion"><div class="banner"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html">Adobe&#160;ColdFusion&#160;9</a><span id="notyourversion">|&#160;
                    <a rel="nofollow" href="http://www.adobe.com/support/documentation/en/coldfusion/">Not your version?</a></span></div></div><!--googleon: index-->
    </div>
    
    <div id="searchbar">
<table id="searchbartable">
<tr>
<td colspan="2">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon"><div id="pdf"><img src="images/PDF.gif" width="16" height="16" /><a title="View Help PDF" href="coldfusion_9_dev.pdf">View Help PDF ( 23MB)</a></div></div><!--googleon: index-->
</td>
</tr>
</table>
    </div>

<!-- BEGIN SEARCH CONTENT -->
<form id="search" name="search" action="search.html" target="_self">
<script type="text/javascript">
<!--[CDATA[
if ( !use_chc_behavior ){
    if (typeof(terms_AHV_SEARCH_CONSTRAINT) != "undefined" && 
        terms_AHV_SEARCH_CONSTRAINT.length > 0 && 
        document.location.href.indexOf(".adobe.com") > 0){
        if ( typeof(terms_SEARCH_THIS_HELP_ONLY) != "undefined" && terms_SEARCH_THIS_HELP_ONLY == "ON" ) {
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                checked="checked" \
                value="1" ><\/input>'); 
                
        // Leave the "Search this help system only" checkbox unckecked
        }else{    
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                value="1" ><\/input>'); 
        }
        document.write('<span class="gsalabel">' + terms_AHV_SEARCH_CONSTRAINT + '<\/span><\/div>'); 
    }
    document.write('<input class="searchinput" \
        name="q" \
        id="q" \
        type="text" \
        maxlength="256" \
        value="' + terms_AHV_SEARCH_BUTTON + '" \
        onclick="clearSearch()"><\/input><input \
        type="button" \
        name="searchbutton" \
        class="searchbutton" \
        onclick="submit()"><\/input>'); 
} 
 
/* 
 * Start Functions 
 */
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}

// set search preferences
function setAHSearchPref(){
    if (document.search.gsa.checked == 1){
        setAHSearchCookie( dirname );
    }else{
        setAHSearchCookie( "community" );
    }
}

// Set search preferences cookie
function setAHSearchCookie( p ){
    // set cookie ah_searchpref with a value of the document path
    var expire=new Date();
    expire.setDate(expire.getDate()+365); // Cookie expires after 1 year (365 days) 
    document.cookie="ah_searchpref=" +p+ "; expires=" +expire.toGMTString()+ ";";
}

// ]]-->
</script> 
 </form>
<!-- END SEARCH CONTENT -->    



<!-- BEGIN PAGE CONTENT WRAPPER -->
    <div id="page_content_wrapper">
<!-- BEGIN PAGE WRAPPER -->
<table id="page_content_table">
<tr>

<td id="col2">
<!-- BEGIN CONTENT WRAPPER -->
<!-- BEGIN BREADCRUMBS -->

      
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec12207-7fe4.html" title="Compressing JPEG images"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec12207-7fea.html" title="Writing images to the browser"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WSc3ff6d0ea77859461172e0811cdd76f064-8000.html"><b>Working with Documents, Charts, and Reports</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7985.html"><b>Creating and Manipulating ColdFusion Images</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
      <div id="content_wrapper">
<!-- BEGIN PAGE TITLE -->
        <h1>Manipulating ColdFusion images</h1>
<!-- END PAGE TITLE -->
<!-- BEGIN IONCOMMENTCOUNT -->
        <div id="ionCount">
        </div>
<!-- END IONCOMMENTCOUNT -->
<table id="inner_content_table" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td>
          <div style="border-top:#ccc solid 1px;"><p> </p>
          </div>
<p id="chcPromo" style="display:none;">
<a id="chcLink" href="http://www.adobe.com/support/chc/">
<img id="chcImage" src="http://www.adobe.com/support/chc/GetMoreHelpFeatures.png"/>
</a>
</p>
<script type="text/javascript" language="javascript" charset="utf-8">
<!--
var cfgArray = [];
//cfgArray["Acrobat_10.0_Professional.helpcfg"] = "acrobatpro";
//cfgArray["Acrobat_10.0_Standard.helpcfg"] = "acrobatstd";
cfgArray["Lightroom_3.0.helpcfg"] = "lightroom";
cfgArray["PhotoshopElements_8.0_Win.helpcfg"] = "photoshopelements";
cfgArray["PhotoshopElements_8.0_Mac.helpcfg"] = "photoshopelementsmac";
cfgArray["PremiereElements_8.0_Win.helpcfg"] = "premiereelements";

//cfgArray["AfterEffects_10.0.helpcfg"] = "aftereffects";
//cfgArray["AIR.helpcfg"] = "air";
//cfgArray["ColdFusionBuilder.helpcfg"] = "coldfusion";
//cfgArray["Contribute_6.0.helpcfg"] = "contribute";
//cfgArray["DeviceCentral_3.0.helpcfg"] = "devicecentral";
//cfgArray["Dreamweaver_11.0.helpcfg"] = "dreamweaver";
//cfgArray["EncoreDVD_5.0.helpcfg"] = "encore";
//cfgArray["ExtensionManager_3.0.helpcfg"] = "extension";
//cfgArray["Fireworks_11.0.helpcfg"] = "fireworks";
//cfgArray["Flash_11.0.helpcfg"] = "flash";
//cfgArray["Flex_4.0.helpcfg"] = "flashbuilder";
//cfgArray["FlashCatalyst_1.0.helpcfg"] = "flashcatalyst";
//cfgArray["Illustrator_15.0.helpcfg"] = "illustrator";
//cfgArray["InCopy_7.0.helpcfg"] = "incopy";
//cfgArray["InDesign_7.0.helpcfg"] = "indesign";
//cfgArray["OnLocation_5.0.helpcfg"] = "onlocation";
//cfgArray["Photoshop_12.0.helpcfg"] = "photoshop";
//cfgArray["PremierePro_5.0.helpcfg"] = "premierepro";

function getLangName() {
    var lang = "en-us";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if (ptn.test(lang)) {
        var languageCode = lang.replace(ptn, "$1");
        var countryCode = lang.replace(ptn, "$2");
        lang = languageCode + "_" + countryCode.toUpperCase();
    }
    return lang;
}

function getCountryName() {
    var lang = "";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if ((ptn.test(lang)) && (lang != "en-us")) {
        var countryCode = lang.replace(ptn, "$2");
        return "/" + countryCode;
    }
    return "";
}

if ( (typeof(terms_HELPCFG) != 'undefined')  && (terms_HELPCFG.indexOf(".helpcfg") != -1) ) {
    var stage   = (document.location.href.indexOf(".stage.") != -1) ? 'stage.' : '';
    var baseUrl = 'http://www.' + stage + 'adobe.com';
    var refpage = document.location.href.replace(/#.*$/, '');
	
	if ((!use_robohelp_behavior) && (terms_HELPCFG.length > 0) && (typeof(cfgArray[terms_HELPCFG]) != 'undefined') && (cfgArray[terms_HELPCFG].length > 0)) {
		if (document.getElementById) { // DOM3 = IE5, NS6
			var newHref = baseUrl + getCountryName() + "/support/chc/" + "?helpcfg=http://help." + stage + "adobe.com/HelpCfg/" + getLangName() + "/" + terms_HELPCFG + "&url=" + refpage + "&product=" + cfgArray[terms_HELPCFG];
			var newSrc = baseUrl + getCountryName() + "/support/chc/GetMoreHelpFeatures.png";
			document.getElementById("chcPromo").style.display = "block";
			document.getElementById("chcLink").href = newHref;
			document.getElementById("chcImage").src = newSrc;
		}
	}
}

//-->
</script>



          <div id="minitoc"><div class="t"><div class="b"><div><ul id="minitoc-links"><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fdf"><span class="topictitle1">Adding borders to images</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fdb"><span class="topictitle1">Creating text images</span>
</a></p><ul><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7feb"><span class="topictitle2">Creating a CAPTCHA image</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fe3"><span class="topictitle2">Using the ImageDrawText function</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fdd"><span class="topictitle1">Drawing lines and shapes</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fde"><span class="topictitle1">Setting drawing controls</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fdc"><span class="topictitle1">Resizing images</span>
</a></p><ul><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7ff0"><span class="topictitle2">Using the cfimage tag resize action</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fe1"><span class="topictitle2">Using the ImageResize function</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fe0"><span class="topictitle2">Using the ImageScaleToFit function</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-793b"><span class="topictitle1">Creating watermarks</span>
</a></p><ul><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fe8"><span class="topictitle2">Creating a watermark from an image file</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fd5"><span class="topictitle2">Creating a watermark from a text image</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec12207-7fe7"><span class="topictitle2">Creating a watermark from a ColdFusion drawing</span>
</a></p></li></ul></li></ul></div></div></div></div><div><p>You can perform a few common manipulation operations on
ColdFusion images. For more information on manipulating ColdFusion
images, see the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div>
<div id="WSc3ff6d0ea77859461172e0811cbec12207-7fdf" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fdf"><!-- --></a><h2 class="topictitle2">Adding borders to images</h2><div><p>To create a simple border, use the <samp class="codeph">cfimage</samp> tag.
The following example creates a ColdFusion image with a 5-pixel
blue border:</p>
<pre>&lt;cfimage source="../cfdocs/images/artgallery/jeff01.jpg" action="border" thickness="5" 
    color="blue" destination="testMyImage.jpg" overwrite="yes"&gt; 
&lt;img src="testMyImage.jpg"&gt;</pre>
<p>The border is added to the outside edge of the source image.
This increases the area of the image.</p>
<p>To create complex borders, use the <samp class="codeph">ImageAddBorder</samp> function.
The following example shows how to nest borders:</p>
<pre>&lt;!--- Create a ColdFusion image from a JPEG file. ---&gt; 
&lt;cfset myImage=ImageNew("../cfdocs/images/artgallery/jeff01.jpg")&gt; 
&lt;!--- Add a 5-pixel blue border around the outside edge of the image. ---&gt; 
&lt;cfset ImageAddBorder(myImage,5,"blue")&gt; 
&lt;!--- Add a 10-pixel magenta border around the blue border. ---&gt; 
&lt;cfset ImageAddBorder(myImage,10,"magenta")&gt; 
&lt;!--- Add a 5-pixel green border around the magenta border. ---&gt; 
&lt;cfset ImageAddBorder(myImage,20,"green")&gt; 
&lt;!--- Write the ColdFusion image to a file. ---&gt; 
&lt;cfset ImageWrite(myImage,"testMyImage.jpg")&gt; 
&lt;img src="testMyImage.jpg"/&gt;</pre>
<p>Also, with the <samp class="codeph">ImageAddBorder</samp> function, you
can add a border that is an image effect. For example, you can use
the <samp class="codeph">wrap</samp> parameter to create a tiled border from
the source image. The <samp class="codeph">wrap</samp> parameter creates a
tiled border by adding the specified number of pixels to each side
of the image, as though the image were tiled.</p>
<p>In the following example, 20 pixels from the outside edge of
the source image are tiled to create the border:</p>
<pre>&lt;cfset myImage=ImageNew("../cfdocs/images/artgallery/jeff03.jpg")&gt; 
&lt;cfset ImageAddBorder(myImage,20,"","wrap")&gt; 
&lt;cfset ImageWrite(myImage,"testMyImage.jpg")&gt; 
&lt;img src="testMyImage.jpg"/&gt;</pre>
<div xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" class="fignone"><img alt="An image showing a source image on the left and the image with a tiled border on the right" id="im_image_border" src="images/im_image_border.png" /></div><p>For examples of other border types, see the <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-796a.html" target="_self">ImageAddBorder</a> function in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec12207-7fdb" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fdb"><!-- --></a><h2 class="topictitle2">Creating text images</h2><div><p>You can create two types of text images:</p>
<ul><li><p>A CAPTCHA image, in which ColdFusion randomly distorts
the text</p>
</li>
<li><p>A text image, in which you control the text attributes</p>
</li>
</ul>
</div><div id="WSc3ff6d0ea77859461172e0811cbec12207-7feb" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7feb"><!-- --></a><h3 class="topictitle3">Creating a CAPTCHA image</h3><div><p>You use the <samp class="codeph">captcha</samp> action of the <samp class="codeph">cfimage</samp> tag
to create a distorted text image that is human-readable but not
machine readable. When you create a CAPTCHA image, you specify the
text that is displayed in the CAPTCHA image; ColdFusion randomly
distorts the text. You can specify the height and width of the text
area, which affects the spacing between letters, the font size,
the fonts to use for the CAPTCHA text, and the level of difficulty,
which affects readability. Do not use spaces in the text string
specified for the <samp class="codeph">text</samp> attribute: users cannot detect
the spaces as part of the CAPTCHA image.</p>
<p>The following example shows how to write a CAPTCHA image directly
to the browser.</p>
<pre>&lt;!--- This example shows how to create a CAPTCHA image with the text "rEadMe" and write the 
    image directly to the browser. ---&gt; 
&lt;cfimage action="captcha" fontSize="25" width="162" height="75" text="rEadMe" 
    fonts="Verdana,Arial,Courier New,Courier"&gt;</pre>
<div class="note"><span class="notetitle">Note:  </span>For the CAPTCHA image to display, the <samp class="codeph">width</samp> value
must be greater than: <samp class="codeph">fontSize</samp> times the number
of characters specified in <samp class="codeph">text </samp>times 1.08. In
this example, the minimum <samp class="codeph">width</samp> is 162.</div>
<p>ColdFusion 9 supports CAPTCHA images in PNG format only.</p>
<div class="note"><span class="notetitle">Note:  </span>If you specify the <samp class="codeph">destination</samp> attribute
to write CAPTCHA images to files, use unique names for the CAPTCHA
image files so that when multiple users access the CAPTCHA images,
the files are not overwritten.</div>
<p>The following example shows how to create CAPTCHA images with
a high level of text distortion.</p>
<pre>&lt;!--- Use the GetTickCount function to generate unique names for the CAPTCHA files. ---&gt; 
&lt;cfset tc = GetTickCount()&gt; 
&lt;!--- Set the difficulty to "high" for a higher level of text distortion. ---&gt; 
&lt;cfimage action="captcha" fontSize="15" width="180" height="50" text="rEadMe" 
    destination="readme#tc#.png" difficulty="high"&gt;</pre>
<p>For a detailed example, see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7935.html">Using CAPTCHA to verify membership</a>.</p>
<p>The following image shows three CAPTCHA images with low, medium,
and high levels of difficulty, respectively:</p>
<div xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" class="fignone"><a href="#" onclick="return showHideImage('im_captcha_all', this);">View full size graphic</a><img alt="" id="im_captcha_all" src="images/im_captcha_all.png" /></div></div></div><div id="WSc3ff6d0ea77859461172e0811cbec12207-7fe3" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fe3"><!-- --></a><h3 class="topictitle3">Using the ImageDrawText function</h3><div><p>To create a text image by using the <samp class="codeph">ImageDrawText</samp> function,
specify the text string and the x and y coordinates for the location
of the beginning of the text string. You can draw the text on an
existing image or on a blank image, as the following examples show:</p>
<pre>&lt;!--- This example shows how to draw a text string on a blank image. ---&gt; 
&lt;cfset myImage=ImageNew("",200,100)&gt; 
&lt;cfset ImageDrawText(myImage, "Congratulations!",10,50)&gt; 
&lt;cfimage source="#myImage#" action="write" destination="myImage.png" overwrite="yes"&gt; 
&lt;img src="myImage.png"&gt; 
 
&lt;!--- This example shows how to draw a text string on an existing image.  
---&gt; 
&lt;cfset myImage2=ImageNew("../cfdocs/images/artgallery/jeff01.jpg")&gt; 
&lt;cfset ImageDrawText(myImage2,"Congratulations!",10,50)&gt; 
&lt;cfimage source="#myImage2#" action="write" destination="myImage2.png" overwrite="yes"&gt; 
&lt;img src="myImage2.png"&gt;</pre>
<p>In the previous examples, the text is displayed in the default
system font and font size. To control the appearance of the text,
you specify a collection of text attributes, as the following example
shows:</p>
<pre>&lt;cfset attr = StructNew()&gt; 
&lt;cfset attr.style="bolditalic"&gt; 
&lt;cfset attr.size=20&gt; 
&lt;cfset attr.font="verdana"&gt; 
&lt;cfset attr.underline="yes"&gt;</pre>
<p>To apply the text attributes to the text string, include the
attribute collection name in the <samp class="codeph">ImageDrawText</samp> definition.
In the following examples, the <samp class="codeph">"attr"</samp> text attribute
collection applies the text string <samp class="codeph">"Congratulations!"</samp>:</p>
<pre>... 
&lt;cfset ImageDrawText(myImage,"Congratulations!",10,50,attr)&gt;</pre>
<p>To change the color of the text, use the <samp class="codeph">ImageSetDrawingColor</samp> function. This
function controls the color of all subsequent drawing objects on
an image. In the following example, two lines of text, “Congratulations!”
and “Gabriella”, inherit the color magenta.</p>
<pre>&lt;!--- This example shows how to draw a text string on a blank image. ---&gt; 
&lt;cfset myImage=ImageNew("../cfdocs/images/artgallery/jeff01.jpg")&gt; 
<strong>&lt;cfset ImageSetDrawingColor(myImage,"magenta")&gt;</strong> 
&lt;cfset attr = StructNew()&gt; 
&lt;cfset attr.style="bolditalic"&gt; 
&lt;cfset attr.size=20&gt; 
&lt;cfset attr.font="verdana"&gt; 
&lt;cfset attr.underline="yes"&gt; 
&lt;cfset ImageDrawText(myImage,"Congratulations!",10,50,attr)&gt; 
&lt;cfset ImageDrawText(myImage,"Gabriella",50,125,attr)&gt; 
&lt;cfimage source="#myImage#" action="write" destination="myImage.jpg" overwrite="yes"&gt; 
&lt;img src="myImage.jpg"/&gt;</pre>
<p>For a list of valid named colors, see the <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7945.html" target="_self">cfimage</a> tag in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec12207-7fdd" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fdd"><!-- --></a><h2 class="topictitle2">Drawing lines and shapes</h2><div><p>ColdFusion provides several functions for drawing lines
and shapes. For shapes, the first two values represent the x and
y coordinates, respectively, of the upper-left corner of the shape.
For simple ovals and rectangles, the two numbers following the coordinates
represent the width and height of the shape in pixels. For a line,
the values represent the x and y coordinates of the start point
and end point of the line, respectively. To create filled shapes,
set the <samp class="codeph">filled</samp> attribute to true. The following
example shows how to create an image with several drawing objects:</p>
<pre>&lt;!--- Create an image that is 200-pixels square. ---&gt; 
&lt;cfset myImage=ImageNew("",200,200)&gt; 
&lt;!--- Draw a circle that is 100 pixels in diameter. ---&gt; 
&lt;cfset ImageDrawOval(myImage,40,20,100,100)&gt; 
&lt;!--- Draw a filled rectangle that is 40 pixels wide and 20 pixels high. 
---&gt; 
&lt;cfset ImageDrawRect(myImage,70,50,40,20,true)&gt; 
&lt;!--- Draw a 100-pixel square. ---&gt; 
&lt;cfset ImageDrawRect(myImage,40,40,100,100)&gt; 
&lt;!--- Draw two lines. ---&gt; 
&lt;cfset ImageDrawLine(myImage,130,40,100,200)&gt; 
&lt;cfset ImageDrawLine(myImage,50,40,100,200)&gt; 
&lt;!--- Write the ColdFusion image to a file. ---&gt; 
&lt;cfimage source="#myImage#" action="write" destination="testMyImage.gif" overwrite="yes"&gt; 
&lt;img src="testMyImage.gif"/&gt;</pre>
<div class="note"><span class="notetitle">Note:  </span>To draw a sequence of connected lines, use the <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7957.html" target="_self">ImageDrawLines</a></samp> function. For
more information, see the CFML Reference.</div>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec12207-7fde" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fde"><!-- --></a><h2 class="topictitle2">Setting drawing controls</h2><div><p>ColdFusion provides several functions for controlling the
appearance of drawing objects. As shown in the <samp class="codeph">ImageDrawText</samp> example,
you use the <samp class="codeph">ImageSetDrawingColor</samp> function to define
the color of text in an image. This function also controls the color
of lines and shapes. To control line attributes (other than color),
use the <samp class="codeph">ImageSetDrawingStroke</samp> function. The <samp class="codeph">ImageSetDrawingStroke</samp> function
uses a collection to define the line attributes.</p>
<p>Drawing controls apply to all subsequent drawing functions in
an image; therefore, order is important. In the following example,
the drawing stroke attributes defined in the attribute collection
apply to the square and the two lines. Similarly, the color green
applies to the rectangle and the square, while the color red applies
only to the two lines. You can reset a drawing control as many times as
necessary within an image to achieve the desired effect.</p>
<pre>&lt;!--- Create an attribute collection for the drawing stroke. ---&gt; 
&lt;cfset attr=StructNew()&gt; 
&lt;cfset attr.width="4"&gt; 
&lt;cfset attr.endcaps="round"&gt; 
&lt;cfset attr.dashPattern=ArrayNew(1)&gt; 
&lt;cfset dashPattern[1]=8&gt; 
&lt;cfset dashPattern[2]=6&gt; 
&lt;cfset attr.dashArray=dashPattern&gt; 
&lt;cfset myImage=ImageNew("",200,200)&gt; 
&lt;cfset ImageDrawOval(myImage,40,20,100,100)&gt; 
&lt;!--- Set the drawing color to green for all subsequent drawing functions. ---&gt; 
<strong>&lt;cfset ImageSetDrawingColor(myImage,"green")&gt;</strong> 
&lt;cfset ImageDrawRect(myImage,70,50,40,20,true)&gt; 
&lt;!--- Apply the attribute collection to all subsequent shapes and lines in the image. ---&gt; 
<strong>&lt;cfset ImageSetDrawingStroke(myImage,attr)&gt;</strong> 
&lt;cfset ImageDrawRect(myImage,40,40,100,100)&gt; 
&lt;!--- Set the drawing color to red for all subsequent drawing functions. ---&gt; 
<strong>&lt;cfset ImageSetDrawingColor(myImage,"red")&gt;</strong> 
&lt;cfset ImageDrawLine(myImage,130,40,100,200)&gt; 
&lt;cfset ImageDrawLine(myImage,50,40,100,200)&gt; 
&lt;cfimage source="#myImage#" action="write" destination="testMyImage.gif" overwrite="yes"&gt; 
&lt;img src="testMyImage.gif"/&gt;</pre>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec12207-7fdc" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fdc"><!-- --></a><h2 class="topictitle2">Resizing images</h2><div><p>ColdFusion makes it easy to resize images. You can reduce
the file size of an image by changing its dimensions, enforce uniform
sizes on images, and create thumbnail images. The following table
describes the ways to resize images in ColdFusion:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e90452"><p>Task</p>
</th>
<th valign="top" width="NaN%" id="d17e90455"><p>Functions and actions</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e90452 "><p>Resize an image</p>
</td>
<td valign="top" width="NaN%" headers="d17e90455 "><p><samp class="codeph">ImageResize</samp> function, or
the <samp class="codeph">resize</samp> action of the <samp class="codeph">cfimage</samp> tag</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e90452 "><p>Resize images so that they fit in a defined
square or rectangle and control the interpolation method</p>
</td>
<td valign="top" width="NaN%" headers="d17e90455 "><p><samp class="codeph">ImageScaleToFit</samp> function</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e90452 "><p>Resize an image and control the interpolation
method</p>
</td>
<td valign="top" width="NaN%" headers="d17e90455 "><p><samp class="codeph">ImageResize</samp> function</p>
</td>
</tr>
</tbody>
</table>
</div>
</div><div id="WSc3ff6d0ea77859461172e0811cbec12207-7ff0" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7ff0"><!-- --></a><h3 class="topictitle3">Using the cfimage tag resize action</h3><div><p>Use the <samp class="codeph">cfimage</samp> tag <samp class="codeph">resize</samp> action
to resize an image to the specified height and width. You can specify
the height and width in pixels or as a percentage of the original
dimensions of the image. To specify a percentage, include the percent
symbol (%) in the height and width definitions.</p>
<pre>&lt;!--- This example shows how to specify the height and width of an image in pixels. ---&gt; 
&lt;cfimage source="../cfdocs/images/artgallery/jeff01.jpg" action="resize" width="100" 
    height="100" destination="jeff01_sm.jpg"&gt; 
&lt;!--- This example shows how to specify the height and width of an image as percentages. ---&gt; 
&lt;cfimage source="../cfdocs/images/artgallery/jeff02.jpg" action="resize" width="50%" 
    height="50%" destination="jeff02_sm.jpg"&gt; 
 
&lt;!--- This example shows how to specify the height of an image in pixels and its width as a 
    percentage. Notice that this technique can distort the image. ---&gt; 
&lt;cfimage source="../cfdocs/images/artgallery/jeff03.jpg" action="resize" width="50%" 
    height="100" destination="jeff03_sm.jpg" overwrite="yes"&gt;</pre>
<p>The <samp class="codeph">cfimage</samp> tag requires that you specify both
the height and the width for the <samp class="codeph">resize</samp> action.</p>
<p>The <samp class="codeph">cfimage</samp> tag <samp class="codeph">resize</samp> action
uses the <samp class="codeph">highestQuality</samp> interpolation method for
the best quality image (at the cost of performance). For faster
display, use the <samp class="codeph">ImageResize</samp> function or the <samp class="codeph">ImageScaleToFit</samp> function.</p>
</div></div><div id="WSc3ff6d0ea77859461172e0811cbec12207-7fe1" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fe1"><!-- --></a><h3 class="topictitle3">Using the ImageResize function</h3><div><p>The <samp class="codeph">ImageResize</samp> function is like the <samp class="codeph">cfimage</samp> tag <samp class="codeph">resize</samp> action.
To ensure that the resized image is proportional, specify a value
for the height or width and enter a blank value for the other dimension:</p>
<pre>&lt;!--- This example shows how to resize an image to 50% of original size and resize it 
    proportionately to the new width. The height value is blank. ---&gt;  
&lt;cfset myImage=ImageNew("http://www.google.com/images/logo_sm.gif")&gt; 
<strong>&lt;cfset ImageResize(myImage,"50%","")&gt;</strong> 
&lt;!--- Save the modified image to a file. ---&gt; 
&lt;cfimage source="#myImage#" action="write" destination="test_myImage.jpeg" overwrite="yes"&gt; 
&lt;!--- Display the source image and the resized image. ---&gt; 
&lt;img src="http://www.google.com/images/logo_sm.gif"/&gt; 
&lt;img src="test_myImage.jpeg"/&gt;</pre>
<p>The <samp class="codeph">ImageResize</samp> function also lets you specify
the type of interpolation used to resize the image. Interpolation
lets you control the trade-off between performance and image quality.
By default, the <samp class="codeph">ImageResize</samp> function uses the <samp class="codeph">highestQuality</samp> interpolation
method. To improve performance (at the cost of image quality), change
the interpolation method. Also, you can set the blur factor for
the image. The default value is 1 (not blurred). The highest blur
factor is 10 (very blurry). The following example shows how to resize
an image using the <samp class="codeph">highPerformance</samp> form of interpolation
with a blur factor of 10:</p>
<pre>&lt;cfset myImage=ImageNew("../cfdocs/images/artgallery/aiden01.jpg")&gt; 
<strong>&lt;cfset ImageResize(myImage,"","200%","highPerformance", 10)&gt;</strong> 
&lt;cfimage action="writeToBrowser" source="#myImage#"&gt;</pre>
<div class="note"><span class="notetitle">Note:  </span>Increasing the blur factor reduces performance.</div>
<p>For a complete list of interpolation methods, see <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7961.html" target="_self">ImageResize</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div></div><div id="WSc3ff6d0ea77859461172e0811cbec12207-7fe0" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fe0"><!-- --></a><h3 class="topictitle3">Using the ImageScaleToFit function</h3><div><p>To create images of a uniform size, such as thumbnail images
or images displayed in a photo gallery, use the <samp class="codeph">ImageScaleToFit</samp> function.
You specify the area of the image in pixels. ColdFusion resizes
the image to fit the square or rectangle and maintains the aspect
ratio of the source image. Like the <samp class="codeph">ImageResize</samp> function,
you can specify the interpolation, as the following example shows:</p>
<pre>&lt;!--- This example shows how to resize an image to a 100-pixel square, while maintaining the aspect ratio of the source image. ---&gt; 
&lt;cfimage source="../cfdocs/images/artgallery/jeff05.jpg" name="myImage" action="read"&gt; 
&lt;!--- Turn on antialiasing. ---&gt; 
&lt;cfset ImageSetAntialiasing(myImage)&gt; 
<strong>&lt;cfset ImageScaleToFit(myImage,100,100,"mediumQuality")&gt;</strong> 
&lt;!--- Display the modified image in a browser. ---&gt; 
&lt;cfimage source="#myImage#" action="writeToBrowser"&gt;</pre>
<p>To fit an image in a defined rectangular area, specify the width
and height of the rectangle, as the following example shows:</p>
<pre>&lt;!--- This example shows how to resize an image to fit in a rectangle that is 200 pixels 
    wide and 100 pixels high, while maintaining the aspect ratio of the source image. ---&gt; 
&lt;cfimage source="../cfdocs/images/artgallery/jeff05.jpg" name="myImage"&gt; 
&lt;!--- Turn on antialiasing. ---&gt; 
&lt;cfset ImageSetAntialiasing(myImage)&gt; 
<strong>&lt;cfset ImageScaleToFit(myImage,200,100)&gt;</strong> 
&lt;!--- Display the modified image in a browser. ---&gt; 
&lt;cfimage source="#myImage#" action="writeToBrowser"&gt;</pre>
<p>In this example, the width of the resulting image is less than
or equal to 200 pixels and the height of the image is less than
or equal to 100 pixels.</p>
<p>Also, you can specify just the height or just the width of the
rectangle. To do so, specify an empty string for the undefined dimension.
The following example resizes the image so that the width is exactly
200 pixels and the height of the image is proportional to the width:</p>
<pre>&lt;!--- This example shows how to resizes an image so that it is 200 pixels wide, while 
    maintaining the aspect ratio of the source image. The interpolation method is set to 
    maximize performance (which reduces image quality). ---&gt; 
&lt;cfimage source="../cfdocs/images/artgallery/jeff05.jpg" name="myImage"&gt; 
&lt;!--- Turn on antialiasing. ---&gt; 
&lt;cfset ImageSetAntialiasing(myImage)&gt; 
<strong>&lt;cfset ImageScaleToFit(myImage,200,"","highestPerformance")&gt;</strong> 
&lt;!--- Display the modified image in a browser. ---&gt; 
&lt;cfimage source="#myImage#" action="writeToBrowser"&gt;</pre>
<p>For more information, see <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7975.html" target="_self">ImageScaleToFit</a> in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">CFML Reference</i>.</p>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec22c24-793b" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-793b"><!-- --></a><h2 class="topictitle2">Creating watermarks</h2><div><p>A <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">watermark</i> is a semitransparent image that is superimposed
on another image. One use for a watermark is for protecting copyrighted
images. To create a watermark in ColdFusion, you use the <samp class="codeph">ImageSetDrawingTransparency</samp> function
with the <samp class="codeph">ImagePaste</samp> function. You can create a
watermark image in one of three ways:</p>
<ul><li><p>Create a watermark from an existing image file. For example,
you can use a company logo as a watermark.</p>
</li>
<li><p>Create a text image in ColdFusion and apply the image as
a watermark. For example, you can create a text string, such as <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">Copyright</i> or <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">PROOF</i> and
apply it to all the images in a photo gallery.</p>
</li>
<li><p>Create a drawing image in ColdFusion and use it as a watermark.
For example, you can use the drawing functions to create a green
check mark and apply it to images that have been approved.</p>
</li>
</ul>
</div><div id="WSc3ff6d0ea77859461172e0811cbec12207-7fe8" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fe8"><!-- --></a><h3 class="topictitle3">Creating a watermark from an image file</h3><div><p>The following example shows how to create a watermark from
an existing GIF image located on a website:</p>
<pre>&lt;!--- This example shows how to create a watermark from an existing image. ---&gt; 
&lt;!--- Create two ColdFusion images from existing JPEG files. ---&gt; 
&lt;cfimage source="../cfdocs/images/artgallery/raquel05.jpg" name="myImage"&gt; 
&lt;cfimage source="http://www.google.com/images/logo_sm.gif" name="myImage2"&gt; 
&lt;cfimage source="#myImage#" action="write" destination="logo.jpg" overwrite="yes"&gt; 
&lt;cfset ImageSetDrawingTransparency(myImage,50)&gt; 
&lt;!--- Paste myImage2 on myImage at the coordinates (0,0). ---&gt; 
&lt;cfset ImagePaste(myImage,myImage2,0,0)&gt; 
&lt;!--- Write the result to a file. ---&gt; 
&lt;cfimage source="#myImage#" destination="watermark.jpg" action="write" overwrite="yes"&gt; 
&lt;!--- Display the result. ---&gt; 
&lt;img src="watermark.jpg"/&gt;</pre>
</div></div><div id="WSc3ff6d0ea77859461172e0811cbec12207-7fd5" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fd5"><!-- --></a><h3 class="topictitle3">Creating a watermark from a text image</h3><div><p>The following example shows how to create a text image
in ColdFusion and use it as a watermark:</p>
<pre>&lt;!--- Create a ColdFusion image from an existing JPG file. ---&gt; 
&lt;cfset myImage=ImageNew("../cfdocs/images/artgallery/raquel05.jpg")&gt; 
&lt;!--- Scale the image to fit in a 200-pixel square, maintaining the aspect ratio of the 
    source image. ---&gt; 
    &lt;cfset ImageScaleToFit(myImage,200,200)&gt; 
&lt;!--- Set the drawing transparency to 75%. ---&gt; 
    &lt;cfset ImageSetDrawingTransparency(myImage,75)&gt; 
&lt;!--- Create a ColdFusion image from scratch. ---&gt; 
&lt;cfset textImage=ImageNew("",150,140)&gt; 
&lt;!--- Set the drawing color to white. ---&gt; 
    &lt;cfset ImageSetDrawingColor(textImage,"white")&gt; 
&lt;!--- Create a collection of text attributes. ---&gt; 
        &lt;cfset attr=StructNew()&gt; 
        &lt;cfset attr.size=40&gt; 
        &lt;cfset attr.style="bold"&gt; 
        &lt;cfset attr.font="Arial"&gt; 
&lt;!--- Turn on antialiasing. ---&gt; 
&lt;cfset ImageSetAntialiasing(textImage)&gt; 
&lt;!--- Draw the text string "PROOF" on the ColdFusion image. Apply the text attributes that 
    you specified. ---&gt; 
&lt;cfset ImageDrawText(textImage,"PROOF",1,75,attr)&gt; 
&lt;!--- Rotate the text image by 30 degrees. ---&gt; 
    &lt;cfset ImageRotate(textImage,30)&gt; 
&lt;!--- Scale the image to fit in a 200-pixel square, maintaining the aspect ratio of the 
    source image. ---&gt; 
    &lt;cfset ImageScaleToFit(textImage,200,200)&gt; 
&lt;!--- Paste the text image onto myImage. ---&gt; 
&lt;cfset ImagePaste(myImage,textImage,0,0)&gt; 
&lt;!--- Write the combined image to a file. ---&gt; 
&lt;cfimage source="#myImage#" action="write" destination="test_watermark.jpg" overwrite="yes"&gt; 
&lt;!--- Display the image. ---&gt; 
&lt;img src="test_watermark.jpg"/&gt;</pre>
</div></div><div id="WSc3ff6d0ea77859461172e0811cbec12207-7fe7" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec12207-7fe7"><!-- --></a><h3 class="topictitle3">Creating a watermark from a ColdFusion drawing</h3><div><p>The following example shows how to draw an image in ColdFusion
and use it as a watermark. You use the <samp class="codeph">ImageSetDrawingStroke</samp> function
to define the attributes of lines and shapes you create with drawing
functions and the <samp class="codeph">ImageSetDrawingColor</samp> function
to define the color.</p>
<pre>&lt;!--- This example shows how to draw a red circle with a line through it and use it as a 
    watermark. ---&gt; 
&lt;!--- Use the ImageNew function to create a ColdFusion image that is 201x201 pixels. ---&gt; 
&lt;cfset myImage=ImageNew("",201,201)&gt; 
&lt;!--- Set the drawing transparency of the image to 30%. ---&gt; 
<strong>&lt;cfset ImageSetDrawingTransparency(myImage,30)&gt;</strong> 
&lt;!--- Set the drawing color to red. ---&gt; 
&lt;cfset ImageSetDrawingColor(myImage,"red")&gt; 
&lt;!--- Create an attribute collection that sets the line width to ten pixels. ---&gt; 
    &lt;cfset attr=StructNew()&gt; 
    &lt;cfset attr.width = 10&gt; 
&lt;!--- Apply the attribute collection to the ImageSetDrawingStroke function. ---&gt; 
    &lt;cfset ImageSetDrawingStroke(myImage,attr)&gt; 
&lt;!--- Draw a diagonal line starting at (40,40) and ending at (165,165) on myImage. The drawing 
    attributes you specified are applied to the line. ---&gt; 
    &lt;cfset ImageDrawLine(myImage,40,40,165,165)&gt; 
&lt;!--- Draw a circle starting at (5,5) and is 190 pixels high and 190 pixels wide. The drawing 
    attributes you specified are applied to the oval. ---&gt; 
&lt;cfset ImageDrawOval(myImage,5,5,190,190)&gt; 
&lt;!--- Create a ColdFusion image from a JPEG file. ---&gt; 
&lt;cfimage source="../cfdocs/images/artgallery/raquel05.jpg" name="myImage2"&gt; 
&lt;!--- Scale the image to fit in a 200-pixel square, maintaining the aspect ratio of the 
    source image. ---&gt; 
&lt;cfset ImageScaleToFit(myImage2,200,200)&gt; 
&lt;!--- Paste the myImage2 directly over the myImage. ---&gt; 
&lt;cfset ImagePaste(myImage,myImage2,0,0)&gt; 
&lt;!--- Save the combined image to a file. ---&gt; 
&lt;cfimage source="#myImage#" action="write" destination="test_watermark.jpg" overwrite="yes"&gt; 
&lt;!--- Display the image in a browser. ---&gt; 
&lt;img src="test_watermark.jpg"/&gt;</pre>
</div></div></div>


<!-- BEGIN USER PREFERENCES -->
          <div id="userprefs">
          </div>
<!-- END USER PREFERENCES -->

          <div id="related">
            
            
            <div class="separator"><a href="#top"><img src="images/BTT.jpg" /></a>&#160;</div>
          </div>
          <div id="footer">
<!-- BEGIN IONCOMMENTS -->
            <div id="ionComHere">
            </div>
<!-- END IONCOMMENTS -->


            <p id="creativecommons"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text"><img id="creativecommons_img" src="images/CC.png" alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" /></a>&nbsp;Twitter™ and Facebook posts are not covered under the terms of Creative Commons.</p>
          </div>
</td>
<td width="10px"></td>
<td id="inner_rightcolumn">

</td></tr></table>
      </div>
<!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec12207-7fe4.html" title="Compressing JPEG images"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec12207-7fea.html" title="Writing images to the browser"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WSc3ff6d0ea77859461172e0811cdd76f064-8000.html"><b>Working with Documents, Charts, and Reports</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7985.html"><b>Creating and Manipulating ColdFusion Images</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
<!-- END CONTENT WRAPPER -->

</td>
<td id="col3">
    <div>
        <img src="images/adobe-lq.png" />
    </div>
</td>
</tr>
</table>
    </div>
<!-- END PAGE CONTENT WRAPPER -->
<script type="text/javascript">
<!--[CDATA[
scrollToNameAnchor();
// ]]-->
</script> 
<!--
    Description:
    This file generates the link to product support in the top right corner
-->

<style>
#menutop{
    position:absolute;
    top:4px;
    right:24px;
    width:auto;    
    font-size:11px;
    color:#fff;
    text-align:right;
}
#menutop a{
    color:#fff;
}
#menutop a:hover{
        text-decoration:underline;
}
</style>  
  
  
  
  
<div id="productmenu">
<!--googleoff: index-->
  <div id="menutop">


<script language=javascript type='text/javascript'>
    // darken menu text for products with light backgrounds
    var path = document.location.href.toLowerCase();
    if (path.indexOf("/acrobat/")           	> 0 ||
        path.indexOf("/acrobat.com/")       	> 0 ||
        path.indexOf("/acrobatConnectPro/") 	> 0 ||
        path.indexOf("/connect/")           	> 0 ||
        path.indexOf("/livecycledataserviceses/") > 0 ||
        path.indexOf("/muse/")         	> 0 ||
	path.indexOf("/presenter/")         	> 0 ||
        path.indexOf("/scene7/")            	> 0 ||
        path.indexOf("/flashmediaserver/")  	> 0 ||
        path.indexOf("/wave/")              	> 0 )
    {
        document.write('<style>#menutop a{color:#505050}</style>');
    }
    if (typeof('terms_AHV_PRODUCT_SUPPORT') != "undefined" && ! use_robohelp_behavior ){      
        if (path.indexOf("/muse/") > -1 ){
            var supportlink = '<a href="http://muse.adobe.com/support.html">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }else{
            var supportlink = '<a href="http://adobe.com/support">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }
        document.write( supportlink );
     }

</script> 

  </div>
<!--googleon: index-->
</div>



<style>
#online-privacy-policy{ 
    margin:10px 40px; 
    font-size:11px;
}
</style>

<p id="online-privacy-policy">
<script language="javascript">
var pageLoc = "en_US";
var metaElements = document.all ?
document.all.tags('meta') :
document.getElementsByTagName ?
document.getElementsByTagName ('meta') : new Array();
for (var m = 0; m < metaElements.length; m++) {
	if (metaElements[m].name == "lang") {
		pageLoc = metaElements[m].content;
		break;
	}
}
var ptn = /(..)-(..)/;
if (ptn.test(pageLoc)) {
	var languageCode = pageLoc.replace(ptn, "$1");
	var countryCode = pageLoc.replace(ptn, "$2");
	pageLoc = languageCode + "_" + countryCode.toUpperCase();
}

var policyLoc = "en_US";
var policyText = "Online Privacy Policy";
var policyPath = "";
var policyArray=[
"da_DK", "Online fortrolighedserklæring",
"de_DE", "Online-Datenschutzrichtlinie",
"es_ES", "Política de confidencialidad en línea",
"fi_FI", "Yksityisyyttä koskeva Online-toimintaohjelma",
"fr_FR", "Confidentialité et sécurité",
"it_IT", "Informativa sulla privacy online",
"ja_JP", "プライバシーポリシー",
"ko_KR", "Adobe 온라인 개인정보 보호정책",
"pt_BR", "Política de Confidencialidade On-line", 
"zh_CN", "在线隐私政策",
"zh_TW", "線上隱私政策"
];
var legalLoc = "en_US";
var legalText = "Legal Notices";
var legalPath = legalLoc;
var legalArray=[
"ar_AE", "إشعارات قانونية",
"bg_BG", "Юридически бележки",
"cs_CZ", "Právní upozornění",
"da_DK", "Juridiske meddelelser",
"de_DE", "Rechtliche Hinweise",
"el_GR", "Σημειώσεις νομικού περιεχομένου",
"es_ES", "Avisos legales",
"et_EE", "Juriidilised teated",
"fi_FI", "Lakisääteiset ilmoitukset",
"fr_FR", "Mentions légales",
"he_IL", "הצהרות משפטיות",
"hr_HR", "Pravne napomene",
"hu_HU", "Jogi közlemények",
"it_IT", "Informazioni legali",
"ja_JP", "法律上の注意",
"ko_KR", "법적 고지 사항",
"lt_LT", "Teisinės pastabos",
"lv_LV", "Juridisks paziņojums",
"nb_NO", "Juridiske merknader",
"nl_NL", "Juridische kennisgevingen",
"pl_PL", "Informacje prawne",
"pt_BR", "Aspectos jurídicos",
"ro_RO", "Prevederi legale",
"ru_RU", "Юридическая информация",
"sk_SK", "Právne upozornenie",
"sl_SI", "Pravni pouk",
"sv_SE", "Upphovsrätt",
"tr_TR", "Yasal uyarılar",
"uk_UA", "Юридична інформація",
"zh_CN", "法律声明",
"zh_TW", "法律注意事項"
];

ruPolicy = "http://www.adobe.com/ru/misc/privacy.html";
trPolicy = "http://www.adobe.com/tr/misc/privacy.html";

// Bug 2846992: LOC: RUS, TUR: The link to "Online Privacy Policy" should include language, currently it is not appearing.
if (pageLoc == "ru_RU") {
	policyPath = "ru";
}
else if (pageLoc == "tr_TR") {
	policyPath = "tr";
}
for (var i = 0; i < policyArray.length; i+=2) {
	if (pageLoc == policyArray[i]) {
		policyLoc = pageLoc;
		policyText = policyArray[i+1];
		var ptn = /(..)_(..)/;
		if (ptn.test(policyLoc)) {
			var countryCode = policyLoc.replace(ptn, "$2");
			policyPath = countryCode.toLowerCase();
		}
		break;
	}
}

for (var i = 0; i < legalArray.length; i+=2) {
	if (pageLoc == legalArray[i]) {
		legalLoc = pageLoc;
		legalText = legalArray[i+1];
		legalPath = legalLoc;
		break;
	}
}
if(agt.indexOf("community help client") > -1 ){
	document.write('<a href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
}else{
	//Open the privacy policy in a new window
	document.write('<a target="_blank" href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a target="_blank" href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
} 
</script>
</p>



<!-- localfooter.ssi -->

<script type="text/javascript">
    var debug = (top.location.href.indexOf("debug=true") > -1);
</script>

<script language="javascript">
document.write('<scr'+'ipt ' +
               'src="/en_US/ssi/_pod.js" ' +
               'language="javascript" ' +
               'charset="UTF-8"> ' +
               '</scr'+'ipt>');
</script>


<script type="text/javascript">
//
//  Ethnio survey code
//
/*          DocumentID      EthnioID */
/*          -------------   -------- */
var ethnio=["/en_US/flash/cs/using/WSb03e830bd6f770ee6664507612436d7dede-8000.html", "87462",
            "/en_US/creativesuite/cs/using/WSe851854fd1e0856a-4b08a77612477f69f15-8000.html",  "10441",
            "/en_US/dreamweaver/cs/using/WSEE4C0148-A6F4-4bf5-9DEF-CE06AB026214a.html",  "57412"
 
    ];
                        
    for ( var i = 0; i < ethnio.length ; i = i+2 ){
        if ( document.location.href.indexOf( ethnio[i] ) > -1 ){ 
            var headID = document.getElementsByTagName("head")[0];         
            var ethnioScript = document.createElement('script');
            ethnioScript.type = 'text/javascript';
            ethnioScript.src = 'http://ethn.io/remotes/' + ethnio[i+1];        
            if ( debug ){
                alert ("Using Ethnio script: " + ethnioScript.src );
            }else{
                headID.appendChild(ethnioScript);
            }
        }
    }
</script>



<div style="display: none;">
<!-- SiteCatalyst -->
<script language="JavaScript" type="text/javascript"><!--
var s_code=' ';
var s_docHost = window.location.hostname.toLowerCase();
var s_docURL = window.location.pathname.toLowerCase();
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
if (s_docHost.indexOf(".corp.adobe") != -1 || s_docHost.indexOf("stage.") != -1 || s_docHost.indexOf(".dev.adobe") != -1 || s_docHost.indexOf("staging.") != -1) scJsHost="";
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/omniture_s_code.js' type='text/javascript'%3E%3C/script%3E"));
//--></script>
<script type="text/javascript"><!--
var s_accountName;
s_server="www.adobe.com static content pages";
if (!window.s_account) s_accountName="mxmacromedia";
else s_accountName=window.s_account;

if (window.s_docURL.indexOf("/designcenter/") != -1)
  s_channel="Adobe Design Center";	
else if ((window.s_docHost.indexOf("labs.adobe") != -1) ||
(window.s_docHost.indexOf("labs-staging.") != -1))
  s_channel="Labs";
else if (window.s_docHost.indexOf("help.adobe.com") != -1) {
  s_channel="Support Help.adobe.com";
  if (window.s_docURL.indexOf("/en_us/") == -1) {
    s_docURLArray=s_docURL.split('/');
    s_pageName="http://help.adobe.com/"+s_docURLArray[1]+"/"+ s_docURLArray[2]+"/"+s_docURLArray[3];
    s_prop23="http://help.adobe.com"+window.location.pathname;
  }
}
else if (window.s_docHost.indexOf("kb2.adobe.com") != -1) {
  s_channel="Support Knowledgebase";
  s_prop23="http://kb2.adobe.com"+s_docURL+":";
  if (typeof(omtrProductList) != 'undefined' && omtrProductList.length > 0)
 {
    s_prop23=s_prop23+omtrProductList;
  }
}
else if (window.s_docHost.indexOf("resellers.adobe.com") != -1) {
		var s_pageName=document.getElementsByTagName("title")[0].text;
}

if (!window.scMMInclude) {
	var s_wd=window,s_tm=new Date;
	if(s_code!=' '){
		s_code=s_dc(s_accountName);
		if(s_code)document.write(s_code)
	} 
} else {
	s_wds(s_accountName);s_ca(s_accountName); 
}	

function sendAnalyticsEvent(str){var ns=s_accountName;if(str!=null)ns+=","+str;void(s_gs(ns));}
function sendLinkEvent(accnt,lnkname,type){
accnt=s_accountName;s_linkType=type;s_lnk=true;s_linkName=lnkname;void(s_gs(accnt));}
//--></script>
<noscript><img src="http://stats.adobe.com/b/ss/mxmacromedia/1/H.15-XELvs/0?pageName=http%3A//www.adobe.com%3A%20noscript&ch=http%3A//www.adobe.com%3A%20noscript&g=http%3A//www.adobe.com" height="1" width="1" border="0" alt="" /></noscript>
<!-- End SiteCatalyst -->
</div>

<script language="JavaScript" type="text/javascript">//<![CDATA[
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/atm/s_code_www.js' type='text/javascript'%3E%3C/script%3E"));
//]]></script>
<script type="text/javascript">//<![CDATA[
if(s_adobe){	
	s_adobe.server="www.adobe.com Static Content pages";
	/* Set pageName */
	s_adobe.s_URL="adobe.com"+((location.pathname.charAt(0)=='/')?location.pathname:'/'+location.pathname);
	if (s_adobe.s_URL.substring(s_adobe.s_URL.lastIndexOf('/')+1)=="") s_adobe.s_URL=s_adobe.s_URL+"index.html";
	s_adobe.s_URLSplit=s_adobe.s_URL.split("/");
	s_adobe.pageName=s_adobe.s_URLSplit.join(":");

	/* Set prop4 to language-locale */
	var s_meta=document.getElementsByTagName('meta'); 
      for (i=0; i<s_meta.length; i++) { 
        if (s_meta[i].getAttribute("http-equiv") == "Content-Language") { 
          s_adobe.prop4=s_meta[i].getAttribute("content"); 
	    s_adobe.prop4=s_adobe.prop4.replace(/\s+/g,'');
        } 
      } 
	s_adobe.t()
}
//]]></script>








  </body>
</html>