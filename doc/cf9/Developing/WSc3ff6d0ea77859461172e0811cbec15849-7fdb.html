<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="lang" content="en-us" />
    <meta name="area" content="livedocs" />
    <title>Adobe&#160;ColdFusion&#160;9 * Developing an event gateway application</title>
    <link rel="shortcut icon" href="images/ColdFusionLinkIndicator.png" />
    <meta name="book" content="Developing&#160;ColdFusion 9 Applications" />
    <meta name="product" content="ColdFusion" />
    <meta name="keywords" content="" /><!--<PageMap><DataObject type="document"><Attribute name="product" value="ColdFusion"></Attribute><Attribute name="book" value="Developing&#160;ColdFusion 9 Applications"></Attribute><Attribute name="keywords" value=""></Attribute></DataObject></PageMap>-->
    
    <script type="text/javascript" language="Javascript" charset="UTF-8"><!--[CDATA[
        var currentTreeNode = "WSc3ff6d0ea77859461172e0811cbec15849-7fdb.html";
    document.cookie = "topicId=" + "WSc3ff6d0ea77859461172e0811cbec15849-7fdb.html";
// ]]--></script>
<script src="terms.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="help.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script>  <script src="utilities.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="event.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="treeview.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="toc.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script> <script src="swfobject.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>  <script src="booklist.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>
<script type="text/javascript">
<!--[CDATA[
var topictype = "topic";
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
  var linkId = document.createElement("link");
  linkId.href = "content-ie6.css";
  linkId.rel = "stylesheet";
  linkId.type = "text/css";
  headId.appendChild(linkId);
}
function initRoboHelpDOM() {
  if (use_chm_behavior) {
    hideElement("search");
  }
  if (use_robohelp_behavior) {
    hideElement("search");
    hideElement("productmenu");
    //hideElement("notyourversion");
  }
  if(!use_chc_behavior) {
    //document.getElementById("notyourversion").style.display = "inline";;
  }
}
var dirname = location.pathname.match( /.*\// );    
function setSearchUserPref(){
  if ( document.cookie.indexOf( "ah_searchpref" ) > -1 ) {
    if ( document.cookie.indexOf( dirname ) > 0 ) {
      document.search.gsa.checked = true ;
    }else{
      document.search.gsa.checked = false ;            
    }
  }
}
YAHOO.util.Event.onDOMReady(initRoboHelpDOM);
YAHOO.util.Event.onDOMReady(setSearchUserPref);
// ]]-->
</script>

<!-- ********************************** -->
<!-- START: ForeSee survey code in: /ssi/globalheader.ssi -->

<script type="text/javascript">
<!-- 
// Enable the survey for only English, German and Japanese
var agt=navigator.userAgent.toLowerCase();
if ( agt.indexOf("community help client") == -1 ){
    if ( document.location.href.indexOf("/en_US/") != -1 ){
        showSurvey();
//    }else if (document.location.href.indexOf("/de_DE/") != -1){
//         var locale="de";
//         showSurvey();
    }else if (document.location.href.indexOf("/ja_JP/") != -1 ){
         var locale="ja";
         showSurvey();
    }	
}

function showSurvey(){
	document.write('<script type="text/javascript" src="/js/foresee/foresee-trigger.js"><\/scr'+'ipt>');
}

// -->
</script>

<!-- END: ForeSee survey code -->
<!-- ******************************** -->




    <link rel="stylesheet" type="text/css" href="tree.css" />
    <link rel="stylesheet" type="text/css" href="content.css" />
    <link rel="stylesheet" type="text/css" href="localeSpecific.css" />
  </head>
  <body id="content_body" onload="window.focus();">
    <a name="top" shape="rect"><!--LeaveCommentHere--></a>
    
    <div id="mnemonic">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon" class="ColdFusion"><div class="banner"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html">Adobe&#160;ColdFusion&#160;9</a><span id="notyourversion">|&#160;
                    <a rel="nofollow" href="http://www.adobe.com/support/documentation/en/coldfusion/">Not your version?</a></span></div></div><!--googleon: index-->
    </div>
    
    <div id="searchbar">
<table id="searchbartable">
<tr>
<td colspan="2">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon"><div id="pdf"><img src="images/PDF.gif" width="16" height="16" /><a title="View Help PDF" href="coldfusion_9_dev.pdf">View Help PDF ( 23MB)</a></div></div><!--googleon: index-->
</td>
</tr>
</table>
    </div>

<!-- BEGIN SEARCH CONTENT -->
<form id="search" name="search" action="search.html" target="_self">
<script type="text/javascript">
<!--[CDATA[
if ( !use_chc_behavior ){
    if (typeof(terms_AHV_SEARCH_CONSTRAINT) != "undefined" && 
        terms_AHV_SEARCH_CONSTRAINT.length > 0 && 
        document.location.href.indexOf(".adobe.com") > 0){
        if ( typeof(terms_SEARCH_THIS_HELP_ONLY) != "undefined" && terms_SEARCH_THIS_HELP_ONLY == "ON" ) {
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                checked="checked" \
                value="1" ><\/input>'); 
                
        // Leave the "Search this help system only" checkbox unckecked
        }else{    
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                value="1" ><\/input>'); 
        }
        document.write('<span class="gsalabel">' + terms_AHV_SEARCH_CONSTRAINT + '<\/span><\/div>'); 
    }
    document.write('<input class="searchinput" \
        name="q" \
        id="q" \
        type="text" \
        maxlength="256" \
        value="' + terms_AHV_SEARCH_BUTTON + '" \
        onclick="clearSearch()"><\/input><input \
        type="button" \
        name="searchbutton" \
        class="searchbutton" \
        onclick="submit()"><\/input>'); 
} 
 
/* 
 * Start Functions 
 */
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}

// set search preferences
function setAHSearchPref(){
    if (document.search.gsa.checked == 1){
        setAHSearchCookie( dirname );
    }else{
        setAHSearchCookie( "community" );
    }
}

// Set search preferences cookie
function setAHSearchCookie( p ){
    // set cookie ah_searchpref with a value of the document path
    var expire=new Date();
    expire.setDate(expire.getDate()+365); // Cookie expires after 1 year (365 days) 
    document.cookie="ah_searchpref=" +p+ "; expires=" +expire.toGMTString()+ ";";
}

// ]]-->
</script> 
 </form>
<!-- END SEARCH CONTENT -->    



<!-- BEGIN PAGE CONTENT WRAPPER -->
    <div id="page_content_wrapper">
<!-- BEGIN PAGE WRAPPER -->
<table id="page_content_table">
<tr>

<td id="col2">
<!-- BEGIN CONTENT WRAPPER -->
<!-- BEGIN BREADCRUMBS -->

      
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-77f9.html" title="Configuring an event gateway instance"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec22c24-77d8.html" title="Deploying event gateways and applications"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WSc3ff6d0ea77859461172e0811cdd865267-8000.html"><b>Using External Resources</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-77e4.html"><b>Using Event Gateways</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
      <div id="content_wrapper">
<!-- BEGIN PAGE TITLE -->
        <h1>Developing an event gateway application</h1>
<!-- END PAGE TITLE -->
<!-- BEGIN IONCOMMENTCOUNT -->
        <div id="ionCount">
        </div>
<!-- END IONCOMMENTCOUNT -->
<table id="inner_content_table" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td>
          <div style="border-top:#ccc solid 1px;"><p> </p>
          </div>
<p id="chcPromo" style="display:none;">
<a id="chcLink" href="http://www.adobe.com/support/chc/">
<img id="chcImage" src="http://www.adobe.com/support/chc/GetMoreHelpFeatures.png"/>
</a>
</p>
<script type="text/javascript" language="javascript" charset="utf-8">
<!--
var cfgArray = [];
//cfgArray["Acrobat_10.0_Professional.helpcfg"] = "acrobatpro";
//cfgArray["Acrobat_10.0_Standard.helpcfg"] = "acrobatstd";
cfgArray["Lightroom_3.0.helpcfg"] = "lightroom";
cfgArray["PhotoshopElements_8.0_Win.helpcfg"] = "photoshopelements";
cfgArray["PhotoshopElements_8.0_Mac.helpcfg"] = "photoshopelementsmac";
cfgArray["PremiereElements_8.0_Win.helpcfg"] = "premiereelements";

//cfgArray["AfterEffects_10.0.helpcfg"] = "aftereffects";
//cfgArray["AIR.helpcfg"] = "air";
//cfgArray["ColdFusionBuilder.helpcfg"] = "coldfusion";
//cfgArray["Contribute_6.0.helpcfg"] = "contribute";
//cfgArray["DeviceCentral_3.0.helpcfg"] = "devicecentral";
//cfgArray["Dreamweaver_11.0.helpcfg"] = "dreamweaver";
//cfgArray["EncoreDVD_5.0.helpcfg"] = "encore";
//cfgArray["ExtensionManager_3.0.helpcfg"] = "extension";
//cfgArray["Fireworks_11.0.helpcfg"] = "fireworks";
//cfgArray["Flash_11.0.helpcfg"] = "flash";
//cfgArray["Flex_4.0.helpcfg"] = "flashbuilder";
//cfgArray["FlashCatalyst_1.0.helpcfg"] = "flashcatalyst";
//cfgArray["Illustrator_15.0.helpcfg"] = "illustrator";
//cfgArray["InCopy_7.0.helpcfg"] = "incopy";
//cfgArray["InDesign_7.0.helpcfg"] = "indesign";
//cfgArray["OnLocation_5.0.helpcfg"] = "onlocation";
//cfgArray["Photoshop_12.0.helpcfg"] = "photoshop";
//cfgArray["PremierePro_5.0.helpcfg"] = "premierepro";

function getLangName() {
    var lang = "en-us";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if (ptn.test(lang)) {
        var languageCode = lang.replace(ptn, "$1");
        var countryCode = lang.replace(ptn, "$2");
        lang = languageCode + "_" + countryCode.toUpperCase();
    }
    return lang;
}

function getCountryName() {
    var lang = "";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if ((ptn.test(lang)) && (lang != "en-us")) {
        var countryCode = lang.replace(ptn, "$2");
        return "/" + countryCode;
    }
    return "";
}

if ( (typeof(terms_HELPCFG) != 'undefined')  && (terms_HELPCFG.indexOf(".helpcfg") != -1) ) {
    var stage   = (document.location.href.indexOf(".stage.") != -1) ? 'stage.' : '';
    var baseUrl = 'http://www.' + stage + 'adobe.com';
    var refpage = document.location.href.replace(/#.*$/, '');
	
	if ((!use_robohelp_behavior) && (terms_HELPCFG.length > 0) && (typeof(cfgArray[terms_HELPCFG]) != 'undefined') && (cfgArray[terms_HELPCFG].length > 0)) {
		if (document.getElementById) { // DOM3 = IE5, NS6
			var newHref = baseUrl + getCountryName() + "/support/chc/" + "?helpcfg=http://help." + stage + "adobe.com/HelpCfg/" + getLangName() + "/" + terms_HELPCFG + "&url=" + refpage + "&product=" + cfgArray[terms_HELPCFG];
			var newSrc = baseUrl + getCountryName() + "/support/chc/GetMoreHelpFeatures.png";
			document.getElementById("chcPromo").style.display = "block";
			document.getElementById("chcLink").href = newHref;
			document.getElementById("chcImage").src = newSrc;
		}
	}
}

//-->
</script>



          <div id="minitoc"><div class="t"><div class="b"><div><ul id="minitoc-links"><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec15849-7ff5"><span class="topictitle1">Event gateway application models</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec15849-7ff3"><span class="topictitle1">Sending information to the event gateway</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec15849-7fd6"><span class="topictitle1">Developing event gateway listener CFCs</span>
</a></p><ul><li><p><a href="#WSf01dbd23413dda0e3c6234ad12013b4949e-7ffe"><span class="topictitle2">Listener methods</span>
</a></p></li><li><p><a href="#WSf01dbd23413dda0e3c6234ad12013b4949e-7ffd"><span class="topictitle2">The CFEvent structure</span>
</a></p></li><li><p><a href="#WSf01dbd23413dda0e3c6234ad12013b4949e-7ffc"><span class="topictitle2">Using persistent scopes in listener CFCs</span>
</a></p></li><li><p><a href="#WSf01dbd23413dda0e3c6234ad12013b4949e-7ffb"><span class="topictitle2">Application scope</span>
</a></p></li><li><p><a href="#WSf01dbd23413dda0e3c6234ad12013b4949e-7ffa"><span class="topictitle2">Client scope</span>
</a></p></li><li><p><a href="#WSf01dbd23413dda0e3c6234ad12013b4949e-7ff9"><span class="topictitle2">Session scope</span>
</a></p></li><li><p><a href="#WSf01dbd23413dda0e3c6234ad12013b4949e-7ff8"><span class="topictitle2">Debugging event gateway CFCs</span>
</a></p></li><li><p><a href="#WSf01dbd23413dda0e3c6234ad12013b4949e-7ff7"><span class="topictitle2">Example event gateway CFC</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-6216"><span class="topictitle1">Sending a message using the SendGatewayMessage function</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec22c24-77f5"><span class="topictitle1">Using the GatewayHelper object</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec15849-7ffd"><span class="topictitle1">Using the event gateway error log file</span>
</a></p></li></ul></div></div></div></div><div><p>All event gateway applications handle information. They
exchange event messages, and possibly other types of information,
with other resources. Event gateway applications require a listener
CFC to handle events that are sent to the event gateway. Event gateway
applications can also use the following code elements:</p>
<ul><li><p><samp class="codeph">SendGatewayMessage</samp> CFML functions to
send messages from outside the listener CFC (or, optionally, from
the CFC)</p>
</li>
<li><p>GatewayHelper objects</p>
</li>
<li><p>The eventgateway log file</p>
</li>
</ul>
</div>
<div id="WSc3ff6d0ea77859461172e0811cbec15849-7ff5" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7ff5"><!-- --></a><h2 class="topictitle2">Event gateway application models</h2><div><p>Event
gateway applications follow one or both of the following models: </p>
<dl><dt class="dlterm">Responder applications</dt>
<dd xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">Where event messages from external sources initiate a response
from a ColdFusion listener CFC</dd><p class="dlseparator"></p><dt class="dlterm">Initiator applications</dt>
<dd xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">Where a ColdFusion application generates event messages to
send out using the event gateway</dd><p class="dlseparator"></p></dl>
<p>Unlike other ColdFusion applications, responder applications
are request-free. They do not have CFM pages, just CFCs, and they
do not respond to HTTP requests. Instead, ColdFusion the event gateway
service deliver the event messages directly to the listener CFC,
and the CFC listener method returns any response directly to the
event gateway service. Applications that allow mobile phone owners
to get a news feed, check for text messages, or request other forms
of information follow this model.</p>
<p>Initiator applications are like most ColdFusion applications.
At some point, ColdFusion executes a CFM page in response to a request.
(The ColdFusion Administrator Scheduled Tasks page can initiate
the request.) ColdFusion sends a message to the event gateway when
the application calls a CFML <samp class="codeph">SendGatewayMessage</samp> function.
An application that uses SMS to notify customers when orders have
been shipped follows this model.</p>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec15849-7ff3" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7ff3"><!-- --></a><h2 class="topictitle2">Sending information to the event gateway</h2><div><p>A
ColdFusion application can send an outgoing message to the event
gateway in either of the following ways:</p>
<ul><li><p>In a <samp class="codeph">cfreturn</samp> tag in the listener CFC
listener method</p>
</li>
<li><p>By calling the ColdFusion <samp class="codeph">SendGatewayMessage</samp> function</p>
</li>
</ul>
<p>The first method is useful to automatically respond to incoming
messages. Some complex applications that respond to incoming messages
could use the <samp class="codeph">SendGatewayMessage</samp> function either
in place or in addition to the return value.</p>
<p>Some
event gateway types also use a GatewayHelper object to send information to
external resources. For example, the ColdFusion XMPP and Lotus Sametime instant
messaging event gateways provide a GatewayHelper object that can manage
buddy lists, and set configuration and status information on the
instant messaging server. For more information on the GatewayHelper
object, see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-77f5.html">Using the GatewayHelper object</a>. For more information on the instant
messaging GatewayHelper object, see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-77f4.html">Sample IM message handling application</a>.</p>
<p>The example code in <a href="WSf01dbd23413dda0e3c6234ad12013b4949e-7ff7.html">Example event gateway CFC</a> shows the use of a listener return value,
and indicates how event gateways can require different data in the return
structure to send equivalent messages.</p>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec15849-7fd6" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fd6"><!-- --></a><h2 class="topictitle2">Developing event gateway listener CFCs</h2><div><p>The listener CFC responds to event gateway messages. The
listener CFC uses, at a minimum, the following basic software elements:</p>
<ul><li><p>One or more listener methods</p>
</li>
<li><p>CFEvent structures that contain the messages</p>
</li>
</ul>
<p>Listener
CFCs can use ColdFusion persistent scopes to store data that must
be preserved over multiple CFC invocations or shared with other
CFML elements.</p>
</div><div id="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffe" class="nochunk"><a name="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffe"><!-- --></a><h3 class="topictitle3">Listener methods</h3><div><p>The ColdFusion event gateway
service calls one or more listener methods in the CFC to process
incoming messages. The number of listener methods that you must
write and their names depends on the event gateway. For example,
the ColdFusion SMS event gateway requires a single listener method,
which is typically named <samp class="codeph">onIncomingMessage</samp>. (You
can change the SMS event gateway listener method name in the event
gateway configuration file.) The ColdFusion XMPP IM event gateway
expects the listener CFC to have five methods: <samp class="codeph">onIncomingMessage</samp>, <samp class="codeph">onAddBuddyRequest</samp>, <samp class="codeph">onAddBuddyResponse</samp>, <samp class="codeph">onBuddyStatus</samp>,
and <samp class="codeph">onIMServerMessage</samp>. By default, if the event
gateway does not specify the method name, ColdFusion calls the <samp class="codeph">onIncomingMessage</samp> method
of the listener CFC. For the sake of consistency, Adobe recommends
you to use the <samp class="codeph">onIncomingMessage</samp> method for any
event gateway with a single listener method.</p>
<p>The listener method does the following:</p>
<ol><li><p>Takes a single parameter, a CFEvent structure. </p>
</li>
<li><p>Processes the contents of the instance as required by the
application.</p>
</li>
<li><p>Optionally, returns an outgoing message to the event gateway
in a <samp class="codeph">cfreturn</samp> tag. It can also send a message back
to the event gateway by calling the ColdFusion <samp class="codeph">SendGatewayMessage</samp> function.</p>
</li>
</ol>
<p>The following code shows a listener CFC with an <samp class="codeph">onIncomingMessage</samp> method
that echoes a message back to the Socket event gateway that sent
it. It contains the minimum code required to process an incoming
message and respond to the sender using the socket gateway.</p>
<pre>&lt;cfcomponent displayname="echo" hint="echo messages from the event gateway"&gt; 
    &lt;cffunction name="onIncomingMessage" output="no"&gt; 
        &lt;cfargument name="CFEvent" type="struct" required="yes"&gt; 
        &lt;!--- Create a return structure that contains the message. ---&gt; 
        &lt;cfset retValue = structNew()&gt; 
        &lt;cfset retValue.DestinationID = arguments.CFEvent.OriginatorID&gt; 
        &lt;cfset retValue.MESSAGE = "Echo: " &amp; arguments.CFEvent.Data.MESSAGE&gt; 
        &lt;!--- Send the return message back. ---&gt; 
        &lt;cfreturn retValue&gt; 
    &lt;/cffunction&gt; 
&lt;/cfcomponent&gt;</pre>
<p>Other event gateways require different fields in the return structure.
For example, to echo a message using the SMS event gateway, you
use the following lines to specify the return value:</p>
<pre>&lt;cfset retValue.command = "submit"&gt; 
&lt;cfset retValue.sourceAddress = arguments.CFEVENT.gatewayid&gt; 
&lt;cfset retValue.destAddress = arguments.CFEVENT.originatorid&gt; 
&lt;cfset retValue.ShortMessage = "Echo: " &amp; arguments.CFEvent.Data.MESSAGE&gt;</pre>
</div></div><div id="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffd" class="nochunk"><a name="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffd"><!-- --></a><h3 class="topictitle3">The CFEvent structure</h3><div><p>The ColdFusion event gateway service passes
a CFEvent structure with information about the message event to
the listener method. The following table describes the structure
fields:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e115590"><p>Field</p>
</th>
<th valign="top" width="NaN%" id="d17e115593"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e115590 "><p>GatewayID</p>
</td>
<td valign="top" width="NaN%" headers="d17e115593 "><p>The event gateway that sent the event; the
value is the ID of an event gateway instance configured on the ColdFusion
Administrator Gateway Instances page. If the application calls the <samp class="codeph">SendGatewayMessage</samp> function
to respond to the event gateway, it uses this ID as the function’s
first parameter.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e115590 "><p>Data</p>
</td>
<td valign="top" width="NaN%" headers="d17e115593 "><p>A structure containing the event data, including
the message. The <samp class="codeph">Data</samp> structure contents depend
on the event gateway type.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e115590 "><p>OriginatorID</p>
</td>
<td valign="top" width="NaN%" headers="d17e115593 "><p>The originator of the message. The value
depends on the protocol or event gateway type. Many event gateways require
this value in response messages to identify the destination of the
response. Identifies the sender of the message.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e115590 "><p>GatewayType</p>
</td>
<td valign="top" width="NaN%" headers="d17e115593 "><p>The type of event gateway, such as SMS.
An application that can process messages from multiple event gateway types
can use this field. This value is the gateway type name that the
event Gateway class specifies. It is not necessarily the same as
the gateway type name in the ColdFusion Administrator.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e115590 "><p>CFCPath</p>
</td>
<td valign="top" width="NaN%" headers="d17e115593 "><p>The location of the listener CFC. The listener
CFC does not require this field.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e115590 "><p>CFCMethod</p>
</td>
<td valign="top" width="NaN%" headers="d17e115593 "><p>The listener method that ColdFusion invokes
to process the event. The listener CFC does not require this field.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e115590 "><p>CFCTimeout</p>
</td>
<td valign="top" width="NaN%" headers="d17e115593 "><p>The time-out, in seconds, for the listener
CFC to process the event request. The listener CFC does not require
this field.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>When a ColdFusion application responds to an event gateway message,
or sends a message independently, it does not use a CFEvent structure.
However, the ColdFusion event gateway service creates a Java CFEvent
instance with the message data before calling the <samp class="codeph">outgoingMessage</samp> method
of the event gateway.</p>
</div></div><div id="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffc" class="nochunk"><a name="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffc"><!-- --></a><h3 class="topictitle3">Using persistent scopes in listener CFCs</h3><div><p>ColdFusion listener CFCs can use the Application, Client,
and Session persistent scopes.</p>
<p>Because incoming
event gateway messages are not associated with HTTP requests, ColdFusion
uses different session and client IDs for interactions initiated
by these events than for CFM Page requests, as follows:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e115673"><p>Identifier</p>
</th>
<th valign="top" width="NaN%" id="d17e115676"><p>Structure</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e115673 "><p>Session ID</p>
</td>
<td valign="top" width="NaN%" headers="d17e115676 "><p><i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">gatewayType</i>_<i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">gatewayID</i>_<i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">originatorID</i></p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e115673 "><p>cfid</p>
</td>
<td valign="top" width="NaN%" headers="d17e115676 "><p><i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">originatorID</i></p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e115673 "><p>cftoken</p>
</td>
<td valign="top" width="NaN%" headers="d17e115676 "><p><i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">gatewayType</i>_<i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">gatewayID</i></p>
</td>
</tr>
</tbody>
</table>
</div>
<p>The <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">gatewayID</i> value is the event gateway ID that you set
in the ColdFusion Administrator, and <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">gatewayType</i> and <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">originatorID</i> are
the values that the event gateway sets in the CFEvent instance for
an incoming message.</p>
</div></div><div id="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffb" class="nochunk"><a name="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffb"><!-- --></a><h3 class="topictitle3">Application scope</h3><div><p>The Application scope lets the CFC share data
with any ColdFusion page or CFC that uses the same application name.
This way, a listener CFC can use the same Application scope as CFML
pages that send messages. Also, you can place multiple listener
CFCs in a single directory and have them share an Application.cfc
or Application.cfm file and application name.</p>
<p>As with all ColdFusion code, use the Application.cfc This.name
variable or the <samp class="codeph">cfapplication</samp> tag to set the application
name. The listener CFC can use an Application.cfc or Application.cfm
file if the CFC is in a directory that is in or under one of the
following places:</p>
<ul><li><p>the ColdFusion web root</p>
</li>
<li><p>a directory that is in the ColdFusion Administrator Mappings
list. </p>
</li>
</ul>
<p>The ColdFusion installer creates a mapping in the ColdFusion
Administrator for the gateway\cfc directory.</p>
</div></div><div id="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffa" class="nochunk"><a name="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffa"><!-- --></a><h3 class="topictitle3">Client scope</h3><div><p>The Client scope can store long-term information associated
with the ID of the message sender. For example, it can store information
about an IM buddy.</p>
<p>To
use Client variables across multiple connections, your gateway type
must use the same client ID for all interactions with a particular
client. For many technologies and gateways, such as the IM and SMS
gateways, this requirement is not an issue.</p>
<div class="note"><span class="notetitle">Note:  </span>To use Client scope variables with gateways,
you must store the Client scope variables in a data source or the
registry. You cannot store the variables in cookies, because gateways
do not use cookies.</div>
</div></div><div id="WSf01dbd23413dda0e3c6234ad12013b4949e-7ff9" class="nochunk"><a name="WSf01dbd23413dda0e3c6234ad12013b4949e-7ff9"><!-- --></a><h3 class="topictitle3">Session scope</h3><div><p>The Session scope can store information required across
multiple interactions. For example, an interactive IM or SMS application
that uses a drill-down menu to select a service can store the information
about the menu selections in the Session scope.</p>
<p>Event gateway sessions terminate when they time out. Because
the identifiers for event sessions and clients differ from request-driven
session and client identifiers, you cannot use the same Session
or Client scope on a standard CFM page that sends an outgoing message
and in a listener CFC that handles an incoming response to that
message.</p>
<p>For
an example of using the Session scope, see the example Menu application
in the gateway\cfc\examples\menu directory.</p>
<div class="note"><span class="notetitle">Note:  </span>ColdFusion cannot create a session if an initiator
application uses a <samp class="codeph">SendGatewayMessage</samp> method to
start an interaction with a client, such as an SMS user. In this
case, the sending code must keep track (for example, in a database) of
the messages it sends and their destinations. When a response event
arrives, it can look up the originatorID to determine whether it
was in response to an outgoing message.</div>
</div></div><div id="WSf01dbd23413dda0e3c6234ad12013b4949e-7ff8" class="nochunk"><a name="WSf01dbd23413dda0e3c6234ad12013b4949e-7ff8"><!-- --></a><h3 class="topictitle3">Debugging event gateway CFCs</h3><div><p>When an event gateway CFC responds
to an event, it cannot display debugging information in the response
page, as CFM pages do. As a result, many of the normal ColdFusion
debugging techniques, including the <samp class="codeph">cfdump</samp> tag,
are not available. When you develop event gateway CFCs, consider
the following debugging techniques:</p>
<ul><li><p>Place trace variables in the Application scope. These
variables persist, and you can specify an application name for your
CFC (see <a href="WSf01dbd23413dda0e3c6234ad12013b4949e-7ffb.html">Application scope</a>). You can inspect the Application scope contents, including
your trace variables, in any CFML page that has the same application
name as your CFC.</p>
</li>
<li><p>Use <samp class="codeph">cflog</samp> tags to help you trace any errors
by logging significant events to a file. Also, carefully inspect
the eventgateway.log and exceptions.log files that ColdFusion maintains.
For more information on using the eventgateway.log file, see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-77eb.html">The eventgateway.log file</a>.</p>
</li>
<li><p>You can simulate responses from CFCs to the event gateway
by using the <samp class="codeph">SendGatewayMessage</samp> function in a CFM
page. The function’s <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">message</i> parameter should contain the
information that the CFC would place in its return variable.</p>
</li>
<li><p>If you run ColdFusion from the command line, you can use
the Java <samp class="codeph">System.out.println</samp> method to write messages
to the console window, as the following code shows:</p>
<pre>&lt;cfscript&gt; 
    sys = createObject("java", "java.lang.System"); 
    sys.out.println("Debugging message goes here"); 
&lt;/cfscript&gt;</pre>
</li>
</ul>
<div class="note"><span class="notetitle">Note:  </span>You do not have to restart the event gateway
instance when you change a CFC. ColdFusion automatically uses the
updated CFC when the next event occurs.</div>
</div></div><div id="WSf01dbd23413dda0e3c6234ad12013b4949e-7ff7" class="nochunk"><a name="WSf01dbd23413dda0e3c6234ad12013b4949e-7ff7"><!-- --></a><h3 class="topictitle3">Example event gateway CFC</h3><div><p>The following code shows a temperature
scale converter tool that can work with any of several event gateways:
SMS, XMPP, Lotus Sametime, or the example Socket event gateway.
Users enter a string that consists of the temperature scale (F,
Fahrenheit, C, or Celsius), a comma, and a temperature on their
device. The CFC converts Celsius to Fahrenheit or Fahrenheit to
Celsius, and returns the result.</p>
<p>This example shows how a responder event gateway application
can work, and illustrates how different event gateway types require
different outgoing message formats:</p>
<pre>&lt;cfcomponent displayname="tempconverter" hint="Convert temperatures between 
    Celsius and Fahrenheit"&gt; 
 
&lt;cffunction name="onIncomingMessage" output="no"&gt; 
    &lt;cfargument name="CFEvent" type="struct" required="yes"&gt; 
    &lt;!--- Standard error message giving the correct input format. ---&gt; 
    &lt;cfset var errormsg = "Please enter scale, integer where scale is F or C,  
        for example:F, 32"&gt; 
 
    &lt;!--- Get the message. ---&gt; 
    &lt;cfset data=cfevent.DATA&gt; 
    &lt;cfset message="#data.message#"&gt; 
    &lt;!--- Where did it come from? ---&gt; 
    &lt;cfset orig="#CFEvent.originatorID#"&gt; 
 
    &lt;!--- Process the input, generate a message with the new temperature. ---&gt; 
    &lt;!--- Input format is: degrees, temperature. ---&gt; 
    &lt;cfif listlen(message) eq 2&gt; 
        &lt;cfif (listgetat(message,1) IS "F") OR 
                (listgetat(message,1) IS "Fahrenheit") OR 
                (listgetat(message,1) IS "C") OR 
                (listgetat(message,1) IS "Celsius")&gt; 
            &lt;cfset scale=listgetat(message,1)&gt; 
            &lt;cfif isNumeric(listgetat(message,2))&gt; 
                &lt;cfset temperature=listgetat(message,2)&gt; 
                &lt;cfswitch expression="#scale#"&gt; 
                    &lt;cfcase value="F, Fahrenheit"&gt; 
                        &lt;cfset retmsg = temperature &amp; " degrees Fahrenheit is "  
                            &amp; (temperature-32.0) * (5.0/9.0) &amp; " degrees Celsius"&gt; 
                    &lt;/cfcase&gt; 
                    &lt;cfcase value="C, Celsius"&gt; 
                        &lt;cfset retmsg = temperature &amp; " degrees Celsius is "  
                            &amp;(temperature * 9.0/5.0) + 32 &amp; " degrees Fahrenheit"&gt; 
                    &lt;/cfcase&gt; 
                &lt;/cfswitch&gt;     
            &lt;cfelse&gt; 
                &lt;cfset retmsg=errormsg&gt; 
            &lt;/cfif&gt;         
        &lt;cfelse&gt;     
            &lt;cfset retmsg=errormsg&gt; 
        &lt;/cfif&gt;         
    &lt;cfelse&gt; 
        &lt;cfset retmsg=errormsg&gt; 
    &lt;/cfif&gt; 
     
    &lt;!--- Fill the return value as required for the event gateway type. ---&gt; 
    &lt;cfif arguments.CFEVENT.GatewayType is "Socket"&gt; 
        &lt;cfset retValue = structNew()&gt; 
        &lt;cfset retValue.MESSAGE = retmsg&gt; 
        &lt;cfset retValue.originatorID = orig&gt; 
    &lt;cfelseif (arguments.CFEVENT.GatewayType is "Sametime") OR 
            (arguments.CFEVENT.GatewayType is "XMPP")&gt; 
        &lt;cfset retValue = structNew()&gt; 
        &lt;cfset retValue.MESSAGE = retmsg&gt; 
        &lt;cfset retValue.BuddyID = arguments.CFEVENT.DATA.SENDER&gt; 
        &lt;cfset retValue.originatorID = orig&gt; 
    &lt;cfelseif arguments.CFEVENT.GatewayType is "SMS"&gt; 
        &lt;cfset retValue = structNew()&gt; 
        &lt;cfset retValue.command = "submit"&gt; 
        &lt;cfset retValue.sourceAddress = arguments.CFEVENT.gatewayid&gt; 
        &lt;cfset retValue.destAddress = arguments.CFEVENT.originatorid&gt; 
        &lt;cfset retValue.shortMessage = retmsg&gt; 
    &lt;/cfif&gt;     
 
    &lt;!--- Send the return message back. ---&gt; 
    &lt;cfreturn retValue&gt; 
 
&lt;/cffunction&gt; 
&lt;/cfcomponent&gt;</pre>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec22c24-6216" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-6216"><!-- --></a><h2 class="topictitle2">Sending a message using the SendGatewayMessage function</h2><div><p>The <samp class="codeph">SendGatewayMessage</samp> function
has the following format:</p>
<pre>SendGatewayMessage(gatewayID, messageStruct)</pre>
<ul><li><p>The <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">gatewayID</i> parameter must be the gateway ID
specified in the ColdFusion Administrator for the event gateway
instance that sends the message. </p>
</li>
<li><p>The <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">messageStruct</i> parameter is a structure whose contents
depends on the requirements of the <samp class="codeph">outgoingMessage</samp> method
of the event gateway, and possibly the recipient application. For
example, in addition to any message, the structure could include
a destination identifier. </p>
</li>
</ul>
<p>The CFEvent instance passed to the event gateway contains these
two parameters in the GatewayID and Data fields; the remaining fields
are empty.</p>
<p>The following example sends a message to a logging CFC, which
logs information to a file. If the <samp class="codeph">SendGatewayMessage</samp> function
returns “OK”, the example code displays a message. The code uses
an instance of the asynchronous CFML event gateway named Asynch
Logger. The props variable used in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">messageStruct</i> parameter
has two entries, the destination file and the message to log.</p>
<pre>&lt;cfscript&gt; 
    status = "No"; 
    props = structNew(); 
    props.Message = "Replace me with a variable with data to log"; 
    status = SendGatewayMessage("Asynch Logger", props); 
    if (status IS "OK") WriteOutput("Event Message ""#props.Message#"" has been sent."); 
&lt;/cfscript&gt;</pre>
<div class="note"><span class="notetitle">Note:  </span>To see the code for the CFC that logs the information,
see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-77ed.html">Using the CFML event gateway for asynchronous CFCs</a>.</div>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec22c24-77f5" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-77f5"><!-- --></a><h2 class="topictitle2">Using the GatewayHelper object</h2><div><p>The
ColdFusion <samp class="codeph">GetGatewayHelper</samp> function tells ColdFusion
to create and initialize a Java GatewayHelper object that provides
event gateway-specific helper methods and properties. To use this
function, the event gateway must implement a GatewayHelper class.
For example, an instant messaging event gateway could make buddy
list management methods available in a GatewayHelper object.</p>
<p>The ColdFusion <samp class="codeph">GetGatewayHelper</samp> function takes
a single parameter, the ID of the event gateway instance that provides
the helper, and returns a GatewayHelper Java object. The parameter
value must be the gateway ID for the instance that is specified
in the ColdFusion Administrator. If you do not want to hard-code an
ID value in the application (for example, if your listener CFC can
respond to multiple event gateway instances), get the gateway ID
from the CFEvent structure of the first incoming message.</p>
<p>The CFML code accesses the GatewayHelper object’s methods and
properties using standard ColdFusion Java object access techniques
(see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7fff.html">Integrating J2EE and Java Elements in CFML Applications</a>). For example,
if an event gateway’s GatewayHelper class includes an <samp class="codeph">addBuddy</samp> method
that takes a single String parameter, you could use the following
code to get the ColdFusion XMPP or Sametime gateway GatewayHelper
object and add a buddy to the buddies list:</p>
<pre>&lt;cfscript&gt; 
    myHelper = GetGatewayHelper(myGatewayID); 
    status = myHelper.addBuddy("jsmith23", "Jim Smith", "support"); 
&lt;/cfscript&gt;</pre>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec15849-7ffd" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7ffd"><!-- --></a><h2 class="topictitle2">Using the event gateway error log file</h2><div><p>When a standard ColdFusion event gateway
encounters an error that does not prevent the event gateway from
continuing to process, it logs it to the eventgateway.log file in
the ColdFusion logs directory. Other event gateways can also to
log information in this file, or to other application-specific files
in the logs directory. </p>
<p>The standard ColdFusion event gateways log errors in interaction
with any messaging server, errors in messages sent by the ColdFusion
application, and recoverable errors in event gateway operation.
The event gateways also log informational status messages for significant
normal events, including event gateway initialization and restarts.</p>
<p>ColdFusion event gateway messages in the eventgateway.log file
normally have the following format:</p>
<pre><i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">gatewayType (gatewayID) message body</i></pre>
<p>When you are developing an event gateway application, you can
use the ColdFusion Log viewer to inspect the eventgateway.log file
and filter the display by using the gateway type and possibly the
gateway ID as keywords. By selecting different severity levels,
you can get a good understanding of errors and possible inefficiencies
in your application and event gateway operation.</p>
</div></div>


<!-- BEGIN USER PREFERENCES -->
          <div id="userprefs">
          </div>
<!-- END USER PREFERENCES -->

          <div id="related">
            
            
            <div class="separator"><a href="#top"><img src="images/BTT.jpg" /></a>&#160;</div>
          </div>
          <div id="footer">
<!-- BEGIN IONCOMMENTS -->
            <div id="ionComHere">
            </div>
<!-- END IONCOMMENTS -->


            <p id="creativecommons"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text"><img id="creativecommons_img" src="images/CC.png" alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" /></a>&nbsp;Twitter™ and Facebook posts are not covered under the terms of Creative Commons.</p>
          </div>
</td>
<td width="10px"></td>
<td id="inner_rightcolumn">

</td></tr></table>
      </div>
<!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-77f9.html" title="Configuring an event gateway instance"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec22c24-77d8.html" title="Deploying event gateways and applications"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WSc3ff6d0ea77859461172e0811cdd865267-8000.html"><b>Using External Resources</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-77e4.html"><b>Using Event Gateways</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
<!-- END CONTENT WRAPPER -->

</td>
<td id="col3">
    <div>
        <img src="images/adobe-lq.png" />
    </div>
</td>
</tr>
</table>
    </div>
<!-- END PAGE CONTENT WRAPPER -->
<script type="text/javascript">
<!--[CDATA[
scrollToNameAnchor();
// ]]-->
</script> 
<!--
    Description:
    This file generates the link to product support in the top right corner
-->

<style>
#menutop{
    position:absolute;
    top:4px;
    right:24px;
    width:auto;    
    font-size:11px;
    color:#fff;
    text-align:right;
}
#menutop a{
    color:#fff;
}
#menutop a:hover{
        text-decoration:underline;
}
</style>  
  
  
  
  
<div id="productmenu">
<!--googleoff: index-->
  <div id="menutop">


<script language=javascript type='text/javascript'>
    // darken menu text for products with light backgrounds
    var path = document.location.href.toLowerCase();
    if (path.indexOf("/acrobat/")           	> 0 ||
        path.indexOf("/acrobat.com/")       	> 0 ||
        path.indexOf("/acrobatConnectPro/") 	> 0 ||
        path.indexOf("/connect/")           	> 0 ||
        path.indexOf("/livecycledataserviceses/") > 0 ||
        path.indexOf("/muse/")         	> 0 ||
	path.indexOf("/presenter/")         	> 0 ||
        path.indexOf("/scene7/")            	> 0 ||
        path.indexOf("/flashmediaserver/")  	> 0 ||
        path.indexOf("/wave/")              	> 0 )
    {
        document.write('<style>#menutop a{color:#505050}</style>');
    }
    if (typeof('terms_AHV_PRODUCT_SUPPORT') != "undefined" && ! use_robohelp_behavior ){      
        if (path.indexOf("/muse/") > -1 ){
            var supportlink = '<a href="http://muse.adobe.com/support.html">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }else{
            var supportlink = '<a href="http://adobe.com/support">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }
        document.write( supportlink );
     }

</script> 

  </div>
<!--googleon: index-->
</div>



<style>
#online-privacy-policy{ 
    margin:10px 40px; 
    font-size:11px;
}
</style>

<p id="online-privacy-policy">
<script language="javascript">
var pageLoc = "en_US";
var metaElements = document.all ?
document.all.tags('meta') :
document.getElementsByTagName ?
document.getElementsByTagName ('meta') : new Array();
for (var m = 0; m < metaElements.length; m++) {
	if (metaElements[m].name == "lang") {
		pageLoc = metaElements[m].content;
		break;
	}
}
var ptn = /(..)-(..)/;
if (ptn.test(pageLoc)) {
	var languageCode = pageLoc.replace(ptn, "$1");
	var countryCode = pageLoc.replace(ptn, "$2");
	pageLoc = languageCode + "_" + countryCode.toUpperCase();
}

var policyLoc = "en_US";
var policyText = "Online Privacy Policy";
var policyPath = "";
var policyArray=[
"da_DK", "Online fortrolighedserklæring",
"de_DE", "Online-Datenschutzrichtlinie",
"es_ES", "Política de confidencialidad en línea",
"fi_FI", "Yksityisyyttä koskeva Online-toimintaohjelma",
"fr_FR", "Confidentialité et sécurité",
"it_IT", "Informativa sulla privacy online",
"ja_JP", "プライバシーポリシー",
"ko_KR", "Adobe 온라인 개인정보 보호정책",
"pt_BR", "Política de Confidencialidade On-line", 
"zh_CN", "在线隐私政策",
"zh_TW", "線上隱私政策"
];
var legalLoc = "en_US";
var legalText = "Legal Notices";
var legalPath = legalLoc;
var legalArray=[
"ar_AE", "إشعارات قانونية",
"bg_BG", "Юридически бележки",
"cs_CZ", "Právní upozornění",
"da_DK", "Juridiske meddelelser",
"de_DE", "Rechtliche Hinweise",
"el_GR", "Σημειώσεις νομικού περιεχομένου",
"es_ES", "Avisos legales",
"et_EE", "Juriidilised teated",
"fi_FI", "Lakisääteiset ilmoitukset",
"fr_FR", "Mentions légales",
"he_IL", "הצהרות משפטיות",
"hr_HR", "Pravne napomene",
"hu_HU", "Jogi közlemények",
"it_IT", "Informazioni legali",
"ja_JP", "法律上の注意",
"ko_KR", "법적 고지 사항",
"lt_LT", "Teisinės pastabos",
"lv_LV", "Juridisks paziņojums",
"nb_NO", "Juridiske merknader",
"nl_NL", "Juridische kennisgevingen",
"pl_PL", "Informacje prawne",
"pt_BR", "Aspectos jurídicos",
"ro_RO", "Prevederi legale",
"ru_RU", "Юридическая информация",
"sk_SK", "Právne upozornenie",
"sl_SI", "Pravni pouk",
"sv_SE", "Upphovsrätt",
"tr_TR", "Yasal uyarılar",
"uk_UA", "Юридична інформація",
"zh_CN", "法律声明",
"zh_TW", "法律注意事項"
];

ruPolicy = "http://www.adobe.com/ru/misc/privacy.html";
trPolicy = "http://www.adobe.com/tr/misc/privacy.html";

// Bug 2846992: LOC: RUS, TUR: The link to "Online Privacy Policy" should include language, currently it is not appearing.
if (pageLoc == "ru_RU") {
	policyPath = "ru";
}
else if (pageLoc == "tr_TR") {
	policyPath = "tr";
}
for (var i = 0; i < policyArray.length; i+=2) {
	if (pageLoc == policyArray[i]) {
		policyLoc = pageLoc;
		policyText = policyArray[i+1];
		var ptn = /(..)_(..)/;
		if (ptn.test(policyLoc)) {
			var countryCode = policyLoc.replace(ptn, "$2");
			policyPath = countryCode.toLowerCase();
		}
		break;
	}
}

for (var i = 0; i < legalArray.length; i+=2) {
	if (pageLoc == legalArray[i]) {
		legalLoc = pageLoc;
		legalText = legalArray[i+1];
		legalPath = legalLoc;
		break;
	}
}
if(agt.indexOf("community help client") > -1 ){
	document.write('<a href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
}else{
	//Open the privacy policy in a new window
	document.write('<a target="_blank" href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a target="_blank" href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
} 
</script>
</p>



<!-- localfooter.ssi -->

<script type="text/javascript">
    var debug = (top.location.href.indexOf("debug=true") > -1);
</script>

<script language="javascript">
document.write('<scr'+'ipt ' +
               'src="/en_US/ssi/_pod.js" ' +
               'language="javascript" ' +
               'charset="UTF-8"> ' +
               '</scr'+'ipt>');
</script>


<script type="text/javascript">
//
//  Ethnio survey code
//
/*          DocumentID      EthnioID */
/*          -------------   -------- */
var ethnio=["/en_US/flash/cs/using/WSb03e830bd6f770ee6664507612436d7dede-8000.html", "87462",
            "/en_US/creativesuite/cs/using/WSe851854fd1e0856a-4b08a77612477f69f15-8000.html",  "10441",
            "/en_US/dreamweaver/cs/using/WSEE4C0148-A6F4-4bf5-9DEF-CE06AB026214a.html",  "57412"
 
    ];
                        
    for ( var i = 0; i < ethnio.length ; i = i+2 ){
        if ( document.location.href.indexOf( ethnio[i] ) > -1 ){ 
            var headID = document.getElementsByTagName("head")[0];         
            var ethnioScript = document.createElement('script');
            ethnioScript.type = 'text/javascript';
            ethnioScript.src = 'http://ethn.io/remotes/' + ethnio[i+1];        
            if ( debug ){
                alert ("Using Ethnio script: " + ethnioScript.src );
            }else{
                headID.appendChild(ethnioScript);
            }
        }
    }
</script>



<div style="display: none;">
<!-- SiteCatalyst -->
<script language="JavaScript" type="text/javascript"><!--
var s_code=' ';
var s_docHost = window.location.hostname.toLowerCase();
var s_docURL = window.location.pathname.toLowerCase();
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
if (s_docHost.indexOf(".corp.adobe") != -1 || s_docHost.indexOf("stage.") != -1 || s_docHost.indexOf(".dev.adobe") != -1 || s_docHost.indexOf("staging.") != -1) scJsHost="";
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/omniture_s_code.js' type='text/javascript'%3E%3C/script%3E"));
//--></script>
<script type="text/javascript"><!--
var s_accountName;
s_server="www.adobe.com static content pages";
if (!window.s_account) s_accountName="mxmacromedia";
else s_accountName=window.s_account;

if (window.s_docURL.indexOf("/designcenter/") != -1)
  s_channel="Adobe Design Center";	
else if ((window.s_docHost.indexOf("labs.adobe") != -1) ||
(window.s_docHost.indexOf("labs-staging.") != -1))
  s_channel="Labs";
else if (window.s_docHost.indexOf("help.adobe.com") != -1) {
  s_channel="Support Help.adobe.com";
  if (window.s_docURL.indexOf("/en_us/") == -1) {
    s_docURLArray=s_docURL.split('/');
    s_pageName="http://help.adobe.com/"+s_docURLArray[1]+"/"+ s_docURLArray[2]+"/"+s_docURLArray[3];
    s_prop23="http://help.adobe.com"+window.location.pathname;
  }
}
else if (window.s_docHost.indexOf("kb2.adobe.com") != -1) {
  s_channel="Support Knowledgebase";
  s_prop23="http://kb2.adobe.com"+s_docURL+":";
  if (typeof(omtrProductList) != 'undefined' && omtrProductList.length > 0)
 {
    s_prop23=s_prop23+omtrProductList;
  }
}
else if (window.s_docHost.indexOf("resellers.adobe.com") != -1) {
		var s_pageName=document.getElementsByTagName("title")[0].text;
}

if (!window.scMMInclude) {
	var s_wd=window,s_tm=new Date;
	if(s_code!=' '){
		s_code=s_dc(s_accountName);
		if(s_code)document.write(s_code)
	} 
} else {
	s_wds(s_accountName);s_ca(s_accountName); 
}	

function sendAnalyticsEvent(str){var ns=s_accountName;if(str!=null)ns+=","+str;void(s_gs(ns));}
function sendLinkEvent(accnt,lnkname,type){
accnt=s_accountName;s_linkType=type;s_lnk=true;s_linkName=lnkname;void(s_gs(accnt));}
//--></script>
<noscript><img src="http://stats.adobe.com/b/ss/mxmacromedia/1/H.15-XELvs/0?pageName=http%3A//www.adobe.com%3A%20noscript&ch=http%3A//www.adobe.com%3A%20noscript&g=http%3A//www.adobe.com" height="1" width="1" border="0" alt="" /></noscript>
<!-- End SiteCatalyst -->
</div>

<script language="JavaScript" type="text/javascript">//<![CDATA[
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/atm/s_code_www.js' type='text/javascript'%3E%3C/script%3E"));
//]]></script>
<script type="text/javascript">//<![CDATA[
if(s_adobe){	
	s_adobe.server="www.adobe.com Static Content pages";
	/* Set pageName */
	s_adobe.s_URL="adobe.com"+((location.pathname.charAt(0)=='/')?location.pathname:'/'+location.pathname);
	if (s_adobe.s_URL.substring(s_adobe.s_URL.lastIndexOf('/')+1)=="") s_adobe.s_URL=s_adobe.s_URL+"index.html";
	s_adobe.s_URLSplit=s_adobe.s_URL.split("/");
	s_adobe.pageName=s_adobe.s_URLSplit.join(":");

	/* Set prop4 to language-locale */
	var s_meta=document.getElementsByTagName('meta'); 
      for (i=0; i<s_meta.length; i++) { 
        if (s_meta[i].getAttribute("http-equiv") == "Content-Language") { 
          s_adobe.prop4=s_meta[i].getAttribute("content"); 
	    s_adobe.prop4=s_adobe.prop4.replace(/\s+/g,'');
        } 
      } 
	s_adobe.t()
}
//]]></script>








  </body>
</html>