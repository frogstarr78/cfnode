<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="lang" content="en-us" />
    <meta name="area" content="livedocs" />
    <title>Adobe&#160;ColdFusion&#160;9 * Using the example event gateways and gateway applications</title>
    <link rel="shortcut icon" href="images/ColdFusionLinkIndicator.png" />
    <meta name="book" content="Developing&#160;ColdFusion 9 Applications" />
    <meta name="product" content="ColdFusion" />
    <meta name="keywords" content="" /><!--<PageMap><DataObject type="document"><Attribute name="product" value="ColdFusion"></Attribute><Attribute name="book" value="Developing&#160;ColdFusion 9 Applications"></Attribute><Attribute name="keywords" value=""></Attribute></DataObject></PageMap>-->
    
    <script type="text/javascript" language="Javascript" charset="UTF-8"><!--[CDATA[
        var currentTreeNode = "WSc3ff6d0ea77859461172e0811cbec22c24-77f7.html";
    document.cookie = "topicId=" + "WSc3ff6d0ea77859461172e0811cbec22c24-77f7.html";
// ]]--></script>
<script src="terms.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="help.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script>  <script src="utilities.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="event.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="treeview.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="toc.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script> <script src="swfobject.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>  <script src="booklist.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>
<script type="text/javascript">
<!--[CDATA[
var topictype = "topic";
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
  var linkId = document.createElement("link");
  linkId.href = "content-ie6.css";
  linkId.rel = "stylesheet";
  linkId.type = "text/css";
  headId.appendChild(linkId);
}
function initRoboHelpDOM() {
  if (use_chm_behavior) {
    hideElement("search");
  }
  if (use_robohelp_behavior) {
    hideElement("search");
    hideElement("productmenu");
    //hideElement("notyourversion");
  }
  if(!use_chc_behavior) {
    //document.getElementById("notyourversion").style.display = "inline";;
  }
}
var dirname = location.pathname.match( /.*\// );    
function setSearchUserPref(){
  if ( document.cookie.indexOf( "ah_searchpref" ) > -1 ) {
    if ( document.cookie.indexOf( dirname ) > 0 ) {
      document.search.gsa.checked = true ;
    }else{
      document.search.gsa.checked = false ;            
    }
  }
}
YAHOO.util.Event.onDOMReady(initRoboHelpDOM);
YAHOO.util.Event.onDOMReady(setSearchUserPref);
// ]]-->
</script>

<!-- ********************************** -->
<!-- START: ForeSee survey code in: /ssi/globalheader.ssi -->

<script type="text/javascript">
<!-- 
// Enable the survey for only English, German and Japanese
var agt=navigator.userAgent.toLowerCase();
if ( agt.indexOf("community help client") == -1 ){
    if ( document.location.href.indexOf("/en_US/") != -1 ){
        showSurvey();
//    }else if (document.location.href.indexOf("/de_DE/") != -1){
//         var locale="de";
//         showSurvey();
    }else if (document.location.href.indexOf("/ja_JP/") != -1 ){
         var locale="ja";
         showSurvey();
    }	
}

function showSurvey(){
	document.write('<script type="text/javascript" src="/js/foresee/foresee-trigger.js"><\/scr'+'ipt>');
}

// -->
</script>

<!-- END: ForeSee survey code -->
<!-- ******************************** -->




    <link rel="stylesheet" type="text/css" href="tree.css" />
    <link rel="stylesheet" type="text/css" href="content.css" />
    <link rel="stylesheet" type="text/css" href="localeSpecific.css" />
  </head>
  <body id="content_body" onload="window.focus();">
    <a name="top" shape="rect"><!--LeaveCommentHere--></a>
    
    <div id="mnemonic">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon" class="ColdFusion"><div class="banner"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html">Adobe&#160;ColdFusion&#160;9</a><span id="notyourversion">|&#160;
                    <a rel="nofollow" href="http://www.adobe.com/support/documentation/en/coldfusion/">Not your version?</a></span></div></div><!--googleon: index-->
    </div>
    
    <div id="searchbar">
<table id="searchbartable">
<tr>
<td colspan="2">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon"><div id="pdf"><img src="images/PDF.gif" width="16" height="16" /><a title="View Help PDF" href="coldfusion_9_dev.pdf">View Help PDF ( 23MB)</a></div></div><!--googleon: index-->
</td>
</tr>
</table>
    </div>

<!-- BEGIN SEARCH CONTENT -->
<form id="search" name="search" action="search.html" target="_self">
<script type="text/javascript">
<!--[CDATA[
if ( !use_chc_behavior ){
    if (typeof(terms_AHV_SEARCH_CONSTRAINT) != "undefined" && 
        terms_AHV_SEARCH_CONSTRAINT.length > 0 && 
        document.location.href.indexOf(".adobe.com") > 0){
        if ( typeof(terms_SEARCH_THIS_HELP_ONLY) != "undefined" && terms_SEARCH_THIS_HELP_ONLY == "ON" ) {
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                checked="checked" \
                value="1" ><\/input>'); 
                
        // Leave the "Search this help system only" checkbox unckecked
        }else{    
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                value="1" ><\/input>'); 
        }
        document.write('<span class="gsalabel">' + terms_AHV_SEARCH_CONSTRAINT + '<\/span><\/div>'); 
    }
    document.write('<input class="searchinput" \
        name="q" \
        id="q" \
        type="text" \
        maxlength="256" \
        value="' + terms_AHV_SEARCH_BUTTON + '" \
        onclick="clearSearch()"><\/input><input \
        type="button" \
        name="searchbutton" \
        class="searchbutton" \
        onclick="submit()"><\/input>'); 
} 
 
/* 
 * Start Functions 
 */
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}

// set search preferences
function setAHSearchPref(){
    if (document.search.gsa.checked == 1){
        setAHSearchCookie( dirname );
    }else{
        setAHSearchCookie( "community" );
    }
}

// Set search preferences cookie
function setAHSearchCookie( p ){
    // set cookie ah_searchpref with a value of the document path
    var expire=new Date();
    expire.setDate(expire.getDate()+365); // Cookie expires after 1 year (365 days) 
    document.cookie="ah_searchpref=" +p+ "; expires=" +expire.toGMTString()+ ";";
}

// ]]-->
</script> 
 </form>
<!-- END SEARCH CONTENT -->    



<!-- BEGIN PAGE CONTENT WRAPPER -->
    <div id="page_content_wrapper">
<!-- BEGIN PAGE WRAPPER -->
<table id="page_content_table">
<tr>

<td id="col2">
<!-- BEGIN CONTENT WRAPPER -->
<!-- BEGIN BREADCRUMBS -->

      
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-77ed.html" title="Using the CFML event gateway for asynchronous CFCs"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec22c24-77f0.html" title="Using the Instant Messaging Event Gateways"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WSc3ff6d0ea77859461172e0811cdd865267-8000.html"><b>Using External Resources</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-77e4.html"><b>Using Event Gateways</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
      <div id="content_wrapper">
<!-- BEGIN PAGE TITLE -->
        <h1>Using the example event gateways and gateway applications</h1>
<!-- END PAGE TITLE -->
<!-- BEGIN IONCOMMENTCOUNT -->
        <div id="ionCount">
        </div>
<!-- END IONCOMMENTCOUNT -->
<table id="inner_content_table" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td>
          <div style="border-top:#ccc solid 1px;"><p> </p>
          </div>
<p id="chcPromo" style="display:none;">
<a id="chcLink" href="http://www.adobe.com/support/chc/">
<img id="chcImage" src="http://www.adobe.com/support/chc/GetMoreHelpFeatures.png"/>
</a>
</p>
<script type="text/javascript" language="javascript" charset="utf-8">
<!--
var cfgArray = [];
//cfgArray["Acrobat_10.0_Professional.helpcfg"] = "acrobatpro";
//cfgArray["Acrobat_10.0_Standard.helpcfg"] = "acrobatstd";
cfgArray["Lightroom_3.0.helpcfg"] = "lightroom";
cfgArray["PhotoshopElements_8.0_Win.helpcfg"] = "photoshopelements";
cfgArray["PhotoshopElements_8.0_Mac.helpcfg"] = "photoshopelementsmac";
cfgArray["PremiereElements_8.0_Win.helpcfg"] = "premiereelements";

//cfgArray["AfterEffects_10.0.helpcfg"] = "aftereffects";
//cfgArray["AIR.helpcfg"] = "air";
//cfgArray["ColdFusionBuilder.helpcfg"] = "coldfusion";
//cfgArray["Contribute_6.0.helpcfg"] = "contribute";
//cfgArray["DeviceCentral_3.0.helpcfg"] = "devicecentral";
//cfgArray["Dreamweaver_11.0.helpcfg"] = "dreamweaver";
//cfgArray["EncoreDVD_5.0.helpcfg"] = "encore";
//cfgArray["ExtensionManager_3.0.helpcfg"] = "extension";
//cfgArray["Fireworks_11.0.helpcfg"] = "fireworks";
//cfgArray["Flash_11.0.helpcfg"] = "flash";
//cfgArray["Flex_4.0.helpcfg"] = "flashbuilder";
//cfgArray["FlashCatalyst_1.0.helpcfg"] = "flashcatalyst";
//cfgArray["Illustrator_15.0.helpcfg"] = "illustrator";
//cfgArray["InCopy_7.0.helpcfg"] = "incopy";
//cfgArray["InDesign_7.0.helpcfg"] = "indesign";
//cfgArray["OnLocation_5.0.helpcfg"] = "onlocation";
//cfgArray["Photoshop_12.0.helpcfg"] = "photoshop";
//cfgArray["PremierePro_5.0.helpcfg"] = "premierepro";

function getLangName() {
    var lang = "en-us";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if (ptn.test(lang)) {
        var languageCode = lang.replace(ptn, "$1");
        var countryCode = lang.replace(ptn, "$2");
        lang = languageCode + "_" + countryCode.toUpperCase();
    }
    return lang;
}

function getCountryName() {
    var lang = "";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if ((ptn.test(lang)) && (lang != "en-us")) {
        var countryCode = lang.replace(ptn, "$2");
        return "/" + countryCode;
    }
    return "";
}

if ( (typeof(terms_HELPCFG) != 'undefined')  && (terms_HELPCFG.indexOf(".helpcfg") != -1) ) {
    var stage   = (document.location.href.indexOf(".stage.") != -1) ? 'stage.' : '';
    var baseUrl = 'http://www.' + stage + 'adobe.com';
    var refpage = document.location.href.replace(/#.*$/, '');
	
	if ((!use_robohelp_behavior) && (terms_HELPCFG.length > 0) && (typeof(cfgArray[terms_HELPCFG]) != 'undefined') && (cfgArray[terms_HELPCFG].length > 0)) {
		if (document.getElementById) { // DOM3 = IE5, NS6
			var newHref = baseUrl + getCountryName() + "/support/chc/" + "?helpcfg=http://help." + stage + "adobe.com/HelpCfg/" + getLangName() + "/" + terms_HELPCFG + "&url=" + refpage + "&product=" + cfgArray[terms_HELPCFG];
			var newSrc = baseUrl + getCountryName() + "/support/chc/GetMoreHelpFeatures.png";
			document.getElementById("chcPromo").style.display = "block";
			document.getElementById("chcLink").href = newHref;
			document.getElementById("chcImage").src = newSrc;
		}
	}
}

//-->
</script>



          <div id="minitoc"><div class="t"><div class="b"><div><ul id="minitoc-links"><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec15849-7fed"><span class="topictitle1">Example event gateways</span>
</a></p></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec15849-7fe6"><span class="topictitle1">Menu example application</span>
</a></p></li></ul></div></div></div></div><div><p>ColdFusion provides several
example event gateways and applications in the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">cf_root</i>\WEB-INF\cfusion\gateway
directory on J2EE configurations or the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">cf_root</i>\gateway directory
on server configurations. These gateways provide example code that
you can examine or use in developing your gateways. They are intended
as examples only, and are not complete, product-quality, implementations.</p>
</div>
<div id="WSc3ff6d0ea77859461172e0811cbec15849-7fed" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed"><!-- --></a><h2 class="topictitle2">Example event gateways</h2><div><p>The gateway\src\examples directory and its subdirectories
include the sources for the example event gateways. Compiled versions
are located in the gateway\lib\examples.jar file. This document
briefly describes the event gateways and their functions. For more
detailed information, see the code and comments in the files.</p>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fe9"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fe9"><!-- --></a><h4 class="sectiontitle">EmptyGateway</h4><p>The EmptyGateway.java file contains an event
gateway template that you can use as a skeleton for creating your
own event gateway. For more information on this class, and on creating
new event gateways, see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-77f3.html">Creating Custom Event Gateways</a></p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fd9"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fd9"><!-- --></a><h4 class="sectiontitle">SocketGateway</h4><p>The SocketGateway event gateway
listens on a TCP/IP port. Therefore, you can use this gateway for
applications that send and respond to messages using TCP/IP-based
protocols such as Telnet, or for applications that send messages between
sockets. For example, a simple gateway application that responds
to messages from a Telnet terminal client without supporting the
full Telnet protocol.</p>
<div class="note"><span class="notetitle">Note:  </span>The ColdFusion Administrator
uses Socket as the gateway type name for the SocketGateway class.</div>
<p>The
SocketGateway.java file defines two classes: SocketGateway, the
event gateway, and SocketHelper, a GatewayHelper class. The Source
file is located in the gateway\src\examples\socket directory.</p>
<dl><dt class="dlterm">SocketGateway</dt>
<dd xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">Listens on a TCP/IP port. This event gateway is multi-threaded and
can handle multiple clients simultaneously. It can send outgoing
messages to existing clients, but cannot establish a link itself.<p>By
default, the SocketGateway class listens on port 4445, but you can
specify the port number in a configuration file. The file should
contain a single line in the following format:</p>
<pre><i>port=portNumber</i></pre>
</dd><p class="dlseparator"></p><dt class="dlterm">SocketHelper</dt>
<dd xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">A GatewayHelper class with the following
methods: <p><samp class="codeph">getSocketIDs()</samp> returns an array
containing the socket IDs of all Java sockets that are open. The
event gateway opens a socket for each remote client.</p>
<p><samp class="codeph">killSocket(String </samp><i>socketid</i><samp class="codeph">)</samp>removes
the specified socket. Returns a Boolean success indicator.</p>
</dd><p class="dlseparator"></p></dl>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec22c24-77e9"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec22c24-77e9"><!-- --></a><h4 class="sectiontitle">DirectoryWatcherGateway</h4><p>The DirectoryWatcherGateway event gateway
sends events to the listener CFC when a file is created, deleted,
or modified in a directory. The watcher runs in a thread that sleeps
for an interval specified in the configuration file, and when the interval
has passed, checks for changes since the last time it was awake.
If it finds added, deleted, or changed files, it sends a message
to a listener CFC. You can configure separate CFCs for add, delete,
and change events, or use a single CFC for all events. The source
for this event gateway is located in the gateway/src/examples/watcher
directory.</p>
<div class="note"><span class="notetitle">Note:  </span>The ColdFusion Administrator uses
DirectoryWatcher as the gateway type name for the DirectoryWatcherGateway
class.</div>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fe1"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fe1"><!-- --></a><h4 class="sectiontitle">Configuration file</h4><p>This event gateway requires a configuration file,
consisting of lines in the following format:</p>
<pre>directory=C:/temp</pre>
<div class="note"><span class="notetitle">Note:  </span>If you use backward slash characters (\) as directory
separators in Windows the file paths, escape them by using double
slashes, as in C:\\temp. You can use forward slashes (/) as the
directory separator on all operating systems, including Windows.</div>
<div class="note"><span class="notetitle">Note:  </span>When you specify filename extensions in the Directory
Watcher configuration file, do not include the period, instead use
a comma, for example, <samp class="codeph"><i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">doc,txt</i></samp>.</div>
<p>The
configuration file can have comment lines, preceded by a number
sign (#). If you omit a property or comment it out, ColdFusion uses
the default value. If you specify a property with no value, ColdFusion
sets an empty property. The configuration file can define the following
values:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e116248"><p>Property</p>
</th>
<th valign="top" width="NaN%" id="d17e116251"><p>Req/Opt</p>
</th>
<th valign="top" width="NaN%" id="d17e116254"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e116248 "><p><samp class="codeph">directory</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e116251 "><p>Required</p>
</td>
<td valign="top" width="NaN%" headers="d17e116254 "><p>Path to the directory to watch.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116248 "><p><samp class="codeph">recurse</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e116251 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e116254 "><p>Whether to check subdirectories. The default
value is <samp class="codeph">no</samp>.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116248 "><p><samp class="codeph">extensions</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e116251 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e116254 "><p>Comma-delimited list of extensions to watch.
The event gateway logs only changed files with these extensions.
An asterisk (*) indicates all files. The default value is all files.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116248 "><p><samp class="codeph">interval</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e116251 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e116254 "><p>Number of milliseconds between the times
that the event gateway checks the directory. The default value is
60 seconds.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116248 "><p><samp class="codeph">addFunction</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e116251 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e116254 "><p>Name of the function to call when a file
is added. The default value is <samp class="codeph">onAdd</samp>.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116248 "><p><samp class="codeph">changeFunction</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e116251 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e116254 "><p>Name of the function to call when a file
is changed. The default value is <samp class="codeph">onChange</samp>.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116248 "><p><samp class="codeph">deleteFunction</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e116251 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e116254 "><p>Name of the function to call when a file
is deleted. The default value is <samp class="codeph">onDelete</samp>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>An example configuration file is located
in the gateway\config\directory-watcher.cfg file.</p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fdf"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fdf"><!-- --></a><h4 class="sectiontitle">CFC methods</h4><p>When the directory contents change, the event
gateway calls one of the following CFC listener methods, unless
you change the names in the configuration file:</p>
<ul><li><p><samp class="codeph">onAdd</samp></p>
</li>
<li><p><samp class="codeph">onChange</samp></p>
</li>
<li><p><samp class="codeph">onDelete</samp></p>
</li>
</ul>
<p>The CFEvent.Data
field sent to the listener methods includes the following fields:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e116375"><p>Field</p>
</th>
<th valign="top" width="NaN%" id="d17e116378"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e116375 "><p>TYPE</p>
</td>
<td valign="top" width="NaN%" headers="d17e116378 "><p>Event type, one of ADD, CHANGE, DELETE.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116375 "><p>FILENAME</p>
</td>
<td valign="top" width="NaN%" headers="d17e116378 "><p>Absolute path from the system directory
root to the file that was added, deleted, or changed.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116375 "><p>LASTMODIFIED</p>
</td>
<td valign="top" width="NaN%" headers="d17e116378 "><p>The date and time that the file was created
or modified. This field is not included if the file was deleted.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>The event gateway supports multiple listener
CFCs and sends the event messages to all listeners. The event gateway
is one way; it watches for events and dispatches event information
to a CFC, but it does not accept return values from the CFC or input
from <samp class="codeph">SendGatewayMessage</samp> functions.</p>
<p>The directory
watcher logs errors to the watcher.log file in the ColdFusion logs directory.</p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fde"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fde"><!-- --></a><h4 class="sectiontitle">Example DirectoryWatcher application</h4><p>The following code shows a simple directory
watcher application. It enters a line in a log file each time a
file is added, deleted, or changed in the directory specified in
the configuration file. ColdFusion includes the date and time that
a log entry is made. However, if the directory watcher monitors
changes infrequently, for example once every minute or more, the
time in the log entry could differ from the time a file was added
or changed, so the information includes the time (but not date)
for these actions.</p>
<pre>&lt;cfcomponent&gt; 
&lt;cffunction name="onAdd" output="no"&gt; 
    &lt;cfargument name="CFEvent" type="struct" required="yes"&gt; 
    &lt;cfset data=CFEvent.data&gt; 
    &lt;cflog file="MydirWatcher" application="No"  
        text="ACTION: #data.type#;FILE: #data.filename#; 
        TIME: #timeFormat(data.lastmodified)#"&gt; 
&lt;/cffunction&gt; 
 
&lt;cffunction name="onDelete" output="no"&gt; 
&lt;cfargument name="CFEvent" type="struct" required="yes"&gt; 
&lt;cfset data=CFEvent.data&gt; 
&lt;cflog file="MydirWatcher" application="No"  
    text=" ACTION: #data.type#;FILE: #data.filename#"&gt; 
&lt;/cffunction&gt; 
 
&lt;cffunction name="onChange" output="no"&gt; 
&lt;cfargument name="CFEvent" type="struct" required="yes"&gt; 
&lt;cfset data=CFEvent.data&gt; 
&lt;cflog file="MydirWatcher" application="No"  
        text=" ACTION: #data.type#;FILE: #data.filename#; 
        TIME: #timeFormat(data.lastmodified)#"&gt; 
&lt;/cffunction&gt; 
&lt;/cfcomponent&gt;</pre>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fe8"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fe8"><!-- --></a><h4 class="sectiontitle">JMSGateway</h4><p>The JMSGateway class acts as a Java Messaging
Service consumer or producer. The source for this event gateway
is located in gateway/src/examples/JMS. The gateway requires a configuration
file, which is in gateway/config/jmsgateway.cfg. For full documentation
of the configuration options, See the configuration file. The ColdFusion
Administrator lists the compiled gateway (which is included in the
gateway\lib\examples.jar file) on the Gateway Types page.</p>
<div class="note"><span class="notetitle">Note:  </span>The ColdFusion Administrator uses JMS as the gateway
type name for the JMSGateway class.</div>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fda"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fda"><!-- --></a><h4 class="sectiontitle">Using the JMS Gateway as a consumer</h4><p>The JMSGateway class creates
a subscriber to the topic specified in the configuration file. The
gateway consumes the following types of messages:</p>
<ul><li><p>TextMessage</p>
</li>
<li><p>BytesMessage containing raw UTF-8 text</p>
</li>
</ul>
<p>The
gateway passes the contents of the message to the configured CFC
in the event structure, as follows:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e116444"><p>Field</p>
</th>
<th valign="top" width="NaN%" id="d17e116447"><p>Contents</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e116444 "><p>data.id </p>
</td>
<td valign="top" width="NaN%" headers="d17e116447 "><p>Message correlation ID</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116444 "><p>data.msg </p>
</td>
<td valign="top" width="NaN%" headers="d17e116447 "><p>Text of the message</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116444 "><p>gatewayType </p>
</td>
<td valign="top" width="NaN%" headers="d17e116447 "><p>Gateway type: JMS</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116444 "><p>originatorID </p>
</td>
<td valign="top" width="NaN%" headers="d17e116447 "><p>Topic name from which the message was consumed</p>
</td>
</tr>
</tbody>
</table>
</div>
<p>The listener CFC method must be named <samp class="codeph">onIncomingMessage</samp>.
If the CFC method does not send a message in response, it should
return a structure containing a status field with a value of OK
or EXCEPTION. (In this case, The gateway checks the return status
field, but does not process these return values further.) To send
a message, the CFC method must return a structure as documented
in the following section.</p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fca"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fca"><!-- --></a><h4 class="sectiontitle">Using the JMS Gateway as a producer</h4><p>To send a JMS message, the
return value of your CFC method or the second, <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">messageStruct</i>,
parameter to the <samp class="codeph">SendGatewayMessage</samp> function must
be a structure with the following fields:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e116501"><p>Field</p>
</th>
<th valign="top" width="NaN%" id="d17e116504"><p>Contents</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e116501 "><p>status </p>
</td>
<td valign="top" width="NaN%" headers="d17e116504 "><p>Must be SEND.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116501 "><p>topic </p>
</td>
<td valign="top" width="NaN%" headers="d17e116504 "><p>Name of the topic to publish the message
to.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116501 "><p>id </p>
</td>
<td valign="top" width="NaN%" headers="d17e116504 "><p>(Optional) The JMS correlation ID to associate
with the message. The default is null.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116501 "><p>message </p>
</td>
<td valign="top" width="NaN%" headers="d17e116504 "><p>Text of the message to publish.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e116501 "><p>asBytes</p>
</td>
<td valign="top" width="NaN%" headers="d17e116504 "><p>(Optional) How to publish the message:</p>
<div class="para"><ul><li><p>If omitted, no, or false, send the message as text.</p>
</li>
<li><p>If any other value, send the message as byte-encoded UTF-8. </p>
</li>
</ul>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p>If you send the message in a <samp class="codeph">SendGatewayMessage</samp> function,
the function returns OK if the gateway sends the message, or EXCEPTION
if it fails to send the message.</p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fc7"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fed__WSc3ff6d0ea77859461172e0811cbec15849-7fc7"><!-- --></a><h4 class="sectiontitle">ActiveMQ JMS event gateway</h4><p>Apache ActiveMQ is a message broker
that implements JMS. The source for this event gateway is located
in gateway/src/examples/ActiveMQ. For information about using the
ActiveMQ JMS event gateway, see the gateway\docs\ActiveMQDeveloperGuide.pdf
file.</p>
</div>
</div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec15849-7fe6" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fe6"><!-- --></a><h2 class="topictitle2">Menu example application</h2><div><p>ColdFusion is
installed with a menu-based responder application. The menu application
is written to work with any of the standard ColdFusion event gateways
(SMS, XMPP, and Sametime) and with the Socket example event gateway,
and ColdFusion is preconfigured with an instance of the application that
uses SMS, as follows:</p>
<ul><li><p>The Gateway Instances page in the ColdFusion Administrator
includes a gateway instance for this application that uses the SMS
gateway type. </p>
</li>
<li><p>The gateway/cfc/examples/menu directory and its subdirectories
include the CFML for the application</p>
</li>
<li><p>The gateway/config/sms-test.cfg file is configured to use
this application with the SMS client (phone simulator), and short
message service center (SMSC) server simulator that are provided
with ColdFusion. </p>
</li>
</ul>
<p>The application presents users with a drill-down menu of tools
that they can use, including a weather report, stock information,
status and configuration information, and language tools such as
a dictionary. </p>
<p>The code for this application is relatively complex and is distributed
among 13 files. The following brief description provides an overview
of how it works. To get a full understanding of how the application
works, see the source code.</p>
<ul><li><p>The top level, menu, directory contains two files: Application.cfm
and main.cfc.</p>
</li>
<li><p>The Application.cfm file consists of a single <samp class="codeph">cfapplication</samp> tag
that enables session management and names the application. Session
variables maintain the current state information of the session,
such as the active menu, and so on. </p>
</li>
<li><p>The main.cfc file contains the master CFC; the event gateway
configuration in ColdFusion Administrator uses it as the listener
CFC. The main CFC file processes CFEvent structures from the event
gateway. It does the following:</p>
<ol><li><p>Inspects the gatewayType
field to determine the rest of the structure contents. This check
is necessary because different event gateways place the message
in fields with different names. </p>
</li>
<li><p>If a Session.menu variable does not exist, initializes the
menu system. To do so, it calls methods in two other CFCs: menu
and menunode. These two CFCs contain the menu system code. </p>
</li>
<li><p>Calls the session.menu.process method to process the user
input. This method can dispatch a message to an individual application
for processing, if appropriate.</p>
</li>
</ol>
</li>
<li><p>The apps directory contains several CFCs. Each file contains
the code for a single application, such as the weather report or
dictionary lookup (definition.cfc). </p>
</li>
</ul>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec15849-7fe6__WSc3ff6d0ea77859461172e0811cbec15849-7fe0"><a name="WSc3ff6d0ea77859461172e0811cbec15849-7fe6__WSc3ff6d0ea77859461172e0811cbec15849-7fe0"><!-- --></a><h4 class="sectiontitle">Use the menu application with the Socket event gateway</h4><ol><li><p>On the Gateway Settings page in the ColdFusion Administrator,
click the Start SMS Test Server button.</p>
</li>
<li><p>On the Gateway Instances page in the ColdFusion Administrator,
start the SMS Menu App - 5551212 event gateway by clicking the green
play button (third button from the left in the Actions column).
If the Status does not say Running after a few seconds, click Refresh
to check that the server started.</p>
</li>
<li><p>In the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">cf_root</i>\WEB-INF\cfusion\bin directory on J2EE
configurations or the <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">cf_root</i>\bin directory on server configurations,
run the SMSClient.bat file (on Windows) or SMSClient.sh file (on
UNIX or Linux) to start the SMS phone simulator. The simulator is
preconfigured by default to “call” the default SMS event gateway
configuration. </p>
</li>
<li><p>Enter any character by typing or by using the mouse to click
the simulator keypad, and press Enter on your keyboard or click
Send on the simulator.</p>
</li>
<li><p>The menu application responds with the top-level menu. Enter
L for language tools such as a dictionary and thesaurus, S to get
stock quotes or weather forecasts, or C to get information about
the server. Press Enter on your keyboard or click Send on the simulator.</p>
</li>
<li><p>The application displays a submenu. For example, if you select
S in step 5, the options are Q for a stock quote, W for weather,
or B to go back to the previous menu. Enter your selection.</p>
</li>
<li><p>The application requests information such as a Zip code for
the weather, stock symbol for a price, word for the dictionary,
and so on. Enter and send the required information (or enter B to
go back to the menu).</p>
</li>
<li><p>The application gets and displays the requested information.
Depending on the application, you could also be prompted to enter
M to get more. Enter M (if more information is available), another
term, or B to return to the previous menu. </p>
</li>
<li><p>Continue by entering menu items and detailed information
requests. </p>
</li>
<li><p>To exit, select File &gt; Exit from the menu bar.</p>
</li>
</ol>
</div>
</div></div>


<!-- BEGIN USER PREFERENCES -->
          <div id="userprefs">
          </div>
<!-- END USER PREFERENCES -->

          <div id="related">
            
            
            <div class="separator"><a href="#top"><img src="images/BTT.jpg" /></a>&#160;</div>
          </div>
          <div id="footer">
<!-- BEGIN IONCOMMENTS -->
            <div id="ionComHere">
            </div>
<!-- END IONCOMMENTS -->


            <p id="creativecommons"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text"><img id="creativecommons_img" src="images/CC.png" alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" /></a>&nbsp;Twitter™ and Facebook posts are not covered under the terms of Creative Commons.</p>
          </div>
</td>
<td width="10px"></td>
<td id="inner_rightcolumn">

</td></tr></table>
      </div>
<!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-77ed.html" title="Using the CFML event gateway for asynchronous CFCs"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec22c24-77f0.html" title="Using the Instant Messaging Event Gateways"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WSc3ff6d0ea77859461172e0811cdd865267-8000.html"><b>Using External Resources</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-77e4.html"><b>Using Event Gateways</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
<!-- END CONTENT WRAPPER -->

</td>
<td id="col3">
    <div>
        <img src="images/adobe-lq.png" />
    </div>
</td>
</tr>
</table>
    </div>
<!-- END PAGE CONTENT WRAPPER -->
<script type="text/javascript">
<!--[CDATA[
scrollToNameAnchor();
// ]]-->
</script> 
<!--
    Description:
    This file generates the link to product support in the top right corner
-->

<style>
#menutop{
    position:absolute;
    top:4px;
    right:24px;
    width:auto;    
    font-size:11px;
    color:#fff;
    text-align:right;
}
#menutop a{
    color:#fff;
}
#menutop a:hover{
        text-decoration:underline;
}
</style>  
  
  
  
  
<div id="productmenu">
<!--googleoff: index-->
  <div id="menutop">


<script language=javascript type='text/javascript'>
    // darken menu text for products with light backgrounds
    var path = document.location.href.toLowerCase();
    if (path.indexOf("/acrobat/")           	> 0 ||
        path.indexOf("/acrobat.com/")       	> 0 ||
        path.indexOf("/acrobatConnectPro/") 	> 0 ||
        path.indexOf("/connect/")           	> 0 ||
        path.indexOf("/livecycledataserviceses/") > 0 ||
        path.indexOf("/muse/")         	> 0 ||
	path.indexOf("/presenter/")         	> 0 ||
        path.indexOf("/scene7/")            	> 0 ||
        path.indexOf("/flashmediaserver/")  	> 0 ||
        path.indexOf("/wave/")              	> 0 )
    {
        document.write('<style>#menutop a{color:#505050}</style>');
    }
    if (typeof('terms_AHV_PRODUCT_SUPPORT') != "undefined" && ! use_robohelp_behavior ){      
        if (path.indexOf("/muse/") > -1 ){
            var supportlink = '<a href="http://muse.adobe.com/support.html">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }else{
            var supportlink = '<a href="http://adobe.com/support">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }
        document.write( supportlink );
     }

</script> 

  </div>
<!--googleon: index-->
</div>



<style>
#online-privacy-policy{ 
    margin:10px 40px; 
    font-size:11px;
}
</style>

<p id="online-privacy-policy">
<script language="javascript">
var pageLoc = "en_US";
var metaElements = document.all ?
document.all.tags('meta') :
document.getElementsByTagName ?
document.getElementsByTagName ('meta') : new Array();
for (var m = 0; m < metaElements.length; m++) {
	if (metaElements[m].name == "lang") {
		pageLoc = metaElements[m].content;
		break;
	}
}
var ptn = /(..)-(..)/;
if (ptn.test(pageLoc)) {
	var languageCode = pageLoc.replace(ptn, "$1");
	var countryCode = pageLoc.replace(ptn, "$2");
	pageLoc = languageCode + "_" + countryCode.toUpperCase();
}

var policyLoc = "en_US";
var policyText = "Online Privacy Policy";
var policyPath = "";
var policyArray=[
"da_DK", "Online fortrolighedserklæring",
"de_DE", "Online-Datenschutzrichtlinie",
"es_ES", "Política de confidencialidad en línea",
"fi_FI", "Yksityisyyttä koskeva Online-toimintaohjelma",
"fr_FR", "Confidentialité et sécurité",
"it_IT", "Informativa sulla privacy online",
"ja_JP", "プライバシーポリシー",
"ko_KR", "Adobe 온라인 개인정보 보호정책",
"pt_BR", "Política de Confidencialidade On-line", 
"zh_CN", "在线隐私政策",
"zh_TW", "線上隱私政策"
];
var legalLoc = "en_US";
var legalText = "Legal Notices";
var legalPath = legalLoc;
var legalArray=[
"ar_AE", "إشعارات قانونية",
"bg_BG", "Юридически бележки",
"cs_CZ", "Právní upozornění",
"da_DK", "Juridiske meddelelser",
"de_DE", "Rechtliche Hinweise",
"el_GR", "Σημειώσεις νομικού περιεχομένου",
"es_ES", "Avisos legales",
"et_EE", "Juriidilised teated",
"fi_FI", "Lakisääteiset ilmoitukset",
"fr_FR", "Mentions légales",
"he_IL", "הצהרות משפטיות",
"hr_HR", "Pravne napomene",
"hu_HU", "Jogi közlemények",
"it_IT", "Informazioni legali",
"ja_JP", "法律上の注意",
"ko_KR", "법적 고지 사항",
"lt_LT", "Teisinės pastabos",
"lv_LV", "Juridisks paziņojums",
"nb_NO", "Juridiske merknader",
"nl_NL", "Juridische kennisgevingen",
"pl_PL", "Informacje prawne",
"pt_BR", "Aspectos jurídicos",
"ro_RO", "Prevederi legale",
"ru_RU", "Юридическая информация",
"sk_SK", "Právne upozornenie",
"sl_SI", "Pravni pouk",
"sv_SE", "Upphovsrätt",
"tr_TR", "Yasal uyarılar",
"uk_UA", "Юридична інформація",
"zh_CN", "法律声明",
"zh_TW", "法律注意事項"
];

ruPolicy = "http://www.adobe.com/ru/misc/privacy.html";
trPolicy = "http://www.adobe.com/tr/misc/privacy.html";

// Bug 2846992: LOC: RUS, TUR: The link to "Online Privacy Policy" should include language, currently it is not appearing.
if (pageLoc == "ru_RU") {
	policyPath = "ru";
}
else if (pageLoc == "tr_TR") {
	policyPath = "tr";
}
for (var i = 0; i < policyArray.length; i+=2) {
	if (pageLoc == policyArray[i]) {
		policyLoc = pageLoc;
		policyText = policyArray[i+1];
		var ptn = /(..)_(..)/;
		if (ptn.test(policyLoc)) {
			var countryCode = policyLoc.replace(ptn, "$2");
			policyPath = countryCode.toLowerCase();
		}
		break;
	}
}

for (var i = 0; i < legalArray.length; i+=2) {
	if (pageLoc == legalArray[i]) {
		legalLoc = pageLoc;
		legalText = legalArray[i+1];
		legalPath = legalLoc;
		break;
	}
}
if(agt.indexOf("community help client") > -1 ){
	document.write('<a href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
}else{
	//Open the privacy policy in a new window
	document.write('<a target="_blank" href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a target="_blank" href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
} 
</script>
</p>



<!-- localfooter.ssi -->

<script type="text/javascript">
    var debug = (top.location.href.indexOf("debug=true") > -1);
</script>

<script language="javascript">
document.write('<scr'+'ipt ' +
               'src="/en_US/ssi/_pod.js" ' +
               'language="javascript" ' +
               'charset="UTF-8"> ' +
               '</scr'+'ipt>');
</script>


<script type="text/javascript">
//
//  Ethnio survey code
//
/*          DocumentID      EthnioID */
/*          -------------   -------- */
var ethnio=["/en_US/flash/cs/using/WSb03e830bd6f770ee6664507612436d7dede-8000.html", "87462",
            "/en_US/creativesuite/cs/using/WSe851854fd1e0856a-4b08a77612477f69f15-8000.html",  "10441",
            "/en_US/dreamweaver/cs/using/WSEE4C0148-A6F4-4bf5-9DEF-CE06AB026214a.html",  "57412"
 
    ];
                        
    for ( var i = 0; i < ethnio.length ; i = i+2 ){
        if ( document.location.href.indexOf( ethnio[i] ) > -1 ){ 
            var headID = document.getElementsByTagName("head")[0];         
            var ethnioScript = document.createElement('script');
            ethnioScript.type = 'text/javascript';
            ethnioScript.src = 'http://ethn.io/remotes/' + ethnio[i+1];        
            if ( debug ){
                alert ("Using Ethnio script: " + ethnioScript.src );
            }else{
                headID.appendChild(ethnioScript);
            }
        }
    }
</script>



<div style="display: none;">
<!-- SiteCatalyst -->
<script language="JavaScript" type="text/javascript"><!--
var s_code=' ';
var s_docHost = window.location.hostname.toLowerCase();
var s_docURL = window.location.pathname.toLowerCase();
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
if (s_docHost.indexOf(".corp.adobe") != -1 || s_docHost.indexOf("stage.") != -1 || s_docHost.indexOf(".dev.adobe") != -1 || s_docHost.indexOf("staging.") != -1) scJsHost="";
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/omniture_s_code.js' type='text/javascript'%3E%3C/script%3E"));
//--></script>
<script type="text/javascript"><!--
var s_accountName;
s_server="www.adobe.com static content pages";
if (!window.s_account) s_accountName="mxmacromedia";
else s_accountName=window.s_account;

if (window.s_docURL.indexOf("/designcenter/") != -1)
  s_channel="Adobe Design Center";	
else if ((window.s_docHost.indexOf("labs.adobe") != -1) ||
(window.s_docHost.indexOf("labs-staging.") != -1))
  s_channel="Labs";
else if (window.s_docHost.indexOf("help.adobe.com") != -1) {
  s_channel="Support Help.adobe.com";
  if (window.s_docURL.indexOf("/en_us/") == -1) {
    s_docURLArray=s_docURL.split('/');
    s_pageName="http://help.adobe.com/"+s_docURLArray[1]+"/"+ s_docURLArray[2]+"/"+s_docURLArray[3];
    s_prop23="http://help.adobe.com"+window.location.pathname;
  }
}
else if (window.s_docHost.indexOf("kb2.adobe.com") != -1) {
  s_channel="Support Knowledgebase";
  s_prop23="http://kb2.adobe.com"+s_docURL+":";
  if (typeof(omtrProductList) != 'undefined' && omtrProductList.length > 0)
 {
    s_prop23=s_prop23+omtrProductList;
  }
}
else if (window.s_docHost.indexOf("resellers.adobe.com") != -1) {
		var s_pageName=document.getElementsByTagName("title")[0].text;
}

if (!window.scMMInclude) {
	var s_wd=window,s_tm=new Date;
	if(s_code!=' '){
		s_code=s_dc(s_accountName);
		if(s_code)document.write(s_code)
	} 
} else {
	s_wds(s_accountName);s_ca(s_accountName); 
}	

function sendAnalyticsEvent(str){var ns=s_accountName;if(str!=null)ns+=","+str;void(s_gs(ns));}
function sendLinkEvent(accnt,lnkname,type){
accnt=s_accountName;s_linkType=type;s_lnk=true;s_linkName=lnkname;void(s_gs(accnt));}
//--></script>
<noscript><img src="http://stats.adobe.com/b/ss/mxmacromedia/1/H.15-XELvs/0?pageName=http%3A//www.adobe.com%3A%20noscript&ch=http%3A//www.adobe.com%3A%20noscript&g=http%3A//www.adobe.com" height="1" width="1" border="0" alt="" /></noscript>
<!-- End SiteCatalyst -->
</div>

<script language="JavaScript" type="text/javascript">//<![CDATA[
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/atm/s_code_www.js' type='text/javascript'%3E%3C/script%3E"));
//]]></script>
<script type="text/javascript">//<![CDATA[
if(s_adobe){	
	s_adobe.server="www.adobe.com Static Content pages";
	/* Set pageName */
	s_adobe.s_URL="adobe.com"+((location.pathname.charAt(0)=='/')?location.pathname:'/'+location.pathname);
	if (s_adobe.s_URL.substring(s_adobe.s_URL.lastIndexOf('/')+1)=="") s_adobe.s_URL=s_adobe.s_URL+"index.html";
	s_adobe.s_URLSplit=s_adobe.s_URL.split("/");
	s_adobe.pageName=s_adobe.s_URLSplit.join(":");

	/* Set prop4 to language-locale */
	var s_meta=document.getElementsByTagName('meta'); 
      for (i=0; i<s_meta.length; i++) { 
        if (s_meta[i].getAttribute("http-equiv") == "Content-Language") { 
          s_adobe.prop4=s_meta[i].getAttribute("content"); 
	    s_adobe.prop4=s_adobe.prop4.replace(/\s+/g,'');
        } 
      } 
	s_adobe.t()
}
//]]></script>








  </body>
</html>