<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="lang" content="en-us" />
    <meta name="area" content="livedocs" />
    <title>Adobe&#160;ColdFusion&#160;9 * Working with queries and data</title>
    <link rel="shortcut icon" href="images/ColdFusionLinkIndicator.png" />
    <meta name="book" content="Developing&#160;ColdFusion 9 Applications" />
    <meta name="product" content="ColdFusion" />
    <meta name="keywords" content="" /><!--<PageMap><DataObject type="document"><Attribute name="product" value="ColdFusion"></Attribute><Attribute name="book" value="Developing&#160;ColdFusion 9 Applications"></Attribute><Attribute name="keywords" value=""></Attribute></DataObject></PageMap>-->
    
    <script type="text/javascript" language="Javascript" charset="UTF-8"><!--[CDATA[
        var currentTreeNode = "WSc3ff6d0ea77859461172e0811cbec0f76c-7ff4.html";
    document.cookie = "topicId=" + "WSc3ff6d0ea77859461172e0811cbec0f76c-7ff4.html";
// ]]--></script>
<script src="terms.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="help.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script>  <script src="utilities.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="event.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="treeview.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="toc.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script> <script src="swfobject.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>  <script src="booklist.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>
<script type="text/javascript">
<!--[CDATA[
var topictype = "topic";
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
  var linkId = document.createElement("link");
  linkId.href = "content-ie6.css";
  linkId.rel = "stylesheet";
  linkId.type = "text/css";
  headId.appendChild(linkId);
}
function initRoboHelpDOM() {
  if (use_chm_behavior) {
    hideElement("search");
  }
  if (use_robohelp_behavior) {
    hideElement("search");
    hideElement("productmenu");
    //hideElement("notyourversion");
  }
  if(!use_chc_behavior) {
    //document.getElementById("notyourversion").style.display = "inline";;
  }
}
var dirname = location.pathname.match( /.*\// );    
function setSearchUserPref(){
  if ( document.cookie.indexOf( "ah_searchpref" ) > -1 ) {
    if ( document.cookie.indexOf( dirname ) > 0 ) {
      document.search.gsa.checked = true ;
    }else{
      document.search.gsa.checked = false ;            
    }
  }
}
YAHOO.util.Event.onDOMReady(initRoboHelpDOM);
YAHOO.util.Event.onDOMReady(setSearchUserPref);
// ]]-->
</script>

<!-- ********************************** -->
<!-- START: ForeSee survey code in: /ssi/globalheader.ssi -->

<script type="text/javascript">
<!-- 
// Enable the survey for only English, German and Japanese
var agt=navigator.userAgent.toLowerCase();
if ( agt.indexOf("community help client") == -1 ){
    if ( document.location.href.indexOf("/en_US/") != -1 ){
        showSurvey();
//    }else if (document.location.href.indexOf("/de_DE/") != -1){
//         var locale="de";
//         showSurvey();
    }else if (document.location.href.indexOf("/ja_JP/") != -1 ){
         var locale="ja";
         showSurvey();
    }	
}

function showSurvey(){
	document.write('<script type="text/javascript" src="/js/foresee/foresee-trigger.js"><\/scr'+'ipt>');
}

// -->
</script>

<!-- END: ForeSee survey code -->
<!-- ******************************** -->




    <link rel="stylesheet" type="text/css" href="tree.css" />
    <link rel="stylesheet" type="text/css" href="content.css" />
    <link rel="stylesheet" type="text/css" href="localeSpecific.css" />
  </head>
  <body id="content_body" onload="window.focus();">
    <a name="top" shape="rect"><!--LeaveCommentHere--></a>
    
    <div id="mnemonic">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon" class="ColdFusion"><div class="banner"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html">Adobe&#160;ColdFusion&#160;9</a><span id="notyourversion">|&#160;
                    <a rel="nofollow" href="http://www.adobe.com/support/documentation/en/coldfusion/">Not your version?</a></span></div></div><!--googleon: index-->
    </div>
    
    <div id="searchbar">
<table id="searchbartable">
<tr>
<td colspan="2">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon"><div id="pdf"><img src="images/PDF.gif" width="16" height="16" /><a title="View Help PDF" href="coldfusion_9_dev.pdf">View Help PDF ( 23MB)</a></div></div><!--googleon: index-->
</td>
</tr>
</table>
    </div>

<!-- BEGIN SEARCH CONTENT -->
<form id="search" name="search" action="search.html" target="_self">
<script type="text/javascript">
<!--[CDATA[
if ( !use_chc_behavior ){
    if (typeof(terms_AHV_SEARCH_CONSTRAINT) != "undefined" && 
        terms_AHV_SEARCH_CONSTRAINT.length > 0 && 
        document.location.href.indexOf(".adobe.com") > 0){
        if ( typeof(terms_SEARCH_THIS_HELP_ONLY) != "undefined" && terms_SEARCH_THIS_HELP_ONLY == "ON" ) {
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                checked="checked" \
                value="1" ><\/input>'); 
                
        // Leave the "Search this help system only" checkbox unckecked
        }else{    
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                value="1" ><\/input>'); 
        }
        document.write('<span class="gsalabel">' + terms_AHV_SEARCH_CONSTRAINT + '<\/span><\/div>'); 
    }
    document.write('<input class="searchinput" \
        name="q" \
        id="q" \
        type="text" \
        maxlength="256" \
        value="' + terms_AHV_SEARCH_BUTTON + '" \
        onclick="clearSearch()"><\/input><input \
        type="button" \
        name="searchbutton" \
        class="searchbutton" \
        onclick="submit()"><\/input>'); 
} 
 
/* 
 * Start Functions 
 */
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}

// set search preferences
function setAHSearchPref(){
    if (document.search.gsa.checked == 1){
        setAHSearchCookie( dirname );
    }else{
        setAHSearchCookie( "community" );
    }
}

// Set search preferences cookie
function setAHSearchCookie( p ){
    // set cookie ah_searchpref with a value of the document path
    var expire=new Date();
    expire.setDate(expire.getDate()+365); // Cookie expires after 1 year (365 days) 
    document.cookie="ah_searchpref=" +p+ "; expires=" +expire.toGMTString()+ ";";
}

// ]]-->
</script> 
 </form>
<!-- END SEARCH CONTENT -->    



<!-- BEGIN PAGE CONTENT WRAPPER -->
    <div id="page_content_wrapper">
<!-- BEGIN PAGE WRAPPER -->
<table id="page_content_table">
<tr>

<td id="col2">
<!-- BEGIN CONTENT WRAPPER -->
<!-- BEGIN BREADCRUMBS -->

      
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-6eb7.html" title="Working with action pages"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec0f76c-7ffa.html" title="Returning results to the user"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WSc3ff6d0ea77859461172e0811cdd70508c-8000.html"><b>Requesting and Presenting Information</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7ffe.html"><b>Introduction to Retrieving and Formatting Data</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
      <div id="content_wrapper">
<!-- BEGIN PAGE TITLE -->
        <h1>Working with queries and data</h1>
<!-- END PAGE TITLE -->
<!-- BEGIN IONCOMMENTCOUNT -->
        <div id="ionCount">
        </div>
<!-- END IONCOMMENTCOUNT -->
<table id="inner_content_table" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td>
          <div style="border-top:#ccc solid 1px;"><p> </p>
          </div>
<p id="chcPromo" style="display:none;">
<a id="chcLink" href="http://www.adobe.com/support/chc/">
<img id="chcImage" src="http://www.adobe.com/support/chc/GetMoreHelpFeatures.png"/>
</a>
</p>
<script type="text/javascript" language="javascript" charset="utf-8">
<!--
var cfgArray = [];
//cfgArray["Acrobat_10.0_Professional.helpcfg"] = "acrobatpro";
//cfgArray["Acrobat_10.0_Standard.helpcfg"] = "acrobatstd";
cfgArray["Lightroom_3.0.helpcfg"] = "lightroom";
cfgArray["PhotoshopElements_8.0_Win.helpcfg"] = "photoshopelements";
cfgArray["PhotoshopElements_8.0_Mac.helpcfg"] = "photoshopelementsmac";
cfgArray["PremiereElements_8.0_Win.helpcfg"] = "premiereelements";

//cfgArray["AfterEffects_10.0.helpcfg"] = "aftereffects";
//cfgArray["AIR.helpcfg"] = "air";
//cfgArray["ColdFusionBuilder.helpcfg"] = "coldfusion";
//cfgArray["Contribute_6.0.helpcfg"] = "contribute";
//cfgArray["DeviceCentral_3.0.helpcfg"] = "devicecentral";
//cfgArray["Dreamweaver_11.0.helpcfg"] = "dreamweaver";
//cfgArray["EncoreDVD_5.0.helpcfg"] = "encore";
//cfgArray["ExtensionManager_3.0.helpcfg"] = "extension";
//cfgArray["Fireworks_11.0.helpcfg"] = "fireworks";
//cfgArray["Flash_11.0.helpcfg"] = "flash";
//cfgArray["Flex_4.0.helpcfg"] = "flashbuilder";
//cfgArray["FlashCatalyst_1.0.helpcfg"] = "flashcatalyst";
//cfgArray["Illustrator_15.0.helpcfg"] = "illustrator";
//cfgArray["InCopy_7.0.helpcfg"] = "incopy";
//cfgArray["InDesign_7.0.helpcfg"] = "indesign";
//cfgArray["OnLocation_5.0.helpcfg"] = "onlocation";
//cfgArray["Photoshop_12.0.helpcfg"] = "photoshop";
//cfgArray["PremierePro_5.0.helpcfg"] = "premierepro";

function getLangName() {
    var lang = "en-us";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if (ptn.test(lang)) {
        var languageCode = lang.replace(ptn, "$1");
        var countryCode = lang.replace(ptn, "$2");
        lang = languageCode + "_" + countryCode.toUpperCase();
    }
    return lang;
}

function getCountryName() {
    var lang = "";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if ((ptn.test(lang)) && (lang != "en-us")) {
        var countryCode = lang.replace(ptn, "$2");
        return "/" + countryCode;
    }
    return "";
}

if ( (typeof(terms_HELPCFG) != 'undefined')  && (terms_HELPCFG.indexOf(".helpcfg") != -1) ) {
    var stage   = (document.location.href.indexOf(".stage.") != -1) ? 'stage.' : '';
    var baseUrl = 'http://www.' + stage + 'adobe.com';
    var refpage = document.location.href.replace(/#.*$/, '');
	
	if ((!use_robohelp_behavior) && (terms_HELPCFG.length > 0) && (typeof(cfgArray[terms_HELPCFG]) != 'undefined') && (cfgArray[terms_HELPCFG].length > 0)) {
		if (document.getElementById) { // DOM3 = IE5, NS6
			var newHref = baseUrl + getCountryName() + "/support/chc/" + "?helpcfg=http://help." + stage + "adobe.com/HelpCfg/" + getLangName() + "/" + terms_HELPCFG + "&url=" + refpage + "&product=" + cfgArray[terms_HELPCFG];
			var newSrc = baseUrl + getCountryName() + "/support/chc/GetMoreHelpFeatures.png";
			document.getElementById("chcPromo").style.display = "block";
			document.getElementById("chcLink").href = newHref;
			document.getElementById("chcImage").src = newSrc;
		}
	}
}

//-->
</script>



          <div id="minitoc"><div class="t"><div class="b"><div><ul id="minitoc-links"><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec0f76c-7fe2"><span class="topictitle1">Using HTML tables to display query results</span>
</a></p><ul><li><p><a href="#WSf01dbd23413dda0e3afdb85a1200fc46c9e-7fff"><span class="topictitle2">Place the query results in a table</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec0f76c-7ff1"><span class="topictitle1">Formatting individual data items</span>
</a></p><ul><li><p><a href="#WSf01dbd23413dda0e3afdb85a1200fc46c9e-7ffe"><span class="topictitle2">Change the format of the Salary</span>
</a></p></li></ul></li><li><p><a href="#WSc3ff6d0ea77859461172e0811cbec0f76c-7fee"><span class="topictitle1">Building flexible search interfaces</span>
</a></p><ul><li><p><a href="#WSf01dbd23413dda0e3afdb85a1200fc46c9e-7ffd"><span class="topictitle2">Build a more flexible search interface</span>
</a></p></li></ul></li></ul></div></div></div></div><div><p>The ability to generate and display query data is one of
the most important and flexible features of ColdFusion. Some of
these tools are effective for presenting any data, not just query
results.</p>
</div>
<div id="WSc3ff6d0ea77859461172e0811cbec0f76c-7fe2" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec0f76c-7fe2"><!-- --></a><h2 class="topictitle2">Using HTML tables to display query results</h2><div><p>You
can use HTML tables to specify how the results of a query appear
on a page. To do so, you place the <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7ff6.html" target="_self">cfoutput</a></samp> tag <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">inside</i> the
table tags. You can also use the HTML <samp class="codeph">th</samp> tag to
place column labels in a header row. To create a row in the table for
each row in the query results, place the <samp class="codeph">tr</samp> block
inside the <samp class="codeph">cfoutput</samp> tag. </p>
<p>In
addition, you can use CFML functions to format individual pieces
of data, such as dates and numeric values.</p>
</div><div id="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7fff" class="nochunk"><a name="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7fff"><!-- --></a><h3 class="topictitle3">Place the query results in a table</h3><div><ol><li><p>Open the ColdFusion actionpage.cfm page in your
editor.</p>
</li>
<li><p>Modify the page so that it appears as follows:</p>
<pre>&lt;html&gt; 
&lt;head&gt; 
&lt;title&gt;Retrieving Employee Data Based on Criteria from Form&lt;/title&gt; 
&lt;/head&gt; 
 
&lt;body&gt; 
&lt;cfquery name="GetEmployees" datasource="cfdocexamples"&gt; 
    SELECT FirstName, LastName, Salary 
    FROM Employee 
    WHERE LastName=&lt;cfqueryparam value="#Form.LastName#"  
    CFSQLType="CF_SQL_VARCHAR"&gt; 
&lt;/cfquery&gt; 
&lt;h4&gt;Employee Data Based on Criteria from Form&lt;/h4&gt; 
<strong>&lt;table&gt;</strong> 
<strong>&lt;tr&gt;</strong> 
<strong>&lt;th&gt;First Name&lt;/th&gt;</strong> 
<strong>&lt;th&gt;Last Name&lt;/th&gt;</strong> 
<strong>&lt;th&gt;Salary&lt;/th&gt;</strong> 
<strong>&lt;/tr&gt;</strong> 
<strong>&lt;cfoutput query="GetEmployees"&gt;</strong> 
<strong>&lt;tr&gt;</strong> 
<strong>&lt;td&gt;#FirstName#&lt;/td&gt;</strong> 
<strong>&lt;td&gt;#LastName#&lt;/td&gt;</strong> 
<strong>&lt;td&gt;#Salary#&lt;/td&gt;</strong> 
<strong>&lt;/tr&gt;</strong> 
<strong>&lt;/cfoutput&gt;</strong> 
<strong>&lt;/table&gt;</strong> 
&lt;br&gt; 
&lt;cfif IsDefined("Form.Contractor")&gt; 
    &lt;cfoutput&gt;Contractor: #Form.Contractor#&lt;/cfoutput&gt; 
&lt;/cfif&gt; 
&lt;/body&gt; 
&lt;/html&gt;</pre>
</li>
<li><p>Save the page as actionpage.cfm in the myapps directory. </p>
</li>
<li><p>View the formpage.cfm page in your browser.</p>
</li>
<li><p>Enter Smith in the Last Name text box and submit the form.</p>
<p>The
records that match the criteria specified in the form appear in
a table. </p>
</li>
</ol>
<div class="section" id="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7fff__WSc3ff6d0ea77859461172e0811cbec0f76c-7ff2"><a name="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7fff__WSc3ff6d0ea77859461172e0811cbec0f76c-7ff2"><!-- --></a><h4 class="sectiontitle">Reviewing the code</h4><p>The
following table describes the highlighted code and its function:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e68646"><p>Code</p>
</th>
<th valign="top" width="NaN%" id="d17e68649"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e68646 "><div class="para"><pre>&lt;table&gt;</pre>
</div>
</td>
<td valign="top" width="NaN%" headers="d17e68649 "><p>Places data into a table.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e68646 "><div class="para"><pre>&lt;tr&gt; 
&lt;th&gt;First Name&lt;/th&gt; 
&lt;th&gt;Last Name&lt;/th&gt; 
&lt;th&gt;Salary&lt;/th&gt; 
&lt;/tr&gt;</pre>
</div>
</td>
<td valign="top" width="NaN%" headers="d17e68649 "><p>In the first row of the table, includes
three columns, with the headings: First Name, Last Name, and Salary.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e68646 "><div class="para"><pre>&lt;cfoutput query="GetEmployees"&gt;</pre>
</div>
</td>
<td valign="top" width="NaN%" headers="d17e68649 "><p>Tells ColdFusion to display the results
of the GetEmployees query.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e68646 "><div class="para"><pre>&lt;tr&gt; 
&lt;td&gt;#FirstName#&lt;/td&gt; 
&lt;td&gt;#LastName#&lt;/td&gt; 
&lt;td&gt;#Salary#&lt;/td&gt; 
&lt;/tr&gt;</pre>
</div>
</td>
<td valign="top" width="NaN%" headers="d17e68649 "><p>For each record in the query, creates a
row in the table, with three columns that display the values of
the FirstName, LastName, and Salary fields of the record. </p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e68646 "><div class="para"><pre>&lt;/cfoutput&gt;</pre>
</div>
</td>
<td valign="top" width="NaN%" headers="d17e68649 "><p>Ends the output region.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e68646 "><div class="para"><pre>&lt;/table&gt;</pre>
</div>
</td>
<td valign="top" width="NaN%" headers="d17e68649 "><p>Ends the table.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec0f76c-7ff1" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec0f76c-7ff1"><!-- --></a><h2 class="topictitle2">Formatting individual data items</h2><div><p>You can format individual data items. For
example, you can format the salary data as monetary values. To format
the salary data using the dollar format, you use the CFML function <samp class="codeph"><a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7b05.html" target="_self">DollarFormat</a></samp>.</p>
</div><div id="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7ffe" class="nochunk"><a name="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7ffe"><!-- --></a><h3 class="topictitle3">Change the format of the Salary</h3><div><ol><li><p>Open the file actionpage.cfm in your editor. </p>
</li>
<li><p>Change the following line:</p>
<pre>&lt;td&gt;#Salary#&lt;/td&gt; </pre>
<p>to</p>
<pre>&lt;td&gt;#DollarFormat(Salary)#&lt;/td&gt;</pre>
</li>
<li><p>Save the page. </p>
</li>
</ol>
</div></div></div>
<div id="WSc3ff6d0ea77859461172e0811cbec0f76c-7fee" class="nochunk"><a name="WSc3ff6d0ea77859461172e0811cbec0f76c-7fee"><!-- --></a><h2 class="topictitle2">Building flexible search interfaces</h2><div><p>One
option with forms is to build a search based on the form data. For
example, you could use form data as part of the WHERE clause to
construct a database query.</p>
<p>To give users the option to enter
multiple search criteria in a form, you can wrap conditional logic
around a SQL AND clause as part of the WHERE clause. The following
action page allows users to search for employees by department,
last name, or both.</p>
<div class="note"><span class="notetitle">Note:  </span>ColdFusion provides the Verity search utility
that you can also use to perform a search. For more information,
see <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7b7e.html">Building a Search Interface</a>.</div>
</div><div id="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7ffd" class="nochunk"><a name="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7ffd"><!-- --></a><h3 class="topictitle3">Build a more flexible search interface</h3><div><ol><li><p>Open the ColdFusion actionpage.cfm page in your
editor.</p>
</li>
<li><p>Modify the page so that it appears as follows:</p>
<pre>&lt;html&gt; 
&lt;head&gt; 
&lt;title&gt;Retrieving Employee Data Based on Criteria from Form&lt;/title&gt; 
&lt;/head&gt; 
&lt;body&gt; 
&lt;cfquery name="GetEmployees" datasource="cfdocexamples"&gt;  
    <strong>SELECT Departmt.Dept_Name,</strong> 
        <strong>Employee.FirstName,</strong> 
        <strong>Employee.LastName,</strong> 
        <strong>Employee.StartDate,</strong> 
        <strong>Employee.Salary</strong> 
    <strong>FROM Departmt, Employee</strong> 
    <strong>WHERE Departmt.Dept_ID = Employee.Dept_ID</strong> 
    <strong>&lt;cfif IsDefined("Form.Department")&gt;</strong> 
    <strong>AND Departmt.Dept_Name=&lt;cfqueryparam value="#Form.Department#" </strong> 
                <strong>CFSQLType="CF_SQL_VARCHAR"&gt; </strong> 
    <strong>&lt;/cfif&gt;</strong> 
    <strong>&lt;cfif Form.LastName IS NOT ""&gt;</strong> 
        <strong>AND Employee.LastName=&lt;cfqueryparam value="#Form.LastName#" </strong> 
                <strong>CFSQLType="CF_SQL_VARCHAR"&gt;</strong> 
    <strong>&lt;/cfif&gt;</strong> 
&lt;/cfquery&gt; 
 
&lt;h4&gt;Employee Data Based on Criteria from Form&lt;/h4&gt; 
&lt;table&gt; 
&lt;tr&gt; 
&lt;th&gt;First Name&lt;/th&gt; 
&lt;th&gt;Last Name&lt;/th&gt; 
&lt;th&gt;Salary&lt;/th&gt; 
&lt;/tr&gt; 
&lt;cfoutput query="GetEmployees"&gt; 
&lt;tr&gt; 
&lt;td&gt;#FirstName#&lt;/td&gt; 
&lt;td&gt;#LastName#&lt;/td&gt; 
&lt;td&gt;#Salary#&lt;/td&gt; 
&lt;/tr&gt; 
&lt;/cfoutput&gt; 
&lt;/table&gt; 
&lt;/body&gt; 
&lt;/html&gt;</pre>
</li>
<li><p>Save the file.</p>
</li>
<li><p>View the formpage.cfm page in your browser.</p>
</li>
<li><p>Select a department, optionally enter a last name, and submit
the form.</p>
</li>
</ol>
<div class="section" id="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7ffd__WSc3ff6d0ea77859461172e0811cbec0f76c-7ffb"><a name="WSf01dbd23413dda0e3afdb85a1200fc46c9e-7ffd__WSc3ff6d0ea77859461172e0811cbec0f76c-7ffb"><!-- --></a><h4 class="sectiontitle">Reviewing the code</h4><p>The following table describes the highlighted
code and its function:</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e68832"><p>Code</p>
</th>
<th valign="top" width="NaN%" id="d17e68835"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e68832 "><div class="para"><pre>SELECT Departmt.Dept_Name, 
    Employee.FirstName, 
    Employee.LastName, 
    Employee.StartDate, 
    Employee.Salary 
FROM Departmt, Employee 
WHERE Departmt.Dept_ID = Employee.Dept_ID</pre>
</div>
</td>
<td valign="top" width="NaN%" headers="d17e68835 "><p>Retrieves the fields listed from the Departmt
and Employee tables, joining the tables based on the Dept_ID field
in each table.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e68832 "><div class="para"><pre>&lt;cfif IsDefined("Form.Department")&gt; 
    AND Departmt.Dept_Name=&lt;cfqueryparam value="#Form.Department#" 
                CFSQLType="CF_SQL_VARCHAR"&gt; 
    &lt;/cfif&gt;</pre>
</div>
</td>
<td valign="top" width="NaN%" headers="d17e68835 "><p>If the user specified a department on the
form, only retrieves records where the department name is the same
as the one that the user specified. Use number signs (#) in the
SQL AND statement to identify Form.Department as a ColdFusion variable,
but not in the <a href="http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fbd.html" target="_self">IsDefined</a> function.</p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e68832 "><div class="para"><pre>&lt;cfif Form.LastName IS NOT ""&gt; 
        AND Employee.LastName=&lt;cfqueryparam value="#Form.LastName#" 
                CFSQLType="CF_SQL_VARCHAR"&gt; 
    &lt;/cfif&gt;</pre>
</div>
</td>
<td valign="top" width="NaN%" headers="d17e68835 "><p>If the user specified a last name in the
form, only retrieves the records in which the last name is the same
as the one that the user entered in the form.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></div></div>


<!-- BEGIN USER PREFERENCES -->
          <div id="userprefs">
          </div>
<!-- END USER PREFERENCES -->

          <div id="related">
            
            
            <div class="separator"><a href="#top"><img src="images/BTT.jpg" /></a>&#160;</div>
          </div>
          <div id="footer">
<!-- BEGIN IONCOMMENTS -->
            <div id="ionComHere">
            </div>
<!-- END IONCOMMENTS -->


            <p id="creativecommons"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text"><img id="creativecommons_img" src="images/CC.png" alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" /></a>&nbsp;Twitter™ and Facebook posts are not covered under the terms of Creative Commons.</p>
          </div>
</td>
<td width="10px"></td>
<td id="inner_rightcolumn">

</td></tr></table>
      </div>
<!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-6eb7.html" title="Working with action pages"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec0f76c-7ffa.html" title="Returning results to the user"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e-446b5201205757ce2b-8000.html"><b>Developing&#160;ColdFusion 9 Applications</b></a> / <a href="WSc3ff6d0ea77859461172e0811cdd70508c-8000.html"><b>Requesting and Presenting Information</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec22c24-7ffe.html"><b>Introduction to Retrieving and Formatting Data</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
<!-- END CONTENT WRAPPER -->

</td>
<td id="col3">
    <div>
        <img src="images/adobe-lq.png" />
    </div>
</td>
</tr>
</table>
    </div>
<!-- END PAGE CONTENT WRAPPER -->
<script type="text/javascript">
<!--[CDATA[
scrollToNameAnchor();
// ]]-->
</script> 
<!--
    Description:
    This file generates the link to product support in the top right corner
-->

<style>
#menutop{
    position:absolute;
    top:4px;
    right:24px;
    width:auto;    
    font-size:11px;
    color:#fff;
    text-align:right;
}
#menutop a{
    color:#fff;
}
#menutop a:hover{
        text-decoration:underline;
}
</style>  
  
  
  
  
<div id="productmenu">
<!--googleoff: index-->
  <div id="menutop">


<script language=javascript type='text/javascript'>
    // darken menu text for products with light backgrounds
    var path = document.location.href.toLowerCase();
    if (path.indexOf("/acrobat/")           	> 0 ||
        path.indexOf("/acrobat.com/")       	> 0 ||
        path.indexOf("/acrobatConnectPro/") 	> 0 ||
        path.indexOf("/connect/")           	> 0 ||
        path.indexOf("/livecycledataserviceses/") > 0 ||
        path.indexOf("/muse/")         	> 0 ||
	path.indexOf("/presenter/")         	> 0 ||
        path.indexOf("/scene7/")            	> 0 ||
        path.indexOf("/flashmediaserver/")  	> 0 ||
        path.indexOf("/wave/")              	> 0 )
    {
        document.write('<style>#menutop a{color:#505050}</style>');
    }
    if (typeof('terms_AHV_PRODUCT_SUPPORT') != "undefined" && ! use_robohelp_behavior ){      
        if (path.indexOf("/muse/") > -1 ){
            var supportlink = '<a href="http://muse.adobe.com/support.html">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }else{
            var supportlink = '<a href="http://adobe.com/support">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }
        document.write( supportlink );
     }

</script> 

  </div>
<!--googleon: index-->
</div>



<style>
#online-privacy-policy{ 
    margin:10px 40px; 
    font-size:11px;
}
</style>

<p id="online-privacy-policy">
<script language="javascript">
var pageLoc = "en_US";
var metaElements = document.all ?
document.all.tags('meta') :
document.getElementsByTagName ?
document.getElementsByTagName ('meta') : new Array();
for (var m = 0; m < metaElements.length; m++) {
	if (metaElements[m].name == "lang") {
		pageLoc = metaElements[m].content;
		break;
	}
}
var ptn = /(..)-(..)/;
if (ptn.test(pageLoc)) {
	var languageCode = pageLoc.replace(ptn, "$1");
	var countryCode = pageLoc.replace(ptn, "$2");
	pageLoc = languageCode + "_" + countryCode.toUpperCase();
}

var policyLoc = "en_US";
var policyText = "Online Privacy Policy";
var policyPath = "";
var policyArray=[
"da_DK", "Online fortrolighedserklæring",
"de_DE", "Online-Datenschutzrichtlinie",
"es_ES", "Política de confidencialidad en línea",
"fi_FI", "Yksityisyyttä koskeva Online-toimintaohjelma",
"fr_FR", "Confidentialité et sécurité",
"it_IT", "Informativa sulla privacy online",
"ja_JP", "プライバシーポリシー",
"ko_KR", "Adobe 온라인 개인정보 보호정책",
"pt_BR", "Política de Confidencialidade On-line", 
"zh_CN", "在线隐私政策",
"zh_TW", "線上隱私政策"
];
var legalLoc = "en_US";
var legalText = "Legal Notices";
var legalPath = legalLoc;
var legalArray=[
"ar_AE", "إشعارات قانونية",
"bg_BG", "Юридически бележки",
"cs_CZ", "Právní upozornění",
"da_DK", "Juridiske meddelelser",
"de_DE", "Rechtliche Hinweise",
"el_GR", "Σημειώσεις νομικού περιεχομένου",
"es_ES", "Avisos legales",
"et_EE", "Juriidilised teated",
"fi_FI", "Lakisääteiset ilmoitukset",
"fr_FR", "Mentions légales",
"he_IL", "הצהרות משפטיות",
"hr_HR", "Pravne napomene",
"hu_HU", "Jogi közlemények",
"it_IT", "Informazioni legali",
"ja_JP", "法律上の注意",
"ko_KR", "법적 고지 사항",
"lt_LT", "Teisinės pastabos",
"lv_LV", "Juridisks paziņojums",
"nb_NO", "Juridiske merknader",
"nl_NL", "Juridische kennisgevingen",
"pl_PL", "Informacje prawne",
"pt_BR", "Aspectos jurídicos",
"ro_RO", "Prevederi legale",
"ru_RU", "Юридическая информация",
"sk_SK", "Právne upozornenie",
"sl_SI", "Pravni pouk",
"sv_SE", "Upphovsrätt",
"tr_TR", "Yasal uyarılar",
"uk_UA", "Юридична інформація",
"zh_CN", "法律声明",
"zh_TW", "法律注意事項"
];

ruPolicy = "http://www.adobe.com/ru/misc/privacy.html";
trPolicy = "http://www.adobe.com/tr/misc/privacy.html";

// Bug 2846992: LOC: RUS, TUR: The link to "Online Privacy Policy" should include language, currently it is not appearing.
if (pageLoc == "ru_RU") {
	policyPath = "ru";
}
else if (pageLoc == "tr_TR") {
	policyPath = "tr";
}
for (var i = 0; i < policyArray.length; i+=2) {
	if (pageLoc == policyArray[i]) {
		policyLoc = pageLoc;
		policyText = policyArray[i+1];
		var ptn = /(..)_(..)/;
		if (ptn.test(policyLoc)) {
			var countryCode = policyLoc.replace(ptn, "$2");
			policyPath = countryCode.toLowerCase();
		}
		break;
	}
}

for (var i = 0; i < legalArray.length; i+=2) {
	if (pageLoc == legalArray[i]) {
		legalLoc = pageLoc;
		legalText = legalArray[i+1];
		legalPath = legalLoc;
		break;
	}
}
if(agt.indexOf("community help client") > -1 ){
	document.write('<a href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
}else{
	//Open the privacy policy in a new window
	document.write('<a target="_blank" href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a target="_blank" href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
} 
</script>
</p>



<!-- localfooter.ssi -->

<script type="text/javascript">
    var debug = (top.location.href.indexOf("debug=true") > -1);
</script>

<script language="javascript">
document.write('<scr'+'ipt ' +
               'src="/en_US/ssi/_pod.js" ' +
               'language="javascript" ' +
               'charset="UTF-8"> ' +
               '</scr'+'ipt>');
</script>


<script type="text/javascript">
//
//  Ethnio survey code
//
/*          DocumentID      EthnioID */
/*          -------------   -------- */
var ethnio=["/en_US/flash/cs/using/WSb03e830bd6f770ee6664507612436d7dede-8000.html", "87462",
            "/en_US/creativesuite/cs/using/WSe851854fd1e0856a-4b08a77612477f69f15-8000.html",  "10441",
            "/en_US/dreamweaver/cs/using/WSEE4C0148-A6F4-4bf5-9DEF-CE06AB026214a.html",  "57412"
 
    ];
                        
    for ( var i = 0; i < ethnio.length ; i = i+2 ){
        if ( document.location.href.indexOf( ethnio[i] ) > -1 ){ 
            var headID = document.getElementsByTagName("head")[0];         
            var ethnioScript = document.createElement('script');
            ethnioScript.type = 'text/javascript';
            ethnioScript.src = 'http://ethn.io/remotes/' + ethnio[i+1];        
            if ( debug ){
                alert ("Using Ethnio script: " + ethnioScript.src );
            }else{
                headID.appendChild(ethnioScript);
            }
        }
    }
</script>



<div style="display: none;">
<!-- SiteCatalyst -->
<script language="JavaScript" type="text/javascript"><!--
var s_code=' ';
var s_docHost = window.location.hostname.toLowerCase();
var s_docURL = window.location.pathname.toLowerCase();
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
if (s_docHost.indexOf(".corp.adobe") != -1 || s_docHost.indexOf("stage.") != -1 || s_docHost.indexOf(".dev.adobe") != -1 || s_docHost.indexOf("staging.") != -1) scJsHost="";
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/omniture_s_code.js' type='text/javascript'%3E%3C/script%3E"));
//--></script>
<script type="text/javascript"><!--
var s_accountName;
s_server="www.adobe.com static content pages";
if (!window.s_account) s_accountName="mxmacromedia";
else s_accountName=window.s_account;

if (window.s_docURL.indexOf("/designcenter/") != -1)
  s_channel="Adobe Design Center";	
else if ((window.s_docHost.indexOf("labs.adobe") != -1) ||
(window.s_docHost.indexOf("labs-staging.") != -1))
  s_channel="Labs";
else if (window.s_docHost.indexOf("help.adobe.com") != -1) {
  s_channel="Support Help.adobe.com";
  if (window.s_docURL.indexOf("/en_us/") == -1) {
    s_docURLArray=s_docURL.split('/');
    s_pageName="http://help.adobe.com/"+s_docURLArray[1]+"/"+ s_docURLArray[2]+"/"+s_docURLArray[3];
    s_prop23="http://help.adobe.com"+window.location.pathname;
  }
}
else if (window.s_docHost.indexOf("kb2.adobe.com") != -1) {
  s_channel="Support Knowledgebase";
  s_prop23="http://kb2.adobe.com"+s_docURL+":";
  if (typeof(omtrProductList) != 'undefined' && omtrProductList.length > 0)
 {
    s_prop23=s_prop23+omtrProductList;
  }
}
else if (window.s_docHost.indexOf("resellers.adobe.com") != -1) {
		var s_pageName=document.getElementsByTagName("title")[0].text;
}

if (!window.scMMInclude) {
	var s_wd=window,s_tm=new Date;
	if(s_code!=' '){
		s_code=s_dc(s_accountName);
		if(s_code)document.write(s_code)
	} 
} else {
	s_wds(s_accountName);s_ca(s_accountName); 
}	

function sendAnalyticsEvent(str){var ns=s_accountName;if(str!=null)ns+=","+str;void(s_gs(ns));}
function sendLinkEvent(accnt,lnkname,type){
accnt=s_accountName;s_linkType=type;s_lnk=true;s_linkName=lnkname;void(s_gs(accnt));}
//--></script>
<noscript><img src="http://stats.adobe.com/b/ss/mxmacromedia/1/H.15-XELvs/0?pageName=http%3A//www.adobe.com%3A%20noscript&ch=http%3A//www.adobe.com%3A%20noscript&g=http%3A//www.adobe.com" height="1" width="1" border="0" alt="" /></noscript>
<!-- End SiteCatalyst -->
</div>

<script language="JavaScript" type="text/javascript">//<![CDATA[
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/atm/s_code_www.js' type='text/javascript'%3E%3C/script%3E"));
//]]></script>
<script type="text/javascript">//<![CDATA[
if(s_adobe){	
	s_adobe.server="www.adobe.com Static Content pages";
	/* Set pageName */
	s_adobe.s_URL="adobe.com"+((location.pathname.charAt(0)=='/')?location.pathname:'/'+location.pathname);
	if (s_adobe.s_URL.substring(s_adobe.s_URL.lastIndexOf('/')+1)=="") s_adobe.s_URL=s_adobe.s_URL+"index.html";
	s_adobe.s_URLSplit=s_adobe.s_URL.split("/");
	s_adobe.pageName=s_adobe.s_URLSplit.join(":");

	/* Set prop4 to language-locale */
	var s_meta=document.getElementsByTagName('meta'); 
      for (i=0; i<s_meta.length; i++) { 
        if (s_meta[i].getAttribute("http-equiv") == "Content-Language") { 
          s_adobe.prop4=s_meta[i].getAttribute("content"); 
	    s_adobe.prop4=s_adobe.prop4.replace(/\s+/g,'');
        } 
      } 
	s_adobe.t()
}
//]]></script>








  </body>
</html>