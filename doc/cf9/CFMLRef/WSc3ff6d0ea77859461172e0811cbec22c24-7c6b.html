<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0022)http://help.adobe.com/ -->
<html lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="lang" content="en-us" />
    <meta name="area" content="livedocs" />
    <title>Adobe&#160;ColdFusion&#160;9 * cftransaction</title>
    <link rel="shortcut icon" href="images/ColdFusionLinkIndicator.png" />
    <meta name="book" content="ColdFusion&#160;9&#160;CFML&#160;Reference" />
    <meta name="product" content="ColdFusion" />
    <meta name="keywords" content="" /><!--<PageMap><DataObject type="document"><Attribute name="product" value="ColdFusion"></Attribute><Attribute name="book" value="ColdFusion&#160;9&#160;CFML&#160;Reference"></Attribute><Attribute name="keywords" value=""></Attribute></DataObject></PageMap>-->
    
    <script type="text/javascript" language="Javascript" charset="UTF-8"><!--[CDATA[
        var currentTreeNode = "WSc3ff6d0ea77859461172e0811cbec22c24-7c6b.html";
    document.cookie = "topicId=" + "WSc3ff6d0ea77859461172e0811cbec22c24-7c6b.html";
// ]]--></script>
<script src="terms.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="help.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script>  <script src="utilities.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="event.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="treeview.js" type="text/javascript" language="Javascript" charset="UTF-8">...</script> <script src="toc.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script> <script src="swfobject.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>  <script src="booklist.js" language="Javascript" type="text/javascript" charset="UTF-8">..</script>
<script type="text/javascript">
<!--[CDATA[
var topictype = "topic";
var headId = document.getElementsByTagName("head")[0];         
if (use_ie_6_behavior) {
  var linkId = document.createElement("link");
  linkId.href = "content-ie6.css";
  linkId.rel = "stylesheet";
  linkId.type = "text/css";
  headId.appendChild(linkId);
}
function initRoboHelpDOM() {
  if (use_chm_behavior) {
    hideElement("search");
  }
  if (use_robohelp_behavior) {
    hideElement("search");
    hideElement("productmenu");
    //hideElement("notyourversion");
  }
  if(!use_chc_behavior) {
    //document.getElementById("notyourversion").style.display = "inline";;
  }
}
var dirname = location.pathname.match( /.*\// );    
function setSearchUserPref(){
  if ( document.cookie.indexOf( "ah_searchpref" ) > -1 ) {
    if ( document.cookie.indexOf( dirname ) > 0 ) {
      document.search.gsa.checked = true ;
    }else{
      document.search.gsa.checked = false ;            
    }
  }
}
YAHOO.util.Event.onDOMReady(initRoboHelpDOM);
YAHOO.util.Event.onDOMReady(setSearchUserPref);
// ]]-->
</script>

<!-- ********************************** -->
<!-- START: ForeSee survey code in: /ssi/globalheader.ssi -->

<script type="text/javascript">
<!-- 
// Enable the survey for only English, German and Japanese
var agt=navigator.userAgent.toLowerCase();
if ( agt.indexOf("community help client") == -1 ){
    if ( document.location.href.indexOf("/en_US/") != -1 ){
        showSurvey();
//    }else if (document.location.href.indexOf("/de_DE/") != -1){
//         var locale="de";
//         showSurvey();
    }else if (document.location.href.indexOf("/ja_JP/") != -1 ){
         var locale="ja";
         showSurvey();
    }	
}

function showSurvey(){
	document.write('<script type="text/javascript" src="/js/foresee/foresee-trigger.js"><\/scr'+'ipt>');
}

// -->
</script>

<!-- END: ForeSee survey code -->
<!-- ******************************** -->




    <link rel="stylesheet" type="text/css" href="tree.css" />
    <link rel="stylesheet" type="text/css" href="content.css" />
    <link rel="stylesheet" type="text/css" href="localeSpecific.css" />
  </head>
  <body id="content_body" onload="window.focus();">
    <a name="top" shape="rect"><!--LeaveCommentHere--></a>
    
    <div id="mnemonic">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon" class="ColdFusion"><div class="banner"><a href="WSf01dbd23413dda0e50e0885e12057559231-8000.html">Adobe&#160;ColdFusion&#160;9</a><span id="notyourversion">|&#160;
                    <a rel="nofollow" href="http://www.adobe.com/support/documentation/en/coldfusion/">Not your version?</a></span></div></div><!--googleon: index-->
    </div>
    
    <div id="searchbar">
<table id="searchbartable">
<tr>
<td colspan="2">
      <!--googleoff: index--><div xmlns:adobe="http://www.adobe.com/saxon"><div id="pdf"><img src="images/PDF.gif" width="16" height="16" /><a title="View Help PDF" href="coldfusion_9_cfmlref.pdf">View Help PDF ( 32MB)</a></div></div><!--googleon: index-->
</td>
</tr>
</table>
    </div>

<!-- BEGIN SEARCH CONTENT -->
<form id="search" name="search" action="search.html" target="_self">
<script type="text/javascript">
<!--[CDATA[
if ( !use_chc_behavior ){
    if (typeof(terms_AHV_SEARCH_CONSTRAINT) != "undefined" && 
        terms_AHV_SEARCH_CONSTRAINT.length > 0 && 
        document.location.href.indexOf(".adobe.com") > 0){
        if ( typeof(terms_SEARCH_THIS_HELP_ONLY) != "undefined" && terms_SEARCH_THIS_HELP_ONLY == "ON" ) {
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                checked="checked" \
                value="1" ><\/input>'); 
                
        // Leave the "Search this help system only" checkbox unckecked
        }else{    
            document.write('<div id="searchscope"> \
                <input onchange="setAHSearchPref();" \
                class="gsa" \
                name="gsa" \
                id="gsa" \
                type="checkbox" \
                value="1" ><\/input>'); 
        }
        document.write('<span class="gsalabel">' + terms_AHV_SEARCH_CONSTRAINT + '<\/span><\/div>'); 
    }
    document.write('<input class="searchinput" \
        name="q" \
        id="q" \
        type="text" \
        maxlength="256" \
        value="' + terms_AHV_SEARCH_BUTTON + '" \
        onclick="clearSearch()"><\/input><input \
        type="button" \
        name="searchbutton" \
        class="searchbutton" \
        onclick="submit()"><\/input>'); 
} 
 
/* 
 * Start Functions 
 */
function clearSearch(){
    if (document.search.q.value == terms_AHV_SEARCH_BUTTON){document.search.q.value = ""}; 
}

// set search preferences
function setAHSearchPref(){
    if (document.search.gsa.checked == 1){
        setAHSearchCookie( dirname );
    }else{
        setAHSearchCookie( "community" );
    }
}

// Set search preferences cookie
function setAHSearchCookie( p ){
    // set cookie ah_searchpref with a value of the document path
    var expire=new Date();
    expire.setDate(expire.getDate()+365); // Cookie expires after 1 year (365 days) 
    document.cookie="ah_searchpref=" +p+ "; expires=" +expire.toGMTString()+ ";";
}

// ]]-->
</script> 
 </form>
<!-- END SEARCH CONTENT -->    



<!-- BEGIN PAGE CONTENT WRAPPER -->
    <div id="page_content_wrapper">
<!-- BEGIN PAGE WRAPPER -->
<table id="page_content_table">
<tr>

<td id="col2">
<!-- BEGIN CONTENT WRAPPER -->
<!-- BEGIN BREADCRUMBS -->

      
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-7c00.html" title="cftrace"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec22c24-7d84.html" title="cftree"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e50e0885e12057559231-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e50e0885e12057559231-8000.html"><b>ColdFusion&#160;9&#160;CFML&#160;Reference</b></a> / <a href="WSc3ff6d0ea77859461172e0811cbec17576-7ffe.html"><b>ColdFusion Tags</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec1a07e-7fff.html"><b>Tags t</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
      <div id="content_wrapper">
<!-- BEGIN PAGE TITLE -->
        <h1>cftransaction</h1>
<!-- END PAGE TITLE -->
<!-- BEGIN IONCOMMENTCOUNT -->
        <div id="ionCount">
        </div>
<!-- END IONCOMMENTCOUNT -->
<table id="inner_content_table" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td>
          <div style="border-top:#ccc solid 1px;"><p> </p>
          </div>
<p id="chcPromo" style="display:none;">
<a id="chcLink" href="http://www.adobe.com/support/chc/">
<img id="chcImage" src="http://www.adobe.com/support/chc/GetMoreHelpFeatures.png"/>
</a>
</p>
<script type="text/javascript" language="javascript" charset="utf-8">
<!--
var cfgArray = [];
//cfgArray["Acrobat_10.0_Professional.helpcfg"] = "acrobatpro";
//cfgArray["Acrobat_10.0_Standard.helpcfg"] = "acrobatstd";
cfgArray["Lightroom_3.0.helpcfg"] = "lightroom";
cfgArray["PhotoshopElements_8.0_Win.helpcfg"] = "photoshopelements";
cfgArray["PhotoshopElements_8.0_Mac.helpcfg"] = "photoshopelementsmac";
cfgArray["PremiereElements_8.0_Win.helpcfg"] = "premiereelements";

//cfgArray["AfterEffects_10.0.helpcfg"] = "aftereffects";
//cfgArray["AIR.helpcfg"] = "air";
//cfgArray["ColdFusionBuilder.helpcfg"] = "coldfusion";
//cfgArray["Contribute_6.0.helpcfg"] = "contribute";
//cfgArray["DeviceCentral_3.0.helpcfg"] = "devicecentral";
//cfgArray["Dreamweaver_11.0.helpcfg"] = "dreamweaver";
//cfgArray["EncoreDVD_5.0.helpcfg"] = "encore";
//cfgArray["ExtensionManager_3.0.helpcfg"] = "extension";
//cfgArray["Fireworks_11.0.helpcfg"] = "fireworks";
//cfgArray["Flash_11.0.helpcfg"] = "flash";
//cfgArray["Flex_4.0.helpcfg"] = "flashbuilder";
//cfgArray["FlashCatalyst_1.0.helpcfg"] = "flashcatalyst";
//cfgArray["Illustrator_15.0.helpcfg"] = "illustrator";
//cfgArray["InCopy_7.0.helpcfg"] = "incopy";
//cfgArray["InDesign_7.0.helpcfg"] = "indesign";
//cfgArray["OnLocation_5.0.helpcfg"] = "onlocation";
//cfgArray["Photoshop_12.0.helpcfg"] = "photoshop";
//cfgArray["PremierePro_5.0.helpcfg"] = "premierepro";

function getLangName() {
    var lang = "en-us";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if (ptn.test(lang)) {
        var languageCode = lang.replace(ptn, "$1");
        var countryCode = lang.replace(ptn, "$2");
        lang = languageCode + "_" + countryCode.toUpperCase();
    }
    return lang;
}

function getCountryName() {
    var lang = "";
    var metaElements = document.all ?
            document.all.tags('meta') :
            document.getElementsByTagName ?
            document.getElementsByTagName ('meta') : new Array();
    for (var m = 0; m < metaElements.length; m++) {
        if (metaElements[m].name == "lang") {
            lang = metaElements[m].content;
            break;
        }
    }
    var ptn = /(..)-(..)/;
    if ((ptn.test(lang)) && (lang != "en-us")) {
        var countryCode = lang.replace(ptn, "$2");
        return "/" + countryCode;
    }
    return "";
}

if ( (typeof(terms_HELPCFG) != 'undefined')  && (terms_HELPCFG.indexOf(".helpcfg") != -1) ) {
    var stage   = (document.location.href.indexOf(".stage.") != -1) ? 'stage.' : '';
    var baseUrl = 'http://www.' + stage + 'adobe.com';
    var refpage = document.location.href.replace(/#.*$/, '');
	
	if ((!use_robohelp_behavior) && (terms_HELPCFG.length > 0) && (typeof(cfgArray[terms_HELPCFG]) != 'undefined') && (cfgArray[terms_HELPCFG].length > 0)) {
		if (document.getElementById) { // DOM3 = IE5, NS6
			var newHref = baseUrl + getCountryName() + "/support/chc/" + "?helpcfg=http://help." + stage + "adobe.com/HelpCfg/" + getLangName() + "/" + terms_HELPCFG + "&url=" + refpage + "&product=" + cfgArray[terms_HELPCFG];
			var newSrc = baseUrl + getCountryName() + "/support/chc/GetMoreHelpFeatures.png";
			document.getElementById("chcPromo").style.display = "block";
			document.getElementById("chcLink").href = newHref;
			document.getElementById("chcImage").src = newSrc;
		}
	}
}

//-->
</script>



          <div><div class="section" id="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fad"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fad"><!-- --></a><h4 class="sectiontitle">Description</h4><p>For
enterprise database management systems that support transaction processing,
instructs the database management system to treat multiple database
operations as a single transaction. Provides database commit and rollback
processing. See the documentation for your database management system
to determine whether it supports SQL transaction processing.</p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fac"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fac"><!-- --></a><h4 class="sectiontitle">Category</h4><p><a href="WSc3ff6d0ea77859461172e0811cbec22c24-7716.html">Database manipulation tags</a></p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fab"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fab"><!-- --></a><h4 class="sectiontitle">Syntax</h4><pre>&lt;cftransaction  
    action = "begin|commit|rollback|setsavepoint" 
    isolation = "read_uncommitted|read_committed|repeatable_read" 
    savepoint = "<i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">savepoint name</i>"&gt; 
&lt;/cftransaction&gt;</pre>
<div class="note"><span class="notetitle">Note:  </span>You can specify
this tag’s attributes in an <samp class="codeph">attributeCollection</samp> attribute
whose value is a structure. Specify the structure name in the <samp class="codeph">attributeCollection</samp> attribute
and use the tag’s attribute names as structure keys.</div>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7faa"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7faa"><!-- --></a><h4 class="sectiontitle">See also</h4><p><samp class="codeph"><a href="WSc3ff6d0ea77859461172e0811cbec22c24-7c78.html">cfinsert</a></samp>, <samp class="codeph"><a href="WSc3ff6d0ea77859461172e0811cbec22c24-7d52.html">cfprocparam</a></samp>, <samp class="codeph"><a href="WSc3ff6d0ea77859461172e0811cbec22c24-7f95.html">cfprocresult</a></samp>, <samp class="codeph"><a href="WSc3ff6d0ea77859461172e0811cbec22c24-7fae.html">cfquery</a></samp>, <samp class="codeph"><a href="WSc3ff6d0ea77859461172e0811cbec22c24-7f6f.html">cfqueryparam</a></samp>, <samp class="codeph"><a href="WSc3ff6d0ea77859461172e0811cbec22c24-7d55.html">cfstoredproc</a></samp>, <samp class="codeph"><a href="WSc3ff6d0ea77859461172e0811cbec22c24-7c6a.html">cfupdate</a></samp>; <a href="http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-6eb8.html" target="_self">Commits,
rollbacks, and transactions</a> and <a href="http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WS17433CEE-48E1-45ec-9034-3B3AE4892402.html" target="_self">Tags
as functions and operators</a> in <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">Developing ColdFusion Applications</i></p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fd6"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fd6"><!-- --></a><h4 class="sectiontitle">History</h4><p>ColdFusion
8: Added the <samp class="codeph">setsavepoint</samp> value to the <samp class="codeph">action</samp> attribute.
Added the <samp class="codeph">savepoint</samp> attribute.</p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fa9"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fa9"><!-- --></a><h4 class="sectiontitle">Attributes</h4>
<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0"><thead align="left"><tr><th valign="top" width="NaN%" id="d17e98793"><p>Attribute</p>
</th>
<th valign="top" width="NaN%" id="d17e98796"><p>Req/Opt</p>
</th>
<th valign="top" width="NaN%" id="d17e98799"><p>Default</p>
</th>
<th valign="top" width="NaN%" id="d17e98802"><p>Description</p>
</th>
</tr>
</thead>
<tbody><tr><td valign="top" width="NaN%" headers="d17e98793 "><p><samp class="codeph">action</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e98796 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e98799 "><p><samp class="codeph">begin </samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e98802 "><div class="para"><ul><li><p><samp class="codeph">begin</samp>: The start
of the block of code to execute.</p>
</li>
<li><p><samp class="codeph">commit</samp>: Commits a pending transaction.</p>
</li>
<li><p><samp class="codeph">rollback</samp>: Rolls back a pending transaction.</p>
</li>
<li><p><samp class="codeph">setsavepoint</samp>: Saves a specific state within
a transaction</p>
</li>
</ul>
</div>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e98793 "><p><samp class="codeph">isolation</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e98796 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e98799 "><p></p>
</td>
<td valign="top" width="NaN%" headers="d17e98802 "><p>Isolation level, which indicates which type
of read can occur during the execution of concurrent SQL transactions.
The possible read actions include <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">dirty read</i>, in which a
second SQL transaction reads a row before the first SQL transaction
executes a COMMIT; <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">non-repeatable read</i>, in which a SQL transaction
reads a row and then a second SQL transaction modifies or deletes
the row and executes a COMMIT; and <i xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema">phantom</i>, in which a SQL
transaction reads rows that meet search criteria, a second SQL transaction
then generates at least one row that meets the first transaction’s
search criteria, and then the first transaction repeats the search,
resulting in a different result set.</p>
<div class="para"><ul><li><p><samp class="codeph">read_uncommitted</samp>:
Allows dirty read, non-repeatable read, and phantom</p>
</li>
<li><p><samp class="codeph">read_committed</samp>: Allows non-repeatable read
and phantom. Does not allow dirty read.</p>
</li>
<li><p><samp class="codeph">repeatable_read</samp>: Allows phantom. Does not
allow dirty read or non-repeatable read.</p>
</li>
<li><p><samp class="codeph">serializable</samp>: Does not allow dirty read,
non-repeatable read, or phantom.</p>
</li>
</ul>
</div>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e98793 "><p><samp class="codeph">savepoint</samp></p>
</td>
<td valign="top" width="NaN%" headers="d17e98796 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e98799 "><p></p>
</td>
<td valign="top" width="NaN%" headers="d17e98802 "><p>The name of the savepoint in the transaction.
Setting savepoints lets you roll back portions of a transaction.
For example, if your transaction includes an insert, an update,
and a delete, and you set a savepoint after the update, you can
roll back the transaction to exclude the delete. </p>
</td>
</tr>
<tr><td valign="top" width="NaN%" headers="d17e98793 "><p>nested</p>
</td>
<td valign="top" width="NaN%" headers="d17e98796 "><p>Optional</p>
</td>
<td valign="top" width="NaN%" headers="d17e98799 "><p>true</p>
</td>
<td valign="top" width="NaN%" headers="d17e98802 "><p>This attribute specifies whether the cftransaction
tag can be nested inside another cftransaction tag. If the attribute
value is false and there is a parent cftransaction tag, ColdFusion generates
an error. </p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fc5"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fc5"><!-- --></a><h4 class="sectiontitle">Usage</h4><p>If you
do not specify a value for the <samp class="codeph">action</samp> attribute,
automatic transaction processing proceeds as follows:</p>
<ul><li><p>If the <samp class="codeph">cfquery</samp> operations within the transaction
block complete without an error, the transaction is committed.</p>
</li>
<li><p>If a <samp class="codeph">cfquery</samp> tag generates an error within
a <samp class="codeph">cftransaction</samp> block, all <samp class="codeph">cfquery</samp> operations
in the transaction roll back.</p>
<p>If you do not specify a value
for the <samp class="codeph">isolation</samp> attribute, ColdFusion uses the default
isolation level for the associated database.</p>
<p>By using CFML
error handling and the <samp class="codeph">action</samp> attribute, however,
you can explicitly control whether a transaction is committed or
rolled back, based on the success or failure of the database query.
In a transaction block, you can do the following:</p>
</li>
<li><p>Commit a database transaction by nesting the <samp class="codeph">&lt;cftransaction action = "commit"/&gt;</samp> tag
in the block.</p>
</li>
<li><p>Roll back a transaction by nesting the <samp class="codeph">&lt;cftransaction action = "rollback"/&gt;</samp> tag
in the block.</p>
<p>(In these examples, the slash is an alternate
syntax that is the equivalent of an end tag.)</p>
<p>In a transaction
block, you can write queries to more than one database, but you
must commit or roll back a transaction to one database before writing
a query to another. </p>
<p>To control how the database engine performs
locking during the transaction, use the <samp class="codeph">isolation</samp> attribute. </p>
<p>The <samp class="codeph">cftransaction</samp> tag
does not work as expected if you use the <samp class="codeph">cfthread</samp> tag
in it to make query calls. </p>
</li>
<li><p>You can now nest cftransaction tags. Typically, ColdFusion
9 does not support nested transactions, but you can embed one cftransaction
tag inside another. If you nest these tags, only the outermost cftransaction
tag takes effect.</p>
<p>This feature lets you write functions that
must run in a transaction without considering whether the function
is called by code that is inside a cftransaction tag. Use a cftransaction
tag in the function. If the calling code is in a transaction, the
tag has no effect. If the calling code is not in a transaction,
the tag starts the transaction.</p>
<p>The following code shows nested
transaction tags. </p>
<pre>&lt;cftransaction&gt; 
&lt;cfquery name="iquery" datasource="dsn"&gt; 
insert into region(regionid, regiondescription) values('111', 'YPR') 
&lt;/cfquery&gt; 
&lt;cftransaction&gt; 
&lt;cfquery name="iquery" datasource="dsn"&gt; 
update region set regiondescription = 'new' where regionid='111' 
&lt;/cfquery&gt; 
&lt;/cftransaction&gt; 
&lt;/cftransaction&gt;</pre>
<div class="note"><span class="notetitle">Note:  </span>In a realistic situation,
the second cftransaction and cfquery can be written in a CFC that
are, in turn, called by the first cftransaction and cfquery by passing the
regionid value.</div>
</li>
</ul>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fa8"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-7fa8"><!-- --></a><h4 class="sectiontitle">Example</h4><pre>&lt;p&gt;The cftransaction tag can be used to group multiple queries that use  
the cfquery tag into one business event. Changes to data that is requested 
by the queries are not committed to the datasource until all actions within 
the transaction block have executed successfully. 
&lt;p&gt;This a view-only example.  
&lt;!---  
&lt;cftransaction&gt; 
    &lt;cfquery name='makeNewCourse' datasource='Snippets'&gt; 
    INSERT INTO Courses 
        (Number, Descript) 
    VALUES 
        ('#myNumber#', '#myDescription#') 
    &lt;/cfquery&gt; 
 
    &lt;cfquery name='insertNewCourseToList' datasource='Snippets'&gt; 
    INSERT INTO CourseList 
        (CorNumber, CorDesc, Dept_ID, 
        CorName, CorLevel, LastUpdate) 
    VALUES 
        ('#myNumber#', '#myDescription#', '#myDepartment#', 
        '#myDescription#', '#myCorLevel#', #Now()#) 
    &lt;/cfquery&gt; 
&lt;/cftransaction&gt;  
---&gt;</pre>
<p>You can set savepoints at the completion
of insert, update, and delete actions of a transaction. You then
use error handling logic to determine whether it is necessary to
roll back to a previous savepoint. </p>
</div>
<div class="section" id="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-8000"><a name="WSc3ff6d0ea77859461172e0811cbec22c24-7c6b__WSc3ff6d0ea77859461172e0811cbec1a07e-8000"><!-- --></a><h4 class="sectiontitle">Example</h4><pre>&lt;!--- This example performs batch processing of withdrawals ---&gt; 
&lt;!--- from a bank account. The withdrawal amounts are stored ---&gt; 
&lt;!--- in an array. ---&gt; 
&lt;!--- There is a CFC named bank.cfc whose contains appear ---&gt; 
&lt;!--- after the example. ---&gt; 
 
&lt;cftransaction&gt; 
    &lt;!--- Get the account balance. ---&gt; 
    &lt;cfinvoke component="bank" method="getBalance"  
        returnvariable="getacctbalance" accountnum=1&gt; 
 
&lt;cfloop index="withdrawnum" from="1" to="#ArrayLen(withdrawals)#"&gt; 
    &lt;!--- Set a savepoint before making the withdrawal. ---&gt; 
    &lt;cfset noxfer = "point" &amp; #withdrawnum#&gt; 
    &lt;cftransaction action = "setsavepoint" savepoint = "#noxfer#"/&gt; 
 
    &lt;!--- Make the withdrawal. ---&gt; 
    &lt;cfinvoke component="bank" method="makewithdrawal"  
        returnvariable="getacctbalance" accountnum=1  
        withdrawamount="#withdrawals[withdrawnum]#"&gt;     
 
    &lt;!--- Get the account balance. ---&gt; 
    &lt;cfinvoke component="bank" method="getBalance"  
        returnvariable="getacctbalance" accountnum=1&gt; 
     
    &lt;!--- If the balance is negative, roll back the transaction. ---&gt; 
    &lt;cfif getacctbalance.balance lt 0&gt; 
        &lt;cftransaction action="rollback" savepoint="#noxfer#" /&gt; 
    &lt;/cfif&gt; 
    &lt;/cfloop&gt; 
&lt;/cftransaction&gt; 
 
&lt;!--- The bank.cfc contains the following: 
 
cfcomponent&gt; 
    &lt;cffunction name="getBalance" access="public" returntype="query"&gt; 
        &lt;cfargument name="accountnum" type="numeric" required="yes"&gt; 
            &lt;cfquery name="getacctbalance" datasource="testsqlserver"&gt; 
                SELECT * FROM dbo.mybank  
                WHERE accountid = #accountnum# 
            &lt;/cfquery&gt; 
        &lt;cfreturn getacctbalance&gt; 
    &lt;/cffunction&gt; 
     
    &lt;cffunction name="makewithdrawal" access="public" returntype="query"&gt; 
        &lt;cfargument name="accountnum" type="numeric" required="yes"&gt; 
        &lt;cfargument name="withdrawamount" type="numeric" required="yes"&gt;         
            &lt;cfquery name="withdrawfromacct" datasource="testsqlserver"&gt; 
                UPDATE dbo.mybank SET balance = balance - #withdrawamount# 
                WHERE accountid = 1 
            &lt;/cfquery&gt; 
            &lt;cfinvoke method="getBalance" returnvariable="getacctbalance"  
        accountnum=1&gt; 
        &lt;cfreturn getacctbalance&gt;     
    &lt;/cffunction&gt; 
&lt;/cfcomponent&gt; 
---&gt;</pre>
</div>
</div>


<!-- BEGIN USER PREFERENCES -->
          <div id="userprefs">
          </div>
<!-- END USER PREFERENCES -->

          <div id="related">
            
            
            <div class="separator">&#160;</div>
          </div>
          <div id="footer">
<!-- BEGIN IONCOMMENTS -->
            <div id="ionComHere">
            </div>
<!-- END IONCOMMENTS -->


            <p id="creativecommons"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" id="creativecommons_text"><img id="creativecommons_img" src="images/CC.png" alt="This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License" /></a>&nbsp;Twitter™ and Facebook posts are not covered under the terms of Creative Commons.</p>
          </div>
</td>
<td width="10px"></td>
<td id="inner_rightcolumn">

</td></tr></table>
      </div>
<!-- BEGIN BREADCRUMBS -->
      <div id="breadcrumb">
        
<ul class="navigation"><li class="prev"><a accesskey="p" class="prev" href="WSc3ff6d0ea77859461172e0811cbec22c24-7c00.html" title="cftrace"><img src="images/blank.gif" alt="Previous" width="17" height="17" /></a></li><li class="next"><a accesskey="n" class="next" href="WSc3ff6d0ea77859461172e0811cbec22c24-7d84.html" title="cftree"><img src="images/blank.gif" alt="Next" width="17" height="17" /></a></li></ul><div class="hierarchy" id="hierarchy"><a href="WSf01dbd23413dda0e50e0885e12057559231-8000.html"><b>Home</b></a> / <a href="WSf01dbd23413dda0e50e0885e12057559231-8000.html"><b>ColdFusion&#160;9&#160;CFML&#160;Reference</b></a> / <a href="WSc3ff6d0ea77859461172e0811cbec17576-7ffe.html"><b>ColdFusion Tags</b></a> 
      / <a href="WSc3ff6d0ea77859461172e0811cbec1a07e-7fff.html"><b>Tags t</b></a> 
     </div>

      </div>
<!-- END BREADCRUMBS -->
<!-- END CONTENT WRAPPER -->

</td>
<td id="col3">
    <div>
        <img src="images/adobe-lq.png" />
    </div>
</td>
</tr>
</table>
    </div>
<!-- END PAGE CONTENT WRAPPER -->
<script type="text/javascript">
<!--[CDATA[
scrollToNameAnchor();
// ]]-->
</script> 
<!--
    Description:
    This file generates the link to product support in the top right corner
-->

<style>
#menutop{
    position:absolute;
    top:4px;
    right:24px;
    width:auto;    
    font-size:11px;
    color:#fff;
    text-align:right;
}
#menutop a{
    color:#fff;
}
#menutop a:hover{
        text-decoration:underline;
}
</style>  
  
  
  
  
<div id="productmenu">
<!--googleoff: index-->
  <div id="menutop">


<script language=javascript type='text/javascript'>
    // darken menu text for products with light backgrounds
    var path = document.location.href.toLowerCase();
    if (path.indexOf("/acrobat/")           	> 0 ||
        path.indexOf("/acrobat.com/")       	> 0 ||
        path.indexOf("/acrobatConnectPro/") 	> 0 ||
        path.indexOf("/connect/")           	> 0 ||
        path.indexOf("/livecycledataserviceses/") > 0 ||
        path.indexOf("/muse/")         	> 0 ||
	path.indexOf("/presenter/")         	> 0 ||
        path.indexOf("/scene7/")            	> 0 ||
        path.indexOf("/flashmediaserver/")  	> 0 ||
        path.indexOf("/wave/")              	> 0 )
    {
        document.write('<style>#menutop a{color:#505050}</style>');
    }
    if (typeof('terms_AHV_PRODUCT_SUPPORT') != "undefined" && ! use_robohelp_behavior ){      
        if (path.indexOf("/muse/") > -1 ){
            var supportlink = '<a href="http://muse.adobe.com/support.html">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }else{
            var supportlink = '<a href="http://adobe.com/support">'+terms_AHV_PRODUCT_SUPPORT+'</a>';
        }
        document.write( supportlink );
     }

</script> 

  </div>
<!--googleon: index-->
</div>



<style>
#online-privacy-policy{ 
    margin:10px 40px; 
    font-size:11px;
}
</style>

<p id="online-privacy-policy">
<script language="javascript">
var pageLoc = "en_US";
var metaElements = document.all ?
document.all.tags('meta') :
document.getElementsByTagName ?
document.getElementsByTagName ('meta') : new Array();
for (var m = 0; m < metaElements.length; m++) {
	if (metaElements[m].name == "lang") {
		pageLoc = metaElements[m].content;
		break;
	}
}
var ptn = /(..)-(..)/;
if (ptn.test(pageLoc)) {
	var languageCode = pageLoc.replace(ptn, "$1");
	var countryCode = pageLoc.replace(ptn, "$2");
	pageLoc = languageCode + "_" + countryCode.toUpperCase();
}

var policyLoc = "en_US";
var policyText = "Online Privacy Policy";
var policyPath = "";
var policyArray=[
"da_DK", "Online fortrolighedserklæring",
"de_DE", "Online-Datenschutzrichtlinie",
"es_ES", "Política de confidencialidad en línea",
"fi_FI", "Yksityisyyttä koskeva Online-toimintaohjelma",
"fr_FR", "Confidentialité et sécurité",
"it_IT", "Informativa sulla privacy online",
"ja_JP", "プライバシーポリシー",
"ko_KR", "Adobe 온라인 개인정보 보호정책",
"pt_BR", "Política de Confidencialidade On-line", 
"zh_CN", "在线隐私政策",
"zh_TW", "線上隱私政策"
];
var legalLoc = "en_US";
var legalText = "Legal Notices";
var legalPath = legalLoc;
var legalArray=[
"ar_AE", "إشعارات قانونية",
"bg_BG", "Юридически бележки",
"cs_CZ", "Právní upozornění",
"da_DK", "Juridiske meddelelser",
"de_DE", "Rechtliche Hinweise",
"el_GR", "Σημειώσεις νομικού περιεχομένου",
"es_ES", "Avisos legales",
"et_EE", "Juriidilised teated",
"fi_FI", "Lakisääteiset ilmoitukset",
"fr_FR", "Mentions légales",
"he_IL", "הצהרות משפטיות",
"hr_HR", "Pravne napomene",
"hu_HU", "Jogi közlemények",
"it_IT", "Informazioni legali",
"ja_JP", "法律上の注意",
"ko_KR", "법적 고지 사항",
"lt_LT", "Teisinės pastabos",
"lv_LV", "Juridisks paziņojums",
"nb_NO", "Juridiske merknader",
"nl_NL", "Juridische kennisgevingen",
"pl_PL", "Informacje prawne",
"pt_BR", "Aspectos jurídicos",
"ro_RO", "Prevederi legale",
"ru_RU", "Юридическая информация",
"sk_SK", "Právne upozornenie",
"sl_SI", "Pravni pouk",
"sv_SE", "Upphovsrätt",
"tr_TR", "Yasal uyarılar",
"uk_UA", "Юридична інформація",
"zh_CN", "法律声明",
"zh_TW", "法律注意事項"
];

ruPolicy = "http://www.adobe.com/ru/misc/privacy.html";
trPolicy = "http://www.adobe.com/tr/misc/privacy.html";

// Bug 2846992: LOC: RUS, TUR: The link to "Online Privacy Policy" should include language, currently it is not appearing.
if (pageLoc == "ru_RU") {
	policyPath = "ru";
}
else if (pageLoc == "tr_TR") {
	policyPath = "tr";
}
for (var i = 0; i < policyArray.length; i+=2) {
	if (pageLoc == policyArray[i]) {
		policyLoc = pageLoc;
		policyText = policyArray[i+1];
		var ptn = /(..)_(..)/;
		if (ptn.test(policyLoc)) {
			var countryCode = policyLoc.replace(ptn, "$2");
			policyPath = countryCode.toLowerCase();
		}
		break;
	}
}

for (var i = 0; i < legalArray.length; i+=2) {
	if (pageLoc == legalArray[i]) {
		legalLoc = pageLoc;
		legalText = legalArray[i+1];
		legalPath = legalLoc;
		break;
	}
}
if(agt.indexOf("community help client") > -1 ){
	document.write('<a href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
}else{
	//Open the privacy policy in a new window
	document.write('<a target="_blank" href="/'+legalPath+'/legalnotices/index.html">'+legalText+'<\/a>');
	document.write(' | ');
	document.write('<a target="_blank" href="http://www.adobe.com/'+policyPath+'/misc/privacy.html">'+policyText+'<\/a>');
} 
</script>
</p>



<!-- localfooter.ssi -->

<script type="text/javascript">
    var debug = (top.location.href.indexOf("debug=true") > -1);
</script>

<script language="javascript">
document.write('<scr'+'ipt ' +
               'src="/en_US/ssi/_pod.js" ' +
               'language="javascript" ' +
               'charset="UTF-8"> ' +
               '</scr'+'ipt>');
</script>


<script type="text/javascript">
//
//  Ethnio survey code
//
/*          DocumentID      EthnioID */
/*          -------------   -------- */
var ethnio=["/en_US/flash/cs/using/WSb03e830bd6f770ee6664507612436d7dede-8000.html", "87462",
            "/en_US/creativesuite/cs/using/WSe851854fd1e0856a-4b08a77612477f69f15-8000.html",  "10441",
            "/en_US/dreamweaver/cs/using/WSEE4C0148-A6F4-4bf5-9DEF-CE06AB026214a.html",  "57412"
 
    ];
                        
    for ( var i = 0; i < ethnio.length ; i = i+2 ){
        if ( document.location.href.indexOf( ethnio[i] ) > -1 ){ 
            var headID = document.getElementsByTagName("head")[0];         
            var ethnioScript = document.createElement('script');
            ethnioScript.type = 'text/javascript';
            ethnioScript.src = 'http://ethn.io/remotes/' + ethnio[i+1];        
            if ( debug ){
                alert ("Using Ethnio script: " + ethnioScript.src );
            }else{
                headID.appendChild(ethnioScript);
            }
        }
    }
</script>



<div style="display: none;">
<!-- SiteCatalyst -->
<script language="JavaScript" type="text/javascript"><!--
var s_code=' ';
var s_docHost = window.location.hostname.toLowerCase();
var s_docURL = window.location.pathname.toLowerCase();
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
if (s_docHost.indexOf(".corp.adobe") != -1 || s_docHost.indexOf("stage.") != -1 || s_docHost.indexOf(".dev.adobe") != -1 || s_docHost.indexOf("staging.") != -1) scJsHost="";
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/omniture_s_code.js' type='text/javascript'%3E%3C/script%3E"));
//--></script>
<script type="text/javascript"><!--
var s_accountName;
s_server="www.adobe.com static content pages";
if (!window.s_account) s_accountName="mxmacromedia";
else s_accountName=window.s_account;

if (window.s_docURL.indexOf("/designcenter/") != -1)
  s_channel="Adobe Design Center";	
else if ((window.s_docHost.indexOf("labs.adobe") != -1) ||
(window.s_docHost.indexOf("labs-staging.") != -1))
  s_channel="Labs";
else if (window.s_docHost.indexOf("help.adobe.com") != -1) {
  s_channel="Support Help.adobe.com";
  if (window.s_docURL.indexOf("/en_us/") == -1) {
    s_docURLArray=s_docURL.split('/');
    s_pageName="http://help.adobe.com/"+s_docURLArray[1]+"/"+ s_docURLArray[2]+"/"+s_docURLArray[3];
    s_prop23="http://help.adobe.com"+window.location.pathname;
  }
}
else if (window.s_docHost.indexOf("kb2.adobe.com") != -1) {
  s_channel="Support Knowledgebase";
  s_prop23="http://kb2.adobe.com"+s_docURL+":";
  if (typeof(omtrProductList) != 'undefined' && omtrProductList.length > 0)
 {
    s_prop23=s_prop23+omtrProductList;
  }
}
else if (window.s_docHost.indexOf("resellers.adobe.com") != -1) {
		var s_pageName=document.getElementsByTagName("title")[0].text;
}

if (!window.scMMInclude) {
	var s_wd=window,s_tm=new Date;
	if(s_code!=' '){
		s_code=s_dc(s_accountName);
		if(s_code)document.write(s_code)
	} 
} else {
	s_wds(s_accountName);s_ca(s_accountName); 
}	

function sendAnalyticsEvent(str){var ns=s_accountName;if(str!=null)ns+=","+str;void(s_gs(ns));}
function sendLinkEvent(accnt,lnkname,type){
accnt=s_accountName;s_linkType=type;s_lnk=true;s_linkName=lnkname;void(s_gs(accnt));}
//--></script>
<noscript><img src="http://stats.adobe.com/b/ss/mxmacromedia/1/H.15-XELvs/0?pageName=http%3A//www.adobe.com%3A%20noscript&ch=http%3A//www.adobe.com%3A%20noscript&g=http%3A//www.adobe.com" height="1" width="1" border="0" alt="" /></noscript>
<!-- End SiteCatalyst -->
</div>

<script language="JavaScript" type="text/javascript">//<![CDATA[
var scJsHost = (("https:" == document.location.protocol) ? "https://www.adobe.com" : "http://wwwimages.adobe.com");
document.write(unescape("%3Cscript src='" + scJsHost + "/uber/js/atm/s_code_www.js' type='text/javascript'%3E%3C/script%3E"));
//]]></script>
<script type="text/javascript">//<![CDATA[
if(s_adobe){	
	s_adobe.server="www.adobe.com Static Content pages";
	/* Set pageName */
	s_adobe.s_URL="adobe.com"+((location.pathname.charAt(0)=='/')?location.pathname:'/'+location.pathname);
	if (s_adobe.s_URL.substring(s_adobe.s_URL.lastIndexOf('/')+1)=="") s_adobe.s_URL=s_adobe.s_URL+"index.html";
	s_adobe.s_URLSplit=s_adobe.s_URL.split("/");
	s_adobe.pageName=s_adobe.s_URLSplit.join(":");

	/* Set prop4 to language-locale */
	var s_meta=document.getElementsByTagName('meta'); 
      for (i=0; i<s_meta.length; i++) { 
        if (s_meta[i].getAttribute("http-equiv") == "Content-Language") { 
          s_adobe.prop4=s_meta[i].getAttribute("content"); 
	    s_adobe.prop4=s_adobe.prop4.replace(/\s+/g,'');
        } 
      } 
	s_adobe.t()
}
//]]></script>








  </body>
</html>